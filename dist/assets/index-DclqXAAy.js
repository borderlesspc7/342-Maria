(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function wN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sp={exports:{}},wc={};var mE;function SN(){if(mE)return wc;mE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:n,type:s,key:d,ref:o!==void 0?o:null,props:c}}return wc.Fragment=e,wc.jsx=t,wc.jsxs=t,wc}var pE;function NN(){return pE||(pE=1,Sp.exports=SN()),Sp.exports}var l=NN(),Np={exports:{}},Ae={};var gE;function AN(){if(gE)return Ae;gE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),x=Symbol.iterator;function w(P){return P===null||typeof P!="object"?null:(P=x&&P[x]||P["@@iterator"],typeof P=="function"?P:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,L={};function q(P,te,G){this.props=P,this.context=te,this.refs=L,this.updater=G||I}q.prototype.isReactComponent={},q.prototype.setState=function(P,te){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,te,"setState")},q.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function X(){}X.prototype=q.prototype;function F(P,te,G){this.props=P,this.context=te,this.refs=L,this.updater=G||I}var oe=F.prototype=new X;oe.constructor=F,U(oe,q.prototype),oe.isPureReactComponent=!0;var ce=Array.isArray;function ue(){}var A={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function S(P,te,G){var he=G.ref;return{$$typeof:n,type:P,key:te,ref:he!==void 0?he:null,props:G}}function j(P,te){return S(P.type,te,P.props)}function M(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function z(P){var te={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(G){return te[G]})}var C=/\/+/g;function De(P,te){return typeof P=="object"&&P!==null&&P.key!=null?z(""+P.key):te.toString(36)}function it(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(ue,ue):(P.status="pending",P.then(function(te){P.status==="pending"&&(P.status="fulfilled",P.value=te)},function(te){P.status==="pending"&&(P.status="rejected",P.reason=te)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function Z(P,te,G,he,xe){var Ie=typeof P;(Ie==="undefined"||Ie==="boolean")&&(P=null);var He=!1;if(P===null)He=!0;else switch(Ie){case"bigint":case"string":case"number":He=!0;break;case"object":switch(P.$$typeof){case n:case e:He=!0;break;case _:return He=P._init,Z(He(P._payload),te,G,he,xe)}}if(He)return xe=xe(P),He=he===""?"."+De(P,0):he,ce(xe)?(G="",He!=null&&(G=He.replace(C,"$&/")+"/"),Z(xe,te,G,"",function(Zs){return Zs})):xe!=null&&(M(xe)&&(xe=j(xe,G+(xe.key==null||P&&P.key===xe.key?"":(""+xe.key).replace(C,"$&/")+"/")+He)),te.push(xe)),1;He=0;var Ft=he===""?".":he+":";if(ce(P))for(var ft=0;ft<P.length;ft++)he=P[ft],Ie=Ft+De(he,ft),He+=Z(he,te,G,Ie,xe);else if(ft=w(P),typeof ft=="function")for(P=ft.call(P),ft=0;!(he=P.next()).done;)he=he.value,Ie=Ft+De(he,ft++),He+=Z(he,te,G,Ie,xe);else if(Ie==="object"){if(typeof P.then=="function")return Z(it(P),te,G,he,xe);throw te=String(P),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return He}function le(P,te,G){if(P==null)return P;var he=[],xe=0;return Z(P,he,"","",function(Ie){return te.call(G,Ie,xe++)}),he}function ge(P){if(P._status===-1){var te=P._result;te=te(),te.then(function(G){(P._status===0||P._status===-1)&&(P._status=1,P._result=G)},function(G){(P._status===0||P._status===-1)&&(P._status=2,P._result=G)}),P._status===-1&&(P._status=0,P._result=te)}if(P._status===1)return P._result.default;throw P._result}var ne=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},J={map:le,forEach:function(P,te,G){le(P,function(){te.apply(this,arguments)},G)},count:function(P){var te=0;return le(P,function(){te++}),te},toArray:function(P){return le(P,function(te){return te})||[]},only:function(P){if(!M(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Ae.Activity=T,Ae.Children=J,Ae.Component=q,Ae.Fragment=t,Ae.Profiler=o,Ae.PureComponent=F,Ae.StrictMode=s,Ae.Suspense=v,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(P){return A.H.useMemoCache(P)}},Ae.cache=function(P){return function(){return P.apply(null,arguments)}},Ae.cacheSignal=function(){return null},Ae.cloneElement=function(P,te,G){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var he=U({},P.props),xe=P.key;if(te!=null)for(Ie in te.key!==void 0&&(xe=""+te.key),te)!D.call(te,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&te.ref===void 0||(he[Ie]=te[Ie]);var Ie=arguments.length-2;if(Ie===1)he.children=G;else if(1<Ie){for(var He=Array(Ie),Ft=0;Ft<Ie;Ft++)He[Ft]=arguments[Ft+2];he.children=He}return S(P.type,xe,he)},Ae.createContext=function(P){return P={$$typeof:d,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:c,_context:P},P},Ae.createElement=function(P,te,G){var he,xe={},Ie=null;if(te!=null)for(he in te.key!==void 0&&(Ie=""+te.key),te)D.call(te,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(xe[he]=te[he]);var He=arguments.length-2;if(He===1)xe.children=G;else if(1<He){for(var Ft=Array(He),ft=0;ft<He;ft++)Ft[ft]=arguments[ft+2];xe.children=Ft}if(P&&P.defaultProps)for(he in He=P.defaultProps,He)xe[he]===void 0&&(xe[he]=He[he]);return S(P,Ie,xe)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(P){return{$$typeof:p,render:P}},Ae.isValidElement=M,Ae.lazy=function(P){return{$$typeof:_,_payload:{_status:-1,_result:P},_init:ge}},Ae.memo=function(P,te){return{$$typeof:g,type:P,compare:te===void 0?null:te}},Ae.startTransition=function(P){var te=A.T,G={};A.T=G;try{var he=P(),xe=A.S;xe!==null&&xe(G,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ue,ne)}catch(Ie){ne(Ie)}finally{te!==null&&G.types!==null&&(te.types=G.types),A.T=te}},Ae.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Ae.use=function(P){return A.H.use(P)},Ae.useActionState=function(P,te,G){return A.H.useActionState(P,te,G)},Ae.useCallback=function(P,te){return A.H.useCallback(P,te)},Ae.useContext=function(P){return A.H.useContext(P)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(P,te){return A.H.useDeferredValue(P,te)},Ae.useEffect=function(P,te){return A.H.useEffect(P,te)},Ae.useEffectEvent=function(P){return A.H.useEffectEvent(P)},Ae.useId=function(){return A.H.useId()},Ae.useImperativeHandle=function(P,te,G){return A.H.useImperativeHandle(P,te,G)},Ae.useInsertionEffect=function(P,te){return A.H.useInsertionEffect(P,te)},Ae.useLayoutEffect=function(P,te){return A.H.useLayoutEffect(P,te)},Ae.useMemo=function(P,te){return A.H.useMemo(P,te)},Ae.useOptimistic=function(P,te){return A.H.useOptimistic(P,te)},Ae.useReducer=function(P,te,G){return A.H.useReducer(P,te,G)},Ae.useRef=function(P){return A.H.useRef(P)},Ae.useState=function(P){return A.H.useState(P)},Ae.useSyncExternalStore=function(P,te,G){return A.H.useSyncExternalStore(P,te,G)},Ae.useTransition=function(){return A.H.useTransition()},Ae.version="19.2.0",Ae}var vE;function Pg(){return vE||(vE=1,Np.exports=AN()),Np.exports}var O=Pg();const Vs=wN(O);var Ap={exports:{}},Sc={},Rp={exports:{}},Cp={};var yE;function RN(){return yE||(yE=1,(function(n){function e(Z,le){var ge=Z.length;Z.push(le);e:for(;0<ge;){var ne=ge-1>>>1,J=Z[ne];if(0<o(J,le))Z[ne]=le,Z[ge]=J,ge=ne;else break e}}function t(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var le=Z[0],ge=Z.pop();if(ge!==le){Z[0]=ge;e:for(var ne=0,J=Z.length,P=J>>>1;ne<P;){var te=2*(ne+1)-1,G=Z[te],he=te+1,xe=Z[he];if(0>o(G,ge))he<J&&0>o(xe,G)?(Z[ne]=xe,Z[he]=ge,ne=he):(Z[ne]=G,Z[te]=ge,ne=te);else if(he<J&&0>o(xe,ge))Z[ne]=xe,Z[he]=ge,ne=he;else break e}}return le}function o(Z,le){var ge=Z.sortIndex-le.sortIndex;return ge!==0?ge:Z.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();n.unstable_now=function(){return d.now()-p}}var v=[],g=[],_=1,T=null,x=3,w=!1,I=!1,U=!1,L=!1,q=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function oe(Z){for(var le=t(g);le!==null;){if(le.callback===null)s(g);else if(le.startTime<=Z)s(g),le.sortIndex=le.expirationTime,e(v,le);else break;le=t(g)}}function ce(Z){if(U=!1,oe(Z),!I)if(t(v)!==null)I=!0,ue||(ue=!0,z());else{var le=t(g);le!==null&&it(ce,le.startTime-Z)}}var ue=!1,A=-1,D=5,S=-1;function j(){return L?!0:!(n.unstable_now()-S<D)}function M(){if(L=!1,ue){var Z=n.unstable_now();S=Z;var le=!0;try{e:{I=!1,U&&(U=!1,X(A),A=-1),w=!0;var ge=x;try{t:{for(oe(Z),T=t(v);T!==null&&!(T.expirationTime>Z&&j());){var ne=T.callback;if(typeof ne=="function"){T.callback=null,x=T.priorityLevel;var J=ne(T.expirationTime<=Z);if(Z=n.unstable_now(),typeof J=="function"){T.callback=J,oe(Z),le=!0;break t}T===t(v)&&s(v),oe(Z)}else s(v);T=t(v)}if(T!==null)le=!0;else{var P=t(g);P!==null&&it(ce,P.startTime-Z),le=!1}}break e}finally{T=null,x=ge,w=!1}le=void 0}}finally{le?z():ue=!1}}}var z;if(typeof F=="function")z=function(){F(M)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,De=C.port2;C.port1.onmessage=M,z=function(){De.postMessage(null)}}else z=function(){q(M,0)};function it(Z,le){A=q(function(){Z(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(Z){switch(x){case 1:case 2:case 3:var le=3;break;default:le=x}var ge=x;x=le;try{return Z()}finally{x=ge}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(Z,le){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ge=x;x=Z;try{return le()}finally{x=ge}},n.unstable_scheduleCallback=function(Z,le,ge){var ne=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?ne+ge:ne):ge=ne,Z){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ge+J,Z={id:_++,callback:le,priorityLevel:Z,startTime:ge,expirationTime:J,sortIndex:-1},ge>ne?(Z.sortIndex=ge,e(g,Z),t(v)===null&&Z===t(g)&&(U?(X(A),A=-1):U=!0,it(ce,ge-ne))):(Z.sortIndex=J,e(v,Z),I||w||(I=!0,ue||(ue=!0,z()))),Z},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(Z){var le=x;return function(){var ge=x;x=le;try{return Z.apply(this,arguments)}finally{x=ge}}}})(Cp)),Cp}var _E;function CN(){return _E||(_E=1,Rp.exports=RN()),Rp.exports}var jp={exports:{}},on={};var EE;function jN(){if(EE)return on;EE=1;var n=Pg();function e(v){var g="https://react.dev/errors/"+v;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+v+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(v,g,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:v,containerInfo:g,implementation:_}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(v,g){if(v==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,on.createPortal=function(v,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(v,g,null,_)},on.flushSync=function(v){var g=d.T,_=s.p;try{if(d.T=null,s.p=2,v)return v()}finally{d.T=g,s.p=_,s.d.f()}},on.preconnect=function(v,g){typeof v=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(v,g))},on.prefetchDNS=function(v){typeof v=="string"&&s.d.D(v)},on.preinit=function(v,g){if(typeof v=="string"&&g&&typeof g.as=="string"){var _=g.as,T=p(_,g.crossOrigin),x=typeof g.integrity=="string"?g.integrity:void 0,w=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?s.d.S(v,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:x,fetchPriority:w}):_==="script"&&s.d.X(v,{crossOrigin:T,integrity:x,fetchPriority:w,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},on.preinitModule=function(v,g){if(typeof v=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=p(g.as,g.crossOrigin);s.d.M(v,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(v)},on.preload=function(v,g){if(typeof v=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,T=p(_,g.crossOrigin);s.d.L(v,_,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},on.preloadModule=function(v,g){if(typeof v=="string")if(g){var _=p(g.as,g.crossOrigin);s.d.m(v,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(v)},on.requestFormReset=function(v){s.d.r(v)},on.unstable_batchedUpdates=function(v,g){return v(g)},on.useFormState=function(v,g,_){return d.H.useFormState(v,g,_)},on.useFormStatus=function(){return d.H.useHostTransitionStatus()},on.version="19.2.0",on}var bE;function DN(){if(bE)return jp.exports;bE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),jp.exports=jN(),jp.exports}var TE;function IN(){if(TE)return Sc;TE=1;var n=CN(),e=Pg(),t=DN();function s(a){var r="https://react.dev/errors/"+a;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+a+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function c(a){var r=a,i=a;if(a.alternate)for(;r.return;)r=r.return;else{a=r;do r=a,(r.flags&4098)!==0&&(i=r.return),a=r.return;while(a)}return r.tag===3?i:null}function d(a){if(a.tag===13){var r=a.memoizedState;if(r===null&&(a=a.alternate,a!==null&&(r=a.memoizedState)),r!==null)return r.dehydrated}return null}function p(a){if(a.tag===31){var r=a.memoizedState;if(r===null&&(a=a.alternate,a!==null&&(r=a.memoizedState)),r!==null)return r.dehydrated}return null}function v(a){if(c(a)!==a)throw Error(s(188))}function g(a){var r=a.alternate;if(!r){if(r=c(a),r===null)throw Error(s(188));return r!==a?null:a}for(var i=a,u=r;;){var f=i.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){i=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===i)return v(f),a;if(m===u)return v(f),r;m=m.sibling}throw Error(s(188))}if(i.return!==u.return)i=f,u=m;else{for(var E=!1,N=f.child;N;){if(N===i){E=!0,i=f,u=m;break}if(N===u){E=!0,u=f,i=m;break}N=N.sibling}if(!E){for(N=m.child;N;){if(N===i){E=!0,i=m,u=f;break}if(N===u){E=!0,u=m,i=f;break}N=N.sibling}if(!E)throw Error(s(189))}}if(i.alternate!==u)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?a:r}function _(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a;for(a=a.child;a!==null;){if(r=_(a),r!==null)return r;a=a.sibling}return null}var T=Object.assign,x=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),F=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function z(a){return a===null||typeof a!="object"?null:(a=M&&a[M]||a["@@iterator"],typeof a=="function"?a:null)}var C=Symbol.for("react.client.reference");function De(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===C?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case U:return"Fragment";case q:return"Profiler";case L:return"StrictMode";case ce:return"Suspense";case ue:return"SuspenseList";case S:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case I:return"Portal";case F:return a.displayName||"Context";case X:return(a._context.displayName||"Context")+".Consumer";case oe:var r=a.render;return a=a.displayName,a||(a=r.displayName||r.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case A:return r=a.displayName||null,r!==null?r:De(a.type)||"Memo";case D:r=a._payload,a=a._init;try{return De(a(r))}catch{}}return null}var it=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},ne=[],J=-1;function P(a){return{current:a}}function te(a){0>J||(a.current=ne[J],ne[J]=null,J--)}function G(a,r){J++,ne[J]=a.current,a.current=r}var he=P(null),xe=P(null),Ie=P(null),He=P(null);function Ft(a,r){switch(G(Ie,r),G(xe,a),G(he,null),r.nodeType){case 9:case 11:a=(a=r.documentElement)&&(a=a.namespaceURI)?L0(a):0;break;default:if(a=r.tagName,r=r.namespaceURI)r=L0(r),a=k0(r,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}te(he),G(he,a)}function ft(){te(he),te(xe),te(Ie)}function Zs(a){a.memoizedState!==null&&G(He,a);var r=he.current,i=k0(r,a.type);r!==i&&(G(xe,a),G(he,i))}function Wi(a){xe.current===a&&(te(he),te(xe)),He.current===a&&(te(He),Ec._currentValue=ge)}var Zi,eo;function Aa(a){if(Zi===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);Zi=r&&r[1]||"",eo=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zi+a+eo}var El=!1;function ei(a,r){if(!a||El)return"";El=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(W){var Y=W}Reflect.construct(a,[],se)}else{try{se.call()}catch(W){Y=W}a.call(se.prototype)}}else{try{throw Error()}catch(W){Y=W}(se=a())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(W){if(W&&Y&&typeof W.stack=="string")return[W.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),E=m[0],N=m[1];if(E&&N){var V=E.split(`
`),Q=N.split(`
`);for(f=u=0;u<V.length&&!V[u].includes("DetermineComponentFrameRoot");)u++;for(;f<Q.length&&!Q[f].includes("DetermineComponentFrameRoot");)f++;if(u===V.length||f===Q.length)for(u=V.length-1,f=Q.length-1;1<=u&&0<=f&&V[u]!==Q[f];)f--;for(;1<=u&&0<=f;u--,f--)if(V[u]!==Q[f]){if(u!==1||f!==1)do if(u--,f--,0>f||V[u]!==Q[f]){var ee=`
`+V[u].replace(" at new "," at ");return a.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",a.displayName)),ee}while(1<=u&&0<=f);break}}}finally{El=!1,Error.prepareStackTrace=i}return(i=a?a.displayName||a.name:"")?Aa(i):""}function bl(a,r){switch(a.tag){case 26:case 27:case 5:return Aa(a.type);case 16:return Aa("Lazy");case 13:return a.child!==r&&r!==null?Aa("Suspense Fallback"):Aa("Suspense");case 19:return Aa("SuspenseList");case 0:case 15:return ei(a.type,!1);case 11:return ei(a.type.render,!1);case 1:return ei(a.type,!0);case 31:return Aa("Activity");default:return""}}function Tl(a){try{var r="",i=null;do r+=bl(a,i),i=a,a=a.return;while(a);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var jt=Object.prototype.hasOwnProperty,qt=n.unstable_scheduleCallback,Qr=n.unstable_cancelCallback,Af=n.unstable_shouldYield,wu=n.unstable_requestPaint,fn=n.unstable_now,ti=n.unstable_getCurrentPriorityLevel,xl=n.unstable_ImmediatePriority,wl=n.unstable_UserBlockingPriority,Yr=n.unstable_NormalPriority,Rf=n.unstable_LowPriority,Su=n.unstable_IdlePriority,Nu=n.log,Au=n.unstable_setDisableYieldValue,la=null,Jt=null;function Gn(a){if(typeof Nu=="function"&&Au(a),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(la,a)}catch{}}var xt=Math.clz32?Math.clz32:Cu,Ru=Math.log,to=Math.LN2;function Cu(a){return a>>>=0,a===0?32:31-(Ru(a)/to|0)|0}var Ra=256,ni=262144,Dt=4194304;function Ca(a){var r=a&42;if(r!==0)return r;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function ja(a,r,i){var u=a.pendingLanes;if(u===0)return 0;var f=0,m=a.suspendedLanes,E=a.pingedLanes;a=a.warmLanes;var N=u&134217727;return N!==0?(u=N&~m,u!==0?f=Ca(u):(E&=N,E!==0?f=Ca(E):i||(i=N&~a,i!==0&&(f=Ca(i))))):(N=u&~m,N!==0?f=Ca(N):E!==0?f=Ca(E):i||(i=u&~a,i!==0&&(f=Ca(i)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,i=r&-r,m>=i||m===32&&(i&4194048)!==0)?r:f}function ca(a,r){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&r)===0}function Cf(a,r){switch(a){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ju(){var a=Dt;return Dt<<=1,(Dt&62914560)===0&&(Dt=4194304),a}function Da(a){for(var r=[],i=0;31>i;i++)r.push(a);return r}function ai(a,r){a.pendingLanes|=r,r!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function jf(a,r,i,u,f,m){var E=a.pendingLanes;a.pendingLanes=i,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=i,a.entangledLanes&=i,a.errorRecoveryDisabledLanes&=i,a.shellSuspendCounter=0;var N=a.entanglements,V=a.expirationTimes,Q=a.hiddenUpdates;for(i=E&~i;0<i;){var ee=31-xt(i),se=1<<ee;N[ee]=0,V[ee]=-1;var Y=Q[ee];if(Y!==null)for(Q[ee]=null,ee=0;ee<Y.length;ee++){var W=Y[ee];W!==null&&(W.lane&=-536870913)}i&=~se}u!==0&&ri(a,u,0),m!==0&&f===0&&a.tag!==0&&(a.suspendedLanes|=m&~(E&~r))}function ri(a,r,i){a.pendingLanes|=r,a.suspendedLanes&=~r;var u=31-xt(r);a.entangledLanes|=r,a.entanglements[u]=a.entanglements[u]|1073741824|i&261930}function Sl(a,r){var i=a.entangledLanes|=r;for(a=a.entanglements;i;){var u=31-xt(i),f=1<<u;f&r|a[u]&r&&(a[u]|=r),i&=~f}}function Nl(a,r){var i=r&-r;return i=(i&42)!==0?1:si(i),(i&(a.suspendedLanes|r))!==0?0:i}function si(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function ur(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Du(){var a=le.p;return a!==0?a:(a=window.event,a===void 0?32:oE(a.type))}function ua(a,r){var i=le.p;try{return le.p=a,r()}finally{le.p=i}}var da=Math.random().toString(36).slice(2),It="__reactFiber$"+da,Qt="__reactProps$"+da,Ia="__reactContainer$"+da,no="__reactEvents$"+da,Df="__reactListeners$"+da,Iu="__reactHandles$"+da,Ou="__reactResources$"+da,Oa="__reactMarker$"+da;function ao(a){delete a[It],delete a[Qt],delete a[no],delete a[Df],delete a[Iu]}function Pa(a){var r=a[It];if(r)return r;for(var i=a.parentNode;i;){if(r=i[Ia]||i[It]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(a=G0(a);a!==null;){if(i=a[It])return i;a=G0(a)}return r}a=i,i=a.parentNode}return null}function $n(a){if(a=a[It]||a[Ia]){var r=a.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return a}return null}function On(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a.stateNode;throw Error(s(33))}function Va(a){var r=a[Ou];return r||(r=a[Ou]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ot(a){a[Oa]=!0}var Al=new Set,Rl={};function Ma(a,r){La(a,r),La(a+"Capture",r)}function La(a,r){for(Rl[a]=r,a=0;a<r.length;a++)Al.add(r[a])}var Cl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jl={},Dl={};function Pu(a){return jt.call(Dl,a)?!0:jt.call(jl,a)?!1:Cl.test(a)?Dl[a]=!0:(jl[a]=!0,!1)}function ro(a,r,i){if(Pu(r))if(i===null)a.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":a.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){a.removeAttribute(r);return}}a.setAttribute(r,""+i)}}function Pn(a,r,i){if(i===null)a.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(r);return}a.setAttribute(r,""+i)}}function Pt(a,r,i,u){if(u===null)a.removeAttribute(i);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(i);return}a.setAttributeNS(r,i,""+u)}}function Yt(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Kr(a){var r=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Il(a,r,i){var u=Object.getOwnPropertyDescriptor(a.constructor.prototype,r);if(!a.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(a,r,{configurable:!0,get:function(){return f.call(this)},set:function(E){i=""+E,m.call(this,E)}}),Object.defineProperty(a,r,{enumerable:u.enumerable}),{getValue:function(){return i},setValue:function(E){i=""+E},stopTracking:function(){a._valueTracker=null,delete a[r]}}}}function We(a){if(!a._valueTracker){var r=Kr(a)?"checked":"value";a._valueTracker=Il(a,r,""+a[r])}}function ii(a){if(!a)return!1;var r=a._valueTracker;if(!r)return!0;var i=r.getValue(),u="";return a&&(u=Kr(a)?a.checked?"true":"false":a.value),a=u,a!==i?(r.setValue(a),!0):!1}function ka(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var oi=/[\n"\\]/g;function _n(a){return a.replace(oi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function so(a,r,i,u,f,m,E,N){a.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?a.type=E:a.removeAttribute("type"),r!=null?E==="number"?(r===0&&a.value===""||a.value!=r)&&(a.value=""+Yt(r)):a.value!==""+Yt(r)&&(a.value=""+Yt(r)):E!=="submit"&&E!=="reset"||a.removeAttribute("value"),r!=null?Ol(a,E,Yt(r)):i!=null?Ol(a,E,Yt(i)):u!=null&&a.removeAttribute("value"),f==null&&m!=null&&(a.defaultChecked=!!m),f!=null&&(a.checked=f&&typeof f!="function"&&typeof f!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.name=""+Yt(N):a.removeAttribute("name")}function Vu(a,r,i,u,f,m,E,N){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(a.type=m),r!=null||i!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){We(a);return}i=i!=null?""+Yt(i):"",r=r!=null?""+Yt(r):i,N||r===a.value||(a.value=r),a.defaultValue=r}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,a.checked=N?a.checked:!!u,a.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(a.name=E),We(a)}function Ol(a,r,i){r==="number"&&ka(a.ownerDocument)===a||a.defaultValue===""+i||(a.defaultValue=""+i)}function Xr(a,r,i,u){if(a=a.options,r){r={};for(var f=0;f<i.length;f++)r["$"+i[f]]=!0;for(i=0;i<a.length;i++)f=r.hasOwnProperty("$"+a[i].value),a[i].selected!==f&&(a[i].selected=f),f&&u&&(a[i].defaultSelected=!0)}else{for(i=""+Yt(i),r=null,f=0;f<a.length;f++){if(a[f].value===i){a[f].selected=!0,u&&(a[f].defaultSelected=!0);return}r!==null||a[f].disabled||(r=a[f])}r!==null&&(r.selected=!0)}}function Mu(a,r,i){if(r!=null&&(r=""+Yt(r),r!==a.value&&(a.value=r),i==null)){a.defaultValue!==r&&(a.defaultValue=r);return}a.defaultValue=i!=null?""+Yt(i):""}function Jr(a,r,i,u){if(r==null){if(u!=null){if(i!=null)throw Error(s(92));if(it(u)){if(1<u.length)throw Error(s(93));u=u[0]}i=u}i==null&&(i=""),r=i}i=Yt(r),a.defaultValue=i,u=a.textContent,u===i&&u!==""&&u!==null&&(a.value=u),We(a)}function En(a,r){if(r){var i=a.firstChild;if(i&&i===a.lastChild&&i.nodeType===3){i.nodeValue=r;return}}a.textContent=r}var Lu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pl(a,r,i){var u=r.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?u?a.setProperty(r,""):r==="float"?a.cssFloat="":a[r]="":u?a.setProperty(r,i):typeof i!="number"||i===0||Lu.has(r)?r==="float"?a.cssFloat=i:a[r]=(""+i).trim():a[r]=i+"px"}function Vl(a,r,i){if(r!=null&&typeof r!="object")throw Error(s(62));if(a=a.style,i!=null){for(var u in i)!i.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?a.setProperty(u,""):u==="float"?a.cssFloat="":a[u]="");for(var f in r)u=r[f],r.hasOwnProperty(f)&&i[f]!==u&&Pl(a,f,u)}else for(var m in r)r.hasOwnProperty(m)&&Pl(a,m,r[m])}function io(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ku=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oo(a){return Wr.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function ha(){}var Ml=null;function Qn(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Zr=null,Ua=null;function li(a){var r=$n(a);if(r&&(a=r.stateNode)){var i=a[Qt]||null;e:switch(a=r.stateNode,r.type){case"input":if(so(a,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),r=i.name,i.type==="radio"&&r!=null){for(i=a;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+_n(""+r)+'"][type="radio"]'),r=0;r<i.length;r++){var u=i[r];if(u!==a&&u.form===a.form){var f=u[Qt]||null;if(!f)throw Error(s(90));so(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<i.length;r++)u=i[r],u.form===a.form&&ii(u)}break e;case"textarea":Mu(a,i.value,i.defaultValue);break e;case"select":r=i.value,r!=null&&Xr(a,!!i.multiple,r,!1)}}}var lo=!1;function es(a,r,i){if(lo)return a(r,i);lo=!0;try{var u=a(r);return u}finally{if(lo=!1,(Zr!==null||Ua!==null)&&(Dd(),Zr&&(r=Zr,a=Ua,Ua=Zr=null,li(r),a)))for(r=0;r<a.length;r++)li(a[r])}}function fa(a,r){var i=a.stateNode;if(i===null)return null;var u=i[Qt]||null;if(u===null)return null;i=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(a=a.type,u=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!u;break e;default:a=!1}if(a)return null;if(i&&typeof i!="function")throw Error(s(231,r,typeof i));return i}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ci=!1;if(Yn)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){ci=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{ci=!1}var za=null,Ll=null,ui=null;function kl(){if(ui)return ui;var a,r=Ll,i=r.length,u,f="value"in za?za.value:za.textContent,m=f.length;for(a=0;a<i&&r[a]===f[a];a++);var E=i-a;for(u=1;u<=E&&r[i-u]===f[m-u];u++);return ui=f.slice(a,1<u?1-u:void 0)}function di(a){var r=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&r===13&&(a=13)):a=r,a===10&&(a=13),32<=a||a===13?a:0}function dr(){return!0}function ma(){return!1}function Wt(a){function r(i,u,f,m,E){this._reactName=i,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=E,this.currentTarget=null;for(var N in a)a.hasOwnProperty(N)&&(i=a[N],this[N]=i?i(m):m[N]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?dr:ma,this.isPropagationStopped=ma,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=dr)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=dr)},persist:function(){},isPersistent:dr}),r}var hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ba=Wt(hr),ts=T({},hr,{view:0,detail:0}),Ul=Wt(ts),ns,co,Fa,uo=T({},ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:as,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Fa&&(Fa&&a.type==="mousemove"?(ns=a.screenX-Fa.screenX,co=a.screenY-Fa.screenY):co=ns=0,Fa=a),ns)},movementY:function(a){return"movementY"in a?a.movementY:co}}),zl=Wt(uo),hi=T({},uo,{dataTransfer:0}),Uu=Wt(hi),zu=T({},ts,{relatedTarget:0}),fi=Wt(zu),Bl=T({},hr,{animationName:0,elapsedTime:0,pseudoElement:0}),Bu=Wt(Bl),ho=T({},hr,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Fu=Wt(ho),qu=T({},hr,{data:0}),qa=Wt(qu),Hu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$u={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qu(a){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(a):(a=$u[a])?!!r[a]:!1}function as(){return Qu}var mn=T({},ts,{key:function(a){if(a.key){var r=Hu[a.key]||a.key;if(r!=="Unidentified")return r}return a.type==="keypress"?(a=di(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Gu[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:as,charCode:function(a){return a.type==="keypress"?di(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?di(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Yu=Wt(mn),Ku=T({},uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fr=Wt(Ku),h=T({},ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:as}),y=Wt(h),b=T({},hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=Wt(b),H=T({},uo,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),K=Wt(H),de=T({},hr,{newState:0,oldState:0}),Ce=Wt(de),wt=[9,13,27,32],Ye=Yn&&"CompositionEvent"in window,mt=null;Yn&&"documentMode"in document&&(mt=document.documentMode);var Kn=Yn&&"TextEvent"in window&&!mt,Ha=Yn&&(!Ye||mt&&8<mt&&11>=mt),pa=" ",ga=!1;function mi(a,r){switch(a){case"keyup":return wt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fo(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var mo=!1;function Yw(a,r){switch(a){case"compositionend":return fo(r);case"keypress":return r.which!==32?null:(ga=!0,pa);case"textInput":return a=r.data,a===pa&&ga?null:a;default:return null}}function Kw(a,r){if(mo)return a==="compositionend"||!Ye&&mi(a,r)?(a=kl(),ui=Ll=za=null,mo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ha&&r.locale!=="ko"?null:r.data;default:return null}}var Xw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yv(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r==="input"?!!Xw[a.type]:r==="textarea"}function Kv(a,r,i,u){Zr?Ua?Ua.push(u):Ua=[u]:Zr=u,r=kd(r,"onChange"),0<r.length&&(i=new Ba("onChange","change",null,i,u),a.push({event:i,listeners:r}))}var Fl=null,ql=null;function Jw(a){D0(a,0)}function Xu(a){var r=On(a);if(ii(r))return a}function Xv(a,r){if(a==="change")return r}var Jv=!1;if(Yn){var If;if(Yn){var Of="oninput"in document;if(!Of){var Wv=document.createElement("div");Wv.setAttribute("oninput","return;"),Of=typeof Wv.oninput=="function"}If=Of}else If=!1;Jv=If&&(!document.documentMode||9<document.documentMode)}function Zv(){Fl&&(Fl.detachEvent("onpropertychange",ey),ql=Fl=null)}function ey(a){if(a.propertyName==="value"&&Xu(ql)){var r=[];Kv(r,ql,a,Qn(a)),es(Jw,r)}}function Ww(a,r,i){a==="focusin"?(Zv(),Fl=r,ql=i,Fl.attachEvent("onpropertychange",ey)):a==="focusout"&&Zv()}function Zw(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Xu(ql)}function eS(a,r){if(a==="click")return Xu(r)}function tS(a,r){if(a==="input"||a==="change")return Xu(r)}function nS(a,r){return a===r&&(a!==0||1/a===1/r)||a!==a&&r!==r}var Vn=typeof Object.is=="function"?Object.is:nS;function Hl(a,r){if(Vn(a,r))return!0;if(typeof a!="object"||a===null||typeof r!="object"||r===null)return!1;var i=Object.keys(a),u=Object.keys(r);if(i.length!==u.length)return!1;for(u=0;u<i.length;u++){var f=i[u];if(!jt.call(r,f)||!Vn(a[f],r[f]))return!1}return!0}function ty(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ny(a,r){var i=ty(a);a=0;for(var u;i;){if(i.nodeType===3){if(u=a+i.textContent.length,a<=r&&u>=r)return{node:i,offset:r-a};a=u}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ty(i)}}function ay(a,r){return a&&r?a===r?!0:a&&a.nodeType===3?!1:r&&r.nodeType===3?ay(a,r.parentNode):"contains"in a?a.contains(r):a.compareDocumentPosition?!!(a.compareDocumentPosition(r)&16):!1:!1}function ry(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var r=ka(a.document);r instanceof a.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)a=r.contentWindow;else break;r=ka(a.document)}return r}function Pf(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r&&(r==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||r==="textarea"||a.contentEditable==="true")}var aS=Yn&&"documentMode"in document&&11>=document.documentMode,po=null,Vf=null,Gl=null,Mf=!1;function sy(a,r,i){var u=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Mf||po==null||po!==ka(u)||(u=po,"selectionStart"in u&&Pf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Gl&&Hl(Gl,u)||(Gl=u,u=kd(Vf,"onSelect"),0<u.length&&(r=new Ba("onSelect","select",null,r,i),a.push({event:r,listeners:u}),r.target=po)))}function pi(a,r){var i={};return i[a.toLowerCase()]=r.toLowerCase(),i["Webkit"+a]="webkit"+r,i["Moz"+a]="moz"+r,i}var go={animationend:pi("Animation","AnimationEnd"),animationiteration:pi("Animation","AnimationIteration"),animationstart:pi("Animation","AnimationStart"),transitionrun:pi("Transition","TransitionRun"),transitionstart:pi("Transition","TransitionStart"),transitioncancel:pi("Transition","TransitionCancel"),transitionend:pi("Transition","TransitionEnd")},Lf={},iy={};Yn&&(iy=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function gi(a){if(Lf[a])return Lf[a];if(!go[a])return a;var r=go[a],i;for(i in r)if(r.hasOwnProperty(i)&&i in iy)return Lf[a]=r[i];return a}var oy=gi("animationend"),ly=gi("animationiteration"),cy=gi("animationstart"),rS=gi("transitionrun"),sS=gi("transitionstart"),iS=gi("transitioncancel"),uy=gi("transitionend"),dy=new Map,kf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kf.push("scrollEnd");function va(a,r){dy.set(a,r),Ma(r,[a])}var Ju=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Xn=[],vo=0,Uf=0;function Wu(){for(var a=vo,r=Uf=vo=0;r<a;){var i=Xn[r];Xn[r++]=null;var u=Xn[r];Xn[r++]=null;var f=Xn[r];Xn[r++]=null;var m=Xn[r];if(Xn[r++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}m!==0&&hy(i,f,m)}}function Zu(a,r,i,u){Xn[vo++]=a,Xn[vo++]=r,Xn[vo++]=i,Xn[vo++]=u,Uf|=u,a.lanes|=u,a=a.alternate,a!==null&&(a.lanes|=u)}function zf(a,r,i,u){return Zu(a,r,i,u),ed(a)}function vi(a,r){return Zu(a,null,null,r),ed(a)}function hy(a,r,i){a.lanes|=i;var u=a.alternate;u!==null&&(u.lanes|=i);for(var f=!1,m=a.return;m!==null;)m.childLanes|=i,u=m.alternate,u!==null&&(u.childLanes|=i),m.tag===22&&(a=m.stateNode,a===null||a._visibility&1||(f=!0)),a=m,m=m.return;return a.tag===3?(m=a.stateNode,f&&r!==null&&(f=31-xt(i),a=m.hiddenUpdates,u=a[f],u===null?a[f]=[r]:u.push(r),r.lane=i|536870912),m):null}function ed(a){if(50<fc)throw fc=0,Km=null,Error(s(185));for(var r=a.return;r!==null;)a=r,r=a.return;return a.tag===3?a.stateNode:null}var yo={};function oS(a,r,i,u){this.tag=a,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(a,r,i,u){return new oS(a,r,i,u)}function Bf(a){return a=a.prototype,!(!a||!a.isReactComponent)}function mr(a,r){var i=a.alternate;return i===null?(i=Mn(a.tag,r,a.key,a.mode),i.elementType=a.elementType,i.type=a.type,i.stateNode=a.stateNode,i.alternate=a,a.alternate=i):(i.pendingProps=r,i.type=a.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=a.flags&65011712,i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=a.sibling,i.index=a.index,i.ref=a.ref,i.refCleanup=a.refCleanup,i}function fy(a,r){a.flags&=65011714;var i=a.alternate;return i===null?(a.childLanes=0,a.lanes=r,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a}function td(a,r,i,u,f,m){var E=0;if(u=a,typeof a=="function")Bf(a)&&(E=1);else if(typeof a=="string")E=hN(a,i,he.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case S:return a=Mn(31,i,r,f),a.elementType=S,a.lanes=m,a;case U:return yi(i.children,f,m,r);case L:E=8,f|=24;break;case q:return a=Mn(12,i,r,f|2),a.elementType=q,a.lanes=m,a;case ce:return a=Mn(13,i,r,f),a.elementType=ce,a.lanes=m,a;case ue:return a=Mn(19,i,r,f),a.elementType=ue,a.lanes=m,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case F:E=10;break e;case X:E=9;break e;case oe:E=11;break e;case A:E=14;break e;case D:E=16,u=null;break e}E=29,i=Error(s(130,a===null?"null":typeof a,"")),u=null}return r=Mn(E,i,r,f),r.elementType=a,r.type=u,r.lanes=m,r}function yi(a,r,i,u){return a=Mn(7,a,u,r),a.lanes=i,a}function Ff(a,r,i){return a=Mn(6,a,null,r),a.lanes=i,a}function my(a){var r=Mn(18,null,null,0);return r.stateNode=a,r}function qf(a,r,i){return r=Mn(4,a.children!==null?a.children:[],a.key,r),r.lanes=i,r.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},r}var py=new WeakMap;function Jn(a,r){if(typeof a=="object"&&a!==null){var i=py.get(a);return i!==void 0?i:(r={value:a,source:r,stack:Tl(r)},py.set(a,r),r)}return{value:a,source:r,stack:Tl(r)}}var _o=[],Eo=0,nd=null,$l=0,Wn=[],Zn=0,rs=null,Ga=1,$a="";function pr(a,r){_o[Eo++]=$l,_o[Eo++]=nd,nd=a,$l=r}function gy(a,r,i){Wn[Zn++]=Ga,Wn[Zn++]=$a,Wn[Zn++]=rs,rs=a;var u=Ga;a=$a;var f=32-xt(u)-1;u&=~(1<<f),i+=1;var m=32-xt(r)+f;if(30<m){var E=f-f%5;m=(u&(1<<E)-1).toString(32),u>>=E,f-=E,Ga=1<<32-xt(r)+f|i<<f|u,$a=m+a}else Ga=1<<m|i<<f|u,$a=a}function Hf(a){a.return!==null&&(pr(a,1),gy(a,1,0))}function Gf(a){for(;a===nd;)nd=_o[--Eo],_o[Eo]=null,$l=_o[--Eo],_o[Eo]=null;for(;a===rs;)rs=Wn[--Zn],Wn[Zn]=null,$a=Wn[--Zn],Wn[Zn]=null,Ga=Wn[--Zn],Wn[Zn]=null}function vy(a,r){Wn[Zn++]=Ga,Wn[Zn++]=$a,Wn[Zn++]=rs,Ga=r.id,$a=r.overflow,rs=a}var Zt=null,ut=null,qe=!1,ss=null,ea=!1,$f=Error(s(519));function is(a){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ql(Jn(r,a)),$f}function yy(a){var r=a.stateNode,i=a.type,u=a.memoizedProps;switch(r[It]=a,r[Qt]=u,i){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(i=0;i<pc.length;i++)Le(pc[i],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),Vu(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),Jr(r,u.value,u.defaultValue,u.children)}i=u.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||r.textContent===""+i||u.suppressHydrationWarning===!0||V0(r.textContent,i)?(u.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),u.onScroll!=null&&Le("scroll",r),u.onScrollEnd!=null&&Le("scrollend",r),u.onClick!=null&&(r.onclick=ha),r=!0):r=!1,r||is(a,!0)}function _y(a){for(Zt=a.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:ea=!1;return;case 27:case 3:ea=!0;return;default:Zt=Zt.return}}function bo(a){if(a!==Zt)return!1;if(!qe)return _y(a),qe=!0,!1;var r=a.tag,i;if((i=r!==3&&r!==27)&&((i=r===5)&&(i=a.type,i=!(i!=="form"&&i!=="button")||up(a.type,a.memoizedProps)),i=!i),i&&ut&&is(a),_y(a),r===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));ut=H0(a)}else if(r===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));ut=H0(a)}else r===27?(r=ut,Es(a.type)?(a=pp,pp=null,ut=a):ut=r):ut=Zt?na(a.stateNode.nextSibling):null;return!0}function _i(){ut=Zt=null,qe=!1}function Qf(){var a=ss;return a!==null&&(wn===null?wn=a:wn.push.apply(wn,a),ss=null),a}function Ql(a){ss===null?ss=[a]:ss.push(a)}var Yf=P(null),Ei=null,gr=null;function os(a,r,i){G(Yf,r._currentValue),r._currentValue=i}function vr(a){a._currentValue=Yf.current,te(Yf)}function Kf(a,r,i){for(;a!==null;){var u=a.alternate;if((a.childLanes&r)!==r?(a.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),a===i)break;a=a.return}}function Xf(a,r,i,u){var f=a.child;for(f!==null&&(f.return=a);f!==null;){var m=f.dependencies;if(m!==null){var E=f.child;m=m.firstContext;e:for(;m!==null;){var N=m;m=f;for(var V=0;V<r.length;V++)if(N.context===r[V]){m.lanes|=i,N=m.alternate,N!==null&&(N.lanes|=i),Kf(m.return,i,a),u||(E=null);break e}m=N.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(s(341));E.lanes|=i,m=E.alternate,m!==null&&(m.lanes|=i),Kf(E,i,a),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===a){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function To(a,r,i,u){a=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var N=f.type;Vn(f.pendingProps.value,E.value)||(a!==null?a.push(N):a=[N])}}else if(f===He.current){if(E=f.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(a!==null?a.push(Ec):a=[Ec])}f=f.return}a!==null&&Xf(r,a,i,u),r.flags|=262144}function ad(a){for(a=a.firstContext;a!==null;){if(!Vn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function bi(a){Ei=a,gr=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function en(a){return Ey(Ei,a)}function rd(a,r){return Ei===null&&bi(a),Ey(a,r)}function Ey(a,r){var i=r._currentValue;if(r={context:r,memoizedValue:i,next:null},gr===null){if(a===null)throw Error(s(308));gr=r,a.dependencies={lanes:0,firstContext:r},a.flags|=524288}else gr=gr.next=r;return i}var lS=typeof AbortController<"u"?AbortController:function(){var a=[],r=this.signal={aborted:!1,addEventListener:function(i,u){a.push(u)}};this.abort=function(){r.aborted=!0,a.forEach(function(i){return i()})}},cS=n.unstable_scheduleCallback,uS=n.unstable_NormalPriority,Vt={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jf(){return{controller:new lS,data:new Map,refCount:0}}function Yl(a){a.refCount--,a.refCount===0&&cS(uS,function(){a.controller.abort()})}var Kl=null,Wf=0,xo=0,wo=null;function dS(a,r){if(Kl===null){var i=Kl=[];Wf=0,xo=tp(),wo={status:"pending",value:void 0,then:function(u){i.push(u)}}}return Wf++,r.then(by,by),r}function by(){if(--Wf===0&&Kl!==null){wo!==null&&(wo.status="fulfilled");var a=Kl;Kl=null,xo=0,wo=null;for(var r=0;r<a.length;r++)(0,a[r])()}}function hS(a,r){var i=[],u={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return a.then(function(){u.status="fulfilled",u.value=r;for(var f=0;f<i.length;f++)(0,i[f])(r)},function(f){for(u.status="rejected",u.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),u}var Ty=Z.S;Z.S=function(a,r){s0=fn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&dS(a,r),Ty!==null&&Ty(a,r)};var Ti=P(null);function Zf(){var a=Ti.current;return a!==null?a:ot.pooledCache}function sd(a,r){r===null?G(Ti,Ti.current):G(Ti,r.pool)}function xy(){var a=Zf();return a===null?null:{parent:Vt._currentValue,pool:a}}var So=Error(s(460)),em=Error(s(474)),id=Error(s(542)),od={then:function(){}};function wy(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Sy(a,r,i){switch(i=a[i],i===void 0?a.push(r):i!==r&&(r.then(ha,ha),r=i),r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,Ay(a),a;default:if(typeof r.status=="string")r.then(ha,ha);else{if(a=ot,a!==null&&100<a.shellSuspendCounter)throw Error(s(482));a=r,a.status="pending",a.then(function(u){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=u}},function(u){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,Ay(a),a}throw wi=r,So}}function xi(a){try{var r=a._init;return r(a._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(wi=i,So):i}}var wi=null;function Ny(){if(wi===null)throw Error(s(459));var a=wi;return wi=null,a}function Ay(a){if(a===So||a===id)throw Error(s(483))}var No=null,Xl=0;function ld(a){var r=Xl;return Xl+=1,No===null&&(No=[]),Sy(No,a,r)}function Jl(a,r){r=r.props.ref,a.ref=r!==void 0?r:null}function cd(a,r){throw r.$$typeof===x?Error(s(525)):(a=Object.prototype.toString.call(r),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":a)))}function Ry(a){function r(B,k){if(a){var $=B.deletions;$===null?(B.deletions=[k],B.flags|=16):$.push(k)}}function i(B,k){if(!a)return null;for(;k!==null;)r(B,k),k=k.sibling;return null}function u(B){for(var k=new Map;B!==null;)B.key!==null?k.set(B.key,B):k.set(B.index,B),B=B.sibling;return k}function f(B,k){return B=mr(B,k),B.index=0,B.sibling=null,B}function m(B,k,$){return B.index=$,a?($=B.alternate,$!==null?($=$.index,$<k?(B.flags|=67108866,k):$):(B.flags|=67108866,k)):(B.flags|=1048576,k)}function E(B){return a&&B.alternate===null&&(B.flags|=67108866),B}function N(B,k,$,re){return k===null||k.tag!==6?(k=Ff($,B.mode,re),k.return=B,k):(k=f(k,$),k.return=B,k)}function V(B,k,$,re){var _e=$.type;return _e===U?ee(B,k,$.props.children,re,$.key):k!==null&&(k.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===D&&xi(_e)===k.type)?(k=f(k,$.props),Jl(k,$),k.return=B,k):(k=td($.type,$.key,$.props,null,B.mode,re),Jl(k,$),k.return=B,k)}function Q(B,k,$,re){return k===null||k.tag!==4||k.stateNode.containerInfo!==$.containerInfo||k.stateNode.implementation!==$.implementation?(k=qf($,B.mode,re),k.return=B,k):(k=f(k,$.children||[]),k.return=B,k)}function ee(B,k,$,re,_e){return k===null||k.tag!==7?(k=yi($,B.mode,re,_e),k.return=B,k):(k=f(k,$),k.return=B,k)}function se(B,k,$){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Ff(""+k,B.mode,$),k.return=B,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case w:return $=td(k.type,k.key,k.props,null,B.mode,$),Jl($,k),$.return=B,$;case I:return k=qf(k,B.mode,$),k.return=B,k;case D:return k=xi(k),se(B,k,$)}if(it(k)||z(k))return k=yi(k,B.mode,$,null),k.return=B,k;if(typeof k.then=="function")return se(B,ld(k),$);if(k.$$typeof===F)return se(B,rd(B,k),$);cd(B,k)}return null}function Y(B,k,$,re){var _e=k!==null?k.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return _e!==null?null:N(B,k,""+$,re);if(typeof $=="object"&&$!==null){switch($.$$typeof){case w:return $.key===_e?V(B,k,$,re):null;case I:return $.key===_e?Q(B,k,$,re):null;case D:return $=xi($),Y(B,k,$,re)}if(it($)||z($))return _e!==null?null:ee(B,k,$,re,null);if(typeof $.then=="function")return Y(B,k,ld($),re);if($.$$typeof===F)return Y(B,k,rd(B,$),re);cd(B,$)}return null}function W(B,k,$,re,_e){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return B=B.get($)||null,N(k,B,""+re,_e);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case w:return B=B.get(re.key===null?$:re.key)||null,V(k,B,re,_e);case I:return B=B.get(re.key===null?$:re.key)||null,Q(k,B,re,_e);case D:return re=xi(re),W(B,k,$,re,_e)}if(it(re)||z(re))return B=B.get($)||null,ee(k,B,re,_e,null);if(typeof re.then=="function")return W(B,k,$,ld(re),_e);if(re.$$typeof===F)return W(B,k,$,rd(k,re),_e);cd(k,re)}return null}function ve(B,k,$,re){for(var _e=null,$e=null,ye=k,Oe=k=0,Ue=null;ye!==null&&Oe<$.length;Oe++){ye.index>Oe?(Ue=ye,ye=null):Ue=ye.sibling;var Qe=Y(B,ye,$[Oe],re);if(Qe===null){ye===null&&(ye=Ue);break}a&&ye&&Qe.alternate===null&&r(B,ye),k=m(Qe,k,Oe),$e===null?_e=Qe:$e.sibling=Qe,$e=Qe,ye=Ue}if(Oe===$.length)return i(B,ye),qe&&pr(B,Oe),_e;if(ye===null){for(;Oe<$.length;Oe++)ye=se(B,$[Oe],re),ye!==null&&(k=m(ye,k,Oe),$e===null?_e=ye:$e.sibling=ye,$e=ye);return qe&&pr(B,Oe),_e}for(ye=u(ye);Oe<$.length;Oe++)Ue=W(ye,B,Oe,$[Oe],re),Ue!==null&&(a&&Ue.alternate!==null&&ye.delete(Ue.key===null?Oe:Ue.key),k=m(Ue,k,Oe),$e===null?_e=Ue:$e.sibling=Ue,$e=Ue);return a&&ye.forEach(function(Ss){return r(B,Ss)}),qe&&pr(B,Oe),_e}function be(B,k,$,re){if($==null)throw Error(s(151));for(var _e=null,$e=null,ye=k,Oe=k=0,Ue=null,Qe=$.next();ye!==null&&!Qe.done;Oe++,Qe=$.next()){ye.index>Oe?(Ue=ye,ye=null):Ue=ye.sibling;var Ss=Y(B,ye,Qe.value,re);if(Ss===null){ye===null&&(ye=Ue);break}a&&ye&&Ss.alternate===null&&r(B,ye),k=m(Ss,k,Oe),$e===null?_e=Ss:$e.sibling=Ss,$e=Ss,ye=Ue}if(Qe.done)return i(B,ye),qe&&pr(B,Oe),_e;if(ye===null){for(;!Qe.done;Oe++,Qe=$.next())Qe=se(B,Qe.value,re),Qe!==null&&(k=m(Qe,k,Oe),$e===null?_e=Qe:$e.sibling=Qe,$e=Qe);return qe&&pr(B,Oe),_e}for(ye=u(ye);!Qe.done;Oe++,Qe=$.next())Qe=W(ye,B,Oe,Qe.value,re),Qe!==null&&(a&&Qe.alternate!==null&&ye.delete(Qe.key===null?Oe:Qe.key),k=m(Qe,k,Oe),$e===null?_e=Qe:$e.sibling=Qe,$e=Qe);return a&&ye.forEach(function(xN){return r(B,xN)}),qe&&pr(B,Oe),_e}function st(B,k,$,re){if(typeof $=="object"&&$!==null&&$.type===U&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case w:e:{for(var _e=$.key;k!==null;){if(k.key===_e){if(_e=$.type,_e===U){if(k.tag===7){i(B,k.sibling),re=f(k,$.props.children),re.return=B,B=re;break e}}else if(k.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===D&&xi(_e)===k.type){i(B,k.sibling),re=f(k,$.props),Jl(re,$),re.return=B,B=re;break e}i(B,k);break}else r(B,k);k=k.sibling}$.type===U?(re=yi($.props.children,B.mode,re,$.key),re.return=B,B=re):(re=td($.type,$.key,$.props,null,B.mode,re),Jl(re,$),re.return=B,B=re)}return E(B);case I:e:{for(_e=$.key;k!==null;){if(k.key===_e)if(k.tag===4&&k.stateNode.containerInfo===$.containerInfo&&k.stateNode.implementation===$.implementation){i(B,k.sibling),re=f(k,$.children||[]),re.return=B,B=re;break e}else{i(B,k);break}else r(B,k);k=k.sibling}re=qf($,B.mode,re),re.return=B,B=re}return E(B);case D:return $=xi($),st(B,k,$,re)}if(it($))return ve(B,k,$,re);if(z($)){if(_e=z($),typeof _e!="function")throw Error(s(150));return $=_e.call($),be(B,k,$,re)}if(typeof $.then=="function")return st(B,k,ld($),re);if($.$$typeof===F)return st(B,k,rd(B,$),re);cd(B,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,k!==null&&k.tag===6?(i(B,k.sibling),re=f(k,$),re.return=B,B=re):(i(B,k),re=Ff($,B.mode,re),re.return=B,B=re),E(B)):i(B,k)}return function(B,k,$,re){try{Xl=0;var _e=st(B,k,$,re);return No=null,_e}catch(ye){if(ye===So||ye===id)throw ye;var $e=Mn(29,ye,null,B.mode);return $e.lanes=re,$e.return=B,$e}finally{}}}var Si=Ry(!0),Cy=Ry(!1),ls=!1;function tm(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nm(a,r){a=a.updateQueue,r.updateQueue===a&&(r.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function cs(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function us(a,r,i){var u=a.updateQueue;if(u===null)return null;if(u=u.shared,(Ke&2)!==0){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,r=ed(a),hy(a,null,i),r}return Zu(a,u,r,i),ed(a)}function Wl(a,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194048)!==0)){var u=r.lanes;u&=a.pendingLanes,i|=u,r.lanes=i,Sl(a,i)}}function am(a,r){var i=a.updateQueue,u=a.alternate;if(u!==null&&(u=u.updateQueue,i===u)){var f=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var E={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};m===null?f=m=E:m=m.next=E,i=i.next}while(i!==null);m===null?f=m=r:m=m.next=r}else f=m=r;i={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},a.updateQueue=i;return}a=i.lastBaseUpdate,a===null?i.firstBaseUpdate=r:a.next=r,i.lastBaseUpdate=r}var rm=!1;function Zl(){if(rm){var a=wo;if(a!==null)throw a}}function ec(a,r,i,u){rm=!1;var f=a.updateQueue;ls=!1;var m=f.firstBaseUpdate,E=f.lastBaseUpdate,N=f.shared.pending;if(N!==null){f.shared.pending=null;var V=N,Q=V.next;V.next=null,E===null?m=Q:E.next=Q,E=V;var ee=a.alternate;ee!==null&&(ee=ee.updateQueue,N=ee.lastBaseUpdate,N!==E&&(N===null?ee.firstBaseUpdate=Q:N.next=Q,ee.lastBaseUpdate=V))}if(m!==null){var se=f.baseState;E=0,ee=Q=V=null,N=m;do{var Y=N.lane&-536870913,W=Y!==N.lane;if(W?(ke&Y)===Y:(u&Y)===Y){Y!==0&&Y===xo&&(rm=!0),ee!==null&&(ee=ee.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var ve=a,be=N;Y=r;var st=i;switch(be.tag){case 1:if(ve=be.payload,typeof ve=="function"){se=ve.call(st,se,Y);break e}se=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=be.payload,Y=typeof ve=="function"?ve.call(st,se,Y):ve,Y==null)break e;se=T({},se,Y);break e;case 2:ls=!0}}Y=N.callback,Y!==null&&(a.flags|=64,W&&(a.flags|=8192),W=f.callbacks,W===null?f.callbacks=[Y]:W.push(Y))}else W={lane:Y,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ee===null?(Q=ee=W,V=se):ee=ee.next=W,E|=Y;if(N=N.next,N===null){if(N=f.shared.pending,N===null)break;W=N,N=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);ee===null&&(V=se),f.baseState=V,f.firstBaseUpdate=Q,f.lastBaseUpdate=ee,m===null&&(f.shared.lanes=0),ps|=E,a.lanes=E,a.memoizedState=se}}function jy(a,r){if(typeof a!="function")throw Error(s(191,a));a.call(r)}function Dy(a,r){var i=a.callbacks;if(i!==null)for(a.callbacks=null,a=0;a<i.length;a++)jy(i[a],r)}var Ao=P(null),ud=P(0);function Iy(a,r){a=Nr,G(ud,a),G(Ao,r),Nr=a|r.baseLanes}function sm(){G(ud,Nr),G(Ao,Ao.current)}function im(){Nr=ud.current,te(Ao),te(ud)}var Ln=P(null),ta=null;function ds(a){var r=a.alternate;G(St,St.current&1),G(Ln,a),ta===null&&(r===null||Ao.current!==null||r.memoizedState!==null)&&(ta=a)}function om(a){G(St,St.current),G(Ln,a),ta===null&&(ta=a)}function Oy(a){a.tag===22?(G(St,St.current),G(Ln,a),ta===null&&(ta=a)):hs()}function hs(){G(St,St.current),G(Ln,Ln.current)}function kn(a){te(Ln),ta===a&&(ta=null),te(St)}var St=P(0);function dd(a){for(var r=a;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||fp(i)||mp(i)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var yr=0,je=null,at=null,Mt=null,hd=!1,Ro=!1,Ni=!1,fd=0,tc=0,Co=null,fS=0;function yt(){throw Error(s(321))}function lm(a,r){if(r===null)return!1;for(var i=0;i<r.length&&i<a.length;i++)if(!Vn(a[i],r[i]))return!1;return!0}function cm(a,r,i,u,f,m){return yr=m,je=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Z.H=a===null||a.memoizedState===null?g_:wm,Ni=!1,m=i(u,f),Ni=!1,Ro&&(m=Vy(r,i,u,f)),Py(a),m}function Py(a){Z.H=rc;var r=at!==null&&at.next!==null;if(yr=0,Mt=at=je=null,hd=!1,tc=0,Co=null,r)throw Error(s(300));a===null||Lt||(a=a.dependencies,a!==null&&ad(a)&&(Lt=!0))}function Vy(a,r,i,u){je=a;var f=0;do{if(Ro&&(Co=null),tc=0,Ro=!1,25<=f)throw Error(s(301));if(f+=1,Mt=at=null,a.updateQueue!=null){var m=a.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Z.H=v_,m=r(i,u)}while(Ro);return m}function mS(){var a=Z.H,r=a.useState()[0];return r=typeof r.then=="function"?nc(r):r,a=a.useState()[0],(at!==null?at.memoizedState:null)!==a&&(je.flags|=1024),r}function um(){var a=fd!==0;return fd=0,a}function dm(a,r,i){r.updateQueue=a.updateQueue,r.flags&=-2053,a.lanes&=~i}function hm(a){if(hd){for(a=a.memoizedState;a!==null;){var r=a.queue;r!==null&&(r.pending=null),a=a.next}hd=!1}yr=0,Mt=at=je=null,Ro=!1,tc=fd=0,Co=null}function pn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?je.memoizedState=Mt=a:Mt=Mt.next=a,Mt}function Nt(){if(at===null){var a=je.alternate;a=a!==null?a.memoizedState:null}else a=at.next;var r=Mt===null?je.memoizedState:Mt.next;if(r!==null)Mt=r,at=a;else{if(a===null)throw je.alternate===null?Error(s(467)):Error(s(310));at=a,a={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Mt===null?je.memoizedState=Mt=a:Mt=Mt.next=a}return Mt}function md(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nc(a){var r=tc;return tc+=1,Co===null&&(Co=[]),a=Sy(Co,a,r),r=je,(Mt===null?r.memoizedState:Mt.next)===null&&(r=r.alternate,Z.H=r===null||r.memoizedState===null?g_:wm),a}function pd(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return nc(a);if(a.$$typeof===F)return en(a)}throw Error(s(438,String(a)))}function fm(a){var r=null,i=je.updateQueue;if(i!==null&&(r=i.memoCache),r==null){var u=je.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),i===null&&(i=md(),je.updateQueue=i),i.memoCache=r,i=r.data[r.index],i===void 0)for(i=r.data[r.index]=Array(a),u=0;u<a;u++)i[u]=j;return r.index++,i}function _r(a,r){return typeof r=="function"?r(a):r}function gd(a){var r=Nt();return mm(r,at,a)}function mm(a,r,i){var u=a.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=i;var f=a.baseQueue,m=u.pending;if(m!==null){if(f!==null){var E=f.next;f.next=m.next,m.next=E}r.baseQueue=f=m,u.pending=null}if(m=a.baseState,f===null)a.memoizedState=m;else{r=f.next;var N=E=null,V=null,Q=r,ee=!1;do{var se=Q.lane&-536870913;if(se!==Q.lane?(ke&se)===se:(yr&se)===se){var Y=Q.revertLane;if(Y===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),se===xo&&(ee=!0);else if((yr&Y)===Y){Q=Q.next,Y===xo&&(ee=!0);continue}else se={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},V===null?(N=V=se,E=m):V=V.next=se,je.lanes|=Y,ps|=Y;se=Q.action,Ni&&i(m,se),m=Q.hasEagerState?Q.eagerState:i(m,se)}else Y={lane:se,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},V===null?(N=V=Y,E=m):V=V.next=Y,je.lanes|=se,ps|=se;Q=Q.next}while(Q!==null&&Q!==r);if(V===null?E=m:V.next=N,!Vn(m,a.memoizedState)&&(Lt=!0,ee&&(i=wo,i!==null)))throw i;a.memoizedState=m,a.baseState=E,a.baseQueue=V,u.lastRenderedState=m}return f===null&&(u.lanes=0),[a.memoizedState,u.dispatch]}function pm(a){var r=Nt(),i=r.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=a;var u=i.dispatch,f=i.pending,m=r.memoizedState;if(f!==null){i.pending=null;var E=f=f.next;do m=a(m,E.action),E=E.next;while(E!==f);Vn(m,r.memoizedState)||(Lt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),i.lastRenderedState=m}return[m,u]}function My(a,r,i){var u=je,f=Nt(),m=qe;if(m){if(i===void 0)throw Error(s(407));i=i()}else i=r();var E=!Vn((at||f).memoizedState,i);if(E&&(f.memoizedState=i,Lt=!0),f=f.queue,ym(Uy.bind(null,u,f,a),[a]),f.getSnapshot!==r||E||Mt!==null&&Mt.memoizedState.tag&1){if(u.flags|=2048,jo(9,{destroy:void 0},ky.bind(null,u,f,i,r),null),ot===null)throw Error(s(349));m||(yr&127)!==0||Ly(u,r,i)}return i}function Ly(a,r,i){a.flags|=16384,a={getSnapshot:r,value:i},r=je.updateQueue,r===null?(r=md(),je.updateQueue=r,r.stores=[a]):(i=r.stores,i===null?r.stores=[a]:i.push(a))}function ky(a,r,i,u){r.value=i,r.getSnapshot=u,zy(r)&&By(a)}function Uy(a,r,i){return i(function(){zy(r)&&By(a)})}function zy(a){var r=a.getSnapshot;a=a.value;try{var i=r();return!Vn(a,i)}catch{return!0}}function By(a){var r=vi(a,2);r!==null&&Sn(r,a,2)}function gm(a){var r=pn();if(typeof a=="function"){var i=a;if(a=i(),Ni){Gn(!0);try{i()}finally{Gn(!1)}}}return r.memoizedState=r.baseState=a,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:a},r}function Fy(a,r,i,u){return a.baseState=i,mm(a,at,typeof u=="function"?u:_r)}function pS(a,r,i,u,f){if(_d(a))throw Error(s(485));if(a=r.action,a!==null){var m={payload:f,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){m.listeners.push(E)}};Z.T!==null?i(!0):m.isTransition=!1,u(m),i=r.pending,i===null?(m.next=r.pending=m,qy(r,m)):(m.next=i.next,r.pending=i.next=m)}}function qy(a,r){var i=r.action,u=r.payload,f=a.state;if(r.isTransition){var m=Z.T,E={};Z.T=E;try{var N=i(f,u),V=Z.S;V!==null&&V(E,N),Hy(a,r,N)}catch(Q){vm(a,r,Q)}finally{m!==null&&E.types!==null&&(m.types=E.types),Z.T=m}}else try{m=i(f,u),Hy(a,r,m)}catch(Q){vm(a,r,Q)}}function Hy(a,r,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(u){Gy(a,r,u)},function(u){return vm(a,r,u)}):Gy(a,r,i)}function Gy(a,r,i){r.status="fulfilled",r.value=i,$y(r),a.state=i,r=a.pending,r!==null&&(i=r.next,i===r?a.pending=null:(i=i.next,r.next=i,qy(a,i)))}function vm(a,r,i){var u=a.pending;if(a.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=i,$y(r),r=r.next;while(r!==u)}a.action=null}function $y(a){a=a.listeners;for(var r=0;r<a.length;r++)(0,a[r])()}function Qy(a,r){return r}function Yy(a,r){if(qe){var i=ot.formState;if(i!==null){e:{var u=je;if(qe){if(ut){t:{for(var f=ut,m=ea;f.nodeType!==8;){if(!m){f=null;break t}if(f=na(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){ut=na(f.nextSibling),u=f.data==="F!";break e}}is(u)}u=!1}u&&(r=i[0])}}return i=pn(),i.memoizedState=i.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qy,lastRenderedState:r},i.queue=u,i=f_.bind(null,je,u),u.dispatch=i,u=gm(!1),m=xm.bind(null,je,!1,u.queue),u=pn(),f={state:r,dispatch:null,action:a,pending:null},u.queue=f,i=pS.bind(null,je,f,m,i),f.dispatch=i,u.memoizedState=a,[r,i,!1]}function Ky(a){var r=Nt();return Xy(r,at,a)}function Xy(a,r,i){if(r=mm(a,r,Qy)[0],a=gd(_r)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=nc(r)}catch(E){throw E===So?id:E}else u=r;r=Nt();var f=r.queue,m=f.dispatch;return i!==r.memoizedState&&(je.flags|=2048,jo(9,{destroy:void 0},gS.bind(null,f,i),null)),[u,m,a]}function gS(a,r){a.action=r}function Jy(a){var r=Nt(),i=at;if(i!==null)return Xy(r,i,a);Nt(),r=r.memoizedState,i=Nt();var u=i.queue.dispatch;return i.memoizedState=a,[r,u,!1]}function jo(a,r,i,u){return a={tag:a,create:i,deps:u,inst:r,next:null},r=je.updateQueue,r===null&&(r=md(),je.updateQueue=r),i=r.lastEffect,i===null?r.lastEffect=a.next=a:(u=i.next,i.next=a,a.next=u,r.lastEffect=a),a}function Wy(){return Nt().memoizedState}function vd(a,r,i,u){var f=pn();je.flags|=a,f.memoizedState=jo(1|r,{destroy:void 0},i,u===void 0?null:u)}function yd(a,r,i,u){var f=Nt();u=u===void 0?null:u;var m=f.memoizedState.inst;at!==null&&u!==null&&lm(u,at.memoizedState.deps)?f.memoizedState=jo(r,m,i,u):(je.flags|=a,f.memoizedState=jo(1|r,m,i,u))}function Zy(a,r){vd(8390656,8,a,r)}function ym(a,r){yd(2048,8,a,r)}function vS(a){je.flags|=4;var r=je.updateQueue;if(r===null)r=md(),je.updateQueue=r,r.events=[a];else{var i=r.events;i===null?r.events=[a]:i.push(a)}}function e_(a){var r=Nt().memoizedState;return vS({ref:r,nextImpl:a}),function(){if((Ke&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function t_(a,r){return yd(4,2,a,r)}function n_(a,r){return yd(4,4,a,r)}function a_(a,r){if(typeof r=="function"){a=a();var i=r(a);return function(){typeof i=="function"?i():r(null)}}if(r!=null)return a=a(),r.current=a,function(){r.current=null}}function r_(a,r,i){i=i!=null?i.concat([a]):null,yd(4,4,a_.bind(null,r,a),i)}function _m(){}function s_(a,r){var i=Nt();r=r===void 0?null:r;var u=i.memoizedState;return r!==null&&lm(r,u[1])?u[0]:(i.memoizedState=[a,r],a)}function i_(a,r){var i=Nt();r=r===void 0?null:r;var u=i.memoizedState;if(r!==null&&lm(r,u[1]))return u[0];if(u=a(),Ni){Gn(!0);try{a()}finally{Gn(!1)}}return i.memoizedState=[u,r],u}function Em(a,r,i){return i===void 0||(yr&1073741824)!==0&&(ke&261930)===0?a.memoizedState=r:(a.memoizedState=i,a=o0(),je.lanes|=a,ps|=a,i)}function o_(a,r,i,u){return Vn(i,r)?i:Ao.current!==null?(a=Em(a,i,u),Vn(a,r)||(Lt=!0),a):(yr&42)===0||(yr&1073741824)!==0&&(ke&261930)===0?(Lt=!0,a.memoizedState=i):(a=o0(),je.lanes|=a,ps|=a,r)}function l_(a,r,i,u,f){var m=le.p;le.p=m!==0&&8>m?m:8;var E=Z.T,N={};Z.T=N,xm(a,!1,r,i);try{var V=f(),Q=Z.S;if(Q!==null&&Q(N,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ee=hS(V,u);ac(a,r,ee,Bn(a))}else ac(a,r,u,Bn(a))}catch(se){ac(a,r,{then:function(){},status:"rejected",reason:se},Bn())}finally{le.p=m,E!==null&&N.types!==null&&(E.types=N.types),Z.T=E}}function yS(){}function bm(a,r,i,u){if(a.tag!==5)throw Error(s(476));var f=c_(a).queue;l_(a,f,r,ge,i===null?yS:function(){return u_(a),i(u)})}function c_(a){var r=a.memoizedState;if(r!==null)return r;r={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:ge},next:null};var i={};return r.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:i},next:null},a.memoizedState=r,a=a.alternate,a!==null&&(a.memoizedState=r),r}function u_(a){var r=c_(a);r.next===null&&(r=a.alternate.memoizedState),ac(a,r.next.queue,{},Bn())}function Tm(){return en(Ec)}function d_(){return Nt().memoizedState}function h_(){return Nt().memoizedState}function _S(a){for(var r=a.return;r!==null;){switch(r.tag){case 24:case 3:var i=Bn();a=cs(i);var u=us(r,a,i);u!==null&&(Sn(u,r,i),Wl(u,r,i)),r={cache:Jf()},a.payload=r;return}r=r.return}}function ES(a,r,i){var u=Bn();i={lane:u,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},_d(a)?m_(r,i):(i=zf(a,r,i,u),i!==null&&(Sn(i,a,u),p_(i,r,u)))}function f_(a,r,i){var u=Bn();ac(a,r,i,u)}function ac(a,r,i,u){var f={lane:u,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(_d(a))m_(r,f);else{var m=a.alternate;if(a.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var E=r.lastRenderedState,N=m(E,i);if(f.hasEagerState=!0,f.eagerState=N,Vn(N,E))return Zu(a,r,f,0),ot===null&&Wu(),!1}catch{}finally{}if(i=zf(a,r,f,u),i!==null)return Sn(i,a,u),p_(i,r,u),!0}return!1}function xm(a,r,i,u){if(u={lane:2,revertLane:tp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},_d(a)){if(r)throw Error(s(479))}else r=zf(a,i,u,2),r!==null&&Sn(r,a,2)}function _d(a){var r=a.alternate;return a===je||r!==null&&r===je}function m_(a,r){Ro=hd=!0;var i=a.pending;i===null?r.next=r:(r.next=i.next,i.next=r),a.pending=r}function p_(a,r,i){if((i&4194048)!==0){var u=r.lanes;u&=a.pendingLanes,i|=u,r.lanes=i,Sl(a,i)}}var rc={readContext:en,use:pd,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};rc.useEffectEvent=yt;var g_={readContext:en,use:pd,useCallback:function(a,r){return pn().memoizedState=[a,r===void 0?null:r],a},useContext:en,useEffect:Zy,useImperativeHandle:function(a,r,i){i=i!=null?i.concat([a]):null,vd(4194308,4,a_.bind(null,r,a),i)},useLayoutEffect:function(a,r){return vd(4194308,4,a,r)},useInsertionEffect:function(a,r){vd(4,2,a,r)},useMemo:function(a,r){var i=pn();r=r===void 0?null:r;var u=a();if(Ni){Gn(!0);try{a()}finally{Gn(!1)}}return i.memoizedState=[u,r],u},useReducer:function(a,r,i){var u=pn();if(i!==void 0){var f=i(r);if(Ni){Gn(!0);try{i(r)}finally{Gn(!1)}}}else f=r;return u.memoizedState=u.baseState=f,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:f},u.queue=a,a=a.dispatch=ES.bind(null,je,a),[u.memoizedState,a]},useRef:function(a){var r=pn();return a={current:a},r.memoizedState=a},useState:function(a){a=gm(a);var r=a.queue,i=f_.bind(null,je,r);return r.dispatch=i,[a.memoizedState,i]},useDebugValue:_m,useDeferredValue:function(a,r){var i=pn();return Em(i,a,r)},useTransition:function(){var a=gm(!1);return a=l_.bind(null,je,a.queue,!0,!1),pn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,r,i){var u=je,f=pn();if(qe){if(i===void 0)throw Error(s(407));i=i()}else{if(i=r(),ot===null)throw Error(s(349));(ke&127)!==0||Ly(u,r,i)}f.memoizedState=i;var m={value:i,getSnapshot:r};return f.queue=m,Zy(Uy.bind(null,u,m,a),[a]),u.flags|=2048,jo(9,{destroy:void 0},ky.bind(null,u,m,i,r),null),i},useId:function(){var a=pn(),r=ot.identifierPrefix;if(qe){var i=$a,u=Ga;i=(u&~(1<<32-xt(u)-1)).toString(32)+i,r="_"+r+"R_"+i,i=fd++,0<i&&(r+="H"+i.toString(32)),r+="_"}else i=fS++,r="_"+r+"r_"+i.toString(32)+"_";return a.memoizedState=r},useHostTransitionStatus:Tm,useFormState:Yy,useActionState:Yy,useOptimistic:function(a){var r=pn();r.memoizedState=r.baseState=a;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=i,r=xm.bind(null,je,!0,i),i.dispatch=r,[a,r]},useMemoCache:fm,useCacheRefresh:function(){return pn().memoizedState=_S.bind(null,je)},useEffectEvent:function(a){var r=pn(),i={impl:a};return r.memoizedState=i,function(){if((Ke&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},wm={readContext:en,use:pd,useCallback:s_,useContext:en,useEffect:ym,useImperativeHandle:r_,useInsertionEffect:t_,useLayoutEffect:n_,useMemo:i_,useReducer:gd,useRef:Wy,useState:function(){return gd(_r)},useDebugValue:_m,useDeferredValue:function(a,r){var i=Nt();return o_(i,at.memoizedState,a,r)},useTransition:function(){var a=gd(_r)[0],r=Nt().memoizedState;return[typeof a=="boolean"?a:nc(a),r]},useSyncExternalStore:My,useId:d_,useHostTransitionStatus:Tm,useFormState:Ky,useActionState:Ky,useOptimistic:function(a,r){var i=Nt();return Fy(i,at,a,r)},useMemoCache:fm,useCacheRefresh:h_};wm.useEffectEvent=e_;var v_={readContext:en,use:pd,useCallback:s_,useContext:en,useEffect:ym,useImperativeHandle:r_,useInsertionEffect:t_,useLayoutEffect:n_,useMemo:i_,useReducer:pm,useRef:Wy,useState:function(){return pm(_r)},useDebugValue:_m,useDeferredValue:function(a,r){var i=Nt();return at===null?Em(i,a,r):o_(i,at.memoizedState,a,r)},useTransition:function(){var a=pm(_r)[0],r=Nt().memoizedState;return[typeof a=="boolean"?a:nc(a),r]},useSyncExternalStore:My,useId:d_,useHostTransitionStatus:Tm,useFormState:Jy,useActionState:Jy,useOptimistic:function(a,r){var i=Nt();return at!==null?Fy(i,at,a,r):(i.baseState=a,[a,i.queue.dispatch])},useMemoCache:fm,useCacheRefresh:h_};v_.useEffectEvent=e_;function Sm(a,r,i,u){r=a.memoizedState,i=i(u,r),i=i==null?r:T({},r,i),a.memoizedState=i,a.lanes===0&&(a.updateQueue.baseState=i)}var Nm={enqueueSetState:function(a,r,i){a=a._reactInternals;var u=Bn(),f=cs(u);f.payload=r,i!=null&&(f.callback=i),r=us(a,f,u),r!==null&&(Sn(r,a,u),Wl(r,a,u))},enqueueReplaceState:function(a,r,i){a=a._reactInternals;var u=Bn(),f=cs(u);f.tag=1,f.payload=r,i!=null&&(f.callback=i),r=us(a,f,u),r!==null&&(Sn(r,a,u),Wl(r,a,u))},enqueueForceUpdate:function(a,r){a=a._reactInternals;var i=Bn(),u=cs(i);u.tag=2,r!=null&&(u.callback=r),r=us(a,u,i),r!==null&&(Sn(r,a,i),Wl(r,a,i))}};function y_(a,r,i,u,f,m,E){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(u,m,E):r.prototype&&r.prototype.isPureReactComponent?!Hl(i,u)||!Hl(f,m):!0}function __(a,r,i,u){a=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,u),r.state!==a&&Nm.enqueueReplaceState(r,r.state,null)}function Ai(a,r){var i=r;if("ref"in r){i={};for(var u in r)u!=="ref"&&(i[u]=r[u])}if(a=a.defaultProps){i===r&&(i=T({},i));for(var f in a)i[f]===void 0&&(i[f]=a[f])}return i}function E_(a){Ju(a)}function b_(a){console.error(a)}function T_(a){Ju(a)}function Ed(a,r){try{var i=a.onUncaughtError;i(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function x_(a,r,i){try{var u=a.onCaughtError;u(i.value,{componentStack:i.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Am(a,r,i){return i=cs(i),i.tag=3,i.payload={element:null},i.callback=function(){Ed(a,r)},i}function w_(a){return a=cs(a),a.tag=3,a}function S_(a,r,i,u){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;a.payload=function(){return f(m)},a.callback=function(){x_(r,i,u)}}var E=i.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(a.callback=function(){x_(r,i,u),typeof f!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var N=u.stack;this.componentDidCatch(u.value,{componentStack:N!==null?N:""})})}function bS(a,r,i,u,f){if(i.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=i.alternate,r!==null&&To(r,i,f,!0),i=Ln.current,i!==null){switch(i.tag){case 31:case 13:return ta===null?Id():i.alternate===null&&_t===0&&(_t=3),i.flags&=-257,i.flags|=65536,i.lanes=f,u===od?i.flags|=16384:(r=i.updateQueue,r===null?i.updateQueue=new Set([u]):r.add(u),Wm(a,u,f)),!1;case 22:return i.flags|=65536,u===od?i.flags|=16384:(r=i.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},i.updateQueue=r):(i=r.retryQueue,i===null?r.retryQueue=new Set([u]):i.add(u)),Wm(a,u,f)),!1}throw Error(s(435,i.tag))}return Wm(a,u,f),Id(),!1}if(qe)return r=Ln.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,u!==$f&&(a=Error(s(422),{cause:u}),Ql(Jn(a,i)))):(u!==$f&&(r=Error(s(423),{cause:u}),Ql(Jn(r,i))),a=a.current.alternate,a.flags|=65536,f&=-f,a.lanes|=f,u=Jn(u,i),f=Am(a.stateNode,u,f),am(a,f),_t!==4&&(_t=2)),!1;var m=Error(s(520),{cause:u});if(m=Jn(m,i),hc===null?hc=[m]:hc.push(m),_t!==4&&(_t=2),r===null)return!0;u=Jn(u,i),i=r;do{switch(i.tag){case 3:return i.flags|=65536,a=f&-f,i.lanes|=a,a=Am(i.stateNode,u,a),am(i,a),!1;case 1:if(r=i.type,m=i.stateNode,(i.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(gs===null||!gs.has(m))))return i.flags|=65536,f&=-f,i.lanes|=f,f=w_(f),S_(f,a,i,u),am(i,f),!1}i=i.return}while(i!==null);return!1}var Rm=Error(s(461)),Lt=!1;function tn(a,r,i,u){r.child=a===null?Cy(r,null,i,u):Si(r,a.child,i,u)}function N_(a,r,i,u,f){i=i.render;var m=r.ref;if("ref"in u){var E={};for(var N in u)N!=="ref"&&(E[N]=u[N])}else E=u;return bi(r),u=cm(a,r,i,E,m,f),N=um(),a!==null&&!Lt?(dm(a,r,f),Er(a,r,f)):(qe&&N&&Hf(r),r.flags|=1,tn(a,r,u,f),r.child)}function A_(a,r,i,u,f){if(a===null){var m=i.type;return typeof m=="function"&&!Bf(m)&&m.defaultProps===void 0&&i.compare===null?(r.tag=15,r.type=m,R_(a,r,m,u,f)):(a=td(i.type,null,u,r,r.mode,f),a.ref=r.ref,a.return=r,r.child=a)}if(m=a.child,!Mm(a,f)){var E=m.memoizedProps;if(i=i.compare,i=i!==null?i:Hl,i(E,u)&&a.ref===r.ref)return Er(a,r,f)}return r.flags|=1,a=mr(m,u),a.ref=r.ref,a.return=r,r.child=a}function R_(a,r,i,u,f){if(a!==null){var m=a.memoizedProps;if(Hl(m,u)&&a.ref===r.ref)if(Lt=!1,r.pendingProps=u=m,Mm(a,f))(a.flags&131072)!==0&&(Lt=!0);else return r.lanes=a.lanes,Er(a,r,f)}return Cm(a,r,i,u,f)}function C_(a,r,i,u){var f=u.children,m=a!==null?a.memoizedState:null;if(a===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|i:i,a!==null){for(u=r.child=a.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,r.child=null;return j_(a,r,m,i,u)}if((i&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},a!==null&&sd(r,m!==null?m.cachePool:null),m!==null?Iy(r,m):sm(),Oy(r);else return u=r.lanes=536870912,j_(a,r,m!==null?m.baseLanes|i:i,i,u)}else m!==null?(sd(r,m.cachePool),Iy(r,m),hs(),r.memoizedState=null):(a!==null&&sd(r,null),sm(),hs());return tn(a,r,f,i),r.child}function sc(a,r){return a!==null&&a.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function j_(a,r,i,u,f){var m=Zf();return m=m===null?null:{parent:Vt._currentValue,pool:m},r.memoizedState={baseLanes:i,cachePool:m},a!==null&&sd(r,null),sm(),Oy(r),a!==null&&To(a,r,u,!0),r.childLanes=f,null}function bd(a,r){return r=xd({mode:r.mode,children:r.children},a.mode),r.ref=a.ref,a.child=r,r.return=a,r}function D_(a,r,i){return Si(r,a.child,null,i),a=bd(r,r.pendingProps),a.flags|=2,kn(r),r.memoizedState=null,a}function TS(a,r,i){var u=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,a===null){if(qe){if(u.mode==="hidden")return a=bd(r,u),r.lanes=536870912,sc(null,a);if(om(r),(a=ut)?(a=q0(a,ea),a=a!==null&&a.data==="&"?a:null,a!==null&&(r.memoizedState={dehydrated:a,treeContext:rs!==null?{id:Ga,overflow:$a}:null,retryLane:536870912,hydrationErrors:null},i=my(a),i.return=r,r.child=i,Zt=r,ut=null)):a=null,a===null)throw is(r);return r.lanes=536870912,null}return bd(r,u)}var m=a.memoizedState;if(m!==null){var E=m.dehydrated;if(om(r),f)if(r.flags&256)r.flags&=-257,r=D_(a,r,i);else if(r.memoizedState!==null)r.child=a.child,r.flags|=128,r=null;else throw Error(s(558));else if(Lt||To(a,r,i,!1),f=(i&a.childLanes)!==0,Lt||f){if(u=ot,u!==null&&(E=Nl(u,i),E!==0&&E!==m.retryLane))throw m.retryLane=E,vi(a,E),Sn(u,a,E),Rm;Id(),r=D_(a,r,i)}else a=m.treeContext,ut=na(E.nextSibling),Zt=r,qe=!0,ss=null,ea=!1,a!==null&&vy(r,a),r=bd(r,u),r.flags|=4096;return r}return a=mr(a.child,{mode:u.mode,children:u.children}),a.ref=r.ref,r.child=a,a.return=r,a}function Td(a,r){var i=r.ref;if(i===null)a!==null&&a.ref!==null&&(r.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(a===null||a.ref!==i)&&(r.flags|=4194816)}}function Cm(a,r,i,u,f){return bi(r),i=cm(a,r,i,u,void 0,f),u=um(),a!==null&&!Lt?(dm(a,r,f),Er(a,r,f)):(qe&&u&&Hf(r),r.flags|=1,tn(a,r,i,f),r.child)}function I_(a,r,i,u,f,m){return bi(r),r.updateQueue=null,i=Vy(r,u,i,f),Py(a),u=um(),a!==null&&!Lt?(dm(a,r,m),Er(a,r,m)):(qe&&u&&Hf(r),r.flags|=1,tn(a,r,i,m),r.child)}function O_(a,r,i,u,f){if(bi(r),r.stateNode===null){var m=yo,E=i.contextType;typeof E=="object"&&E!==null&&(m=en(E)),m=new i(u,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Nm,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=u,m.state=r.memoizedState,m.refs={},tm(r),E=i.contextType,m.context=typeof E=="object"&&E!==null?en(E):yo,m.state=r.memoizedState,E=i.getDerivedStateFromProps,typeof E=="function"&&(Sm(r,i,E,u),m.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(E=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),E!==m.state&&Nm.enqueueReplaceState(m,m.state,null),ec(r,u,m,f),Zl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(a===null){m=r.stateNode;var N=r.memoizedProps,V=Ai(i,N);m.props=V;var Q=m.context,ee=i.contextType;E=yo,typeof ee=="object"&&ee!==null&&(E=en(ee));var se=i.getDerivedStateFromProps;ee=typeof se=="function"||typeof m.getSnapshotBeforeUpdate=="function",N=r.pendingProps!==N,ee||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(N||Q!==E)&&__(r,m,u,E),ls=!1;var Y=r.memoizedState;m.state=Y,ec(r,u,m,f),Zl(),Q=r.memoizedState,N||Y!==Q||ls?(typeof se=="function"&&(Sm(r,i,se,u),Q=r.memoizedState),(V=ls||y_(r,i,V,u,Y,Q,E))?(ee||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=Q),m.props=u,m.state=Q,m.context=E,u=V):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{m=r.stateNode,nm(a,r),E=r.memoizedProps,ee=Ai(i,E),m.props=ee,se=r.pendingProps,Y=m.context,Q=i.contextType,V=yo,typeof Q=="object"&&Q!==null&&(V=en(Q)),N=i.getDerivedStateFromProps,(Q=typeof N=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E!==se||Y!==V)&&__(r,m,u,V),ls=!1,Y=r.memoizedState,m.state=Y,ec(r,u,m,f),Zl();var W=r.memoizedState;E!==se||Y!==W||ls||a!==null&&a.dependencies!==null&&ad(a.dependencies)?(typeof N=="function"&&(Sm(r,i,N,u),W=r.memoizedState),(ee=ls||y_(r,i,ee,u,Y,W,V)||a!==null&&a.dependencies!==null&&ad(a.dependencies))?(Q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,W,V),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,W,V)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||E===a.memoizedProps&&Y===a.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&Y===a.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=W),m.props=u,m.state=W,m.context=V,u=ee):(typeof m.componentDidUpdate!="function"||E===a.memoizedProps&&Y===a.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&Y===a.memoizedState||(r.flags|=1024),u=!1)}return m=u,Td(a,r),u=(r.flags&128)!==0,m||u?(m=r.stateNode,i=u&&typeof i.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,a!==null&&u?(r.child=Si(r,a.child,null,f),r.child=Si(r,null,i,f)):tn(a,r,i,f),r.memoizedState=m.state,a=r.child):a=Er(a,r,f),a}function P_(a,r,i,u){return _i(),r.flags|=256,tn(a,r,i,u),r.child}var jm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dm(a){return{baseLanes:a,cachePool:xy()}}function Im(a,r,i){return a=a!==null?a.childLanes&~i:0,r&&(a|=zn),a}function V_(a,r,i){var u=r.pendingProps,f=!1,m=(r.flags&128)!==0,E;if((E=m)||(E=a!==null&&a.memoizedState===null?!1:(St.current&2)!==0),E&&(f=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,a===null){if(qe){if(f?ds(r):hs(),(a=ut)?(a=q0(a,ea),a=a!==null&&a.data!=="&"?a:null,a!==null&&(r.memoizedState={dehydrated:a,treeContext:rs!==null?{id:Ga,overflow:$a}:null,retryLane:536870912,hydrationErrors:null},i=my(a),i.return=r,r.child=i,Zt=r,ut=null)):a=null,a===null)throw is(r);return mp(a)?r.lanes=32:r.lanes=536870912,null}var N=u.children;return u=u.fallback,f?(hs(),f=r.mode,N=xd({mode:"hidden",children:N},f),u=yi(u,f,i,null),N.return=r,u.return=r,N.sibling=u,r.child=N,u=r.child,u.memoizedState=Dm(i),u.childLanes=Im(a,E,i),r.memoizedState=jm,sc(null,u)):(ds(r),Om(r,N))}var V=a.memoizedState;if(V!==null&&(N=V.dehydrated,N!==null)){if(m)r.flags&256?(ds(r),r.flags&=-257,r=Pm(a,r,i)):r.memoizedState!==null?(hs(),r.child=a.child,r.flags|=128,r=null):(hs(),N=u.fallback,f=r.mode,u=xd({mode:"visible",children:u.children},f),N=yi(N,f,i,null),N.flags|=2,u.return=r,N.return=r,u.sibling=N,r.child=u,Si(r,a.child,null,i),u=r.child,u.memoizedState=Dm(i),u.childLanes=Im(a,E,i),r.memoizedState=jm,r=sc(null,u));else if(ds(r),mp(N)){if(E=N.nextSibling&&N.nextSibling.dataset,E)var Q=E.dgst;E=Q,u=Error(s(419)),u.stack="",u.digest=E,Ql({value:u,source:null,stack:null}),r=Pm(a,r,i)}else if(Lt||To(a,r,i,!1),E=(i&a.childLanes)!==0,Lt||E){if(E=ot,E!==null&&(u=Nl(E,i),u!==0&&u!==V.retryLane))throw V.retryLane=u,vi(a,u),Sn(E,a,u),Rm;fp(N)||Id(),r=Pm(a,r,i)}else fp(N)?(r.flags|=192,r.child=a.child,r=null):(a=V.treeContext,ut=na(N.nextSibling),Zt=r,qe=!0,ss=null,ea=!1,a!==null&&vy(r,a),r=Om(r,u.children),r.flags|=4096);return r}return f?(hs(),N=u.fallback,f=r.mode,V=a.child,Q=V.sibling,u=mr(V,{mode:"hidden",children:u.children}),u.subtreeFlags=V.subtreeFlags&65011712,Q!==null?N=mr(Q,N):(N=yi(N,f,i,null),N.flags|=2),N.return=r,u.return=r,u.sibling=N,r.child=u,sc(null,u),u=r.child,N=a.child.memoizedState,N===null?N=Dm(i):(f=N.cachePool,f!==null?(V=Vt._currentValue,f=f.parent!==V?{parent:V,pool:V}:f):f=xy(),N={baseLanes:N.baseLanes|i,cachePool:f}),u.memoizedState=N,u.childLanes=Im(a,E,i),r.memoizedState=jm,sc(a.child,u)):(ds(r),i=a.child,a=i.sibling,i=mr(i,{mode:"visible",children:u.children}),i.return=r,i.sibling=null,a!==null&&(E=r.deletions,E===null?(r.deletions=[a],r.flags|=16):E.push(a)),r.child=i,r.memoizedState=null,i)}function Om(a,r){return r=xd({mode:"visible",children:r},a.mode),r.return=a,a.child=r}function xd(a,r){return a=Mn(22,a,null,r),a.lanes=0,a}function Pm(a,r,i){return Si(r,a.child,null,i),a=Om(r,r.pendingProps.children),a.flags|=2,r.memoizedState=null,a}function M_(a,r,i){a.lanes|=r;var u=a.alternate;u!==null&&(u.lanes|=r),Kf(a.return,r,i)}function Vm(a,r,i,u,f,m){var E=a.memoizedState;E===null?a.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:i,tailMode:f,treeForkCount:m}:(E.isBackwards=r,E.rendering=null,E.renderingStartTime=0,E.last=u,E.tail=i,E.tailMode=f,E.treeForkCount=m)}function L_(a,r,i){var u=r.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var E=St.current,N=(E&2)!==0;if(N?(E=E&1|2,r.flags|=128):E&=1,G(St,E),tn(a,r,u,i),u=qe?$l:0,!N&&a!==null&&(a.flags&128)!==0)e:for(a=r.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&M_(a,i,r);else if(a.tag===19)M_(a,i,r);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(f){case"forwards":for(i=r.child,f=null;i!==null;)a=i.alternate,a!==null&&dd(a)===null&&(f=i),i=i.sibling;i=f,i===null?(f=r.child,r.child=null):(f=i.sibling,i.sibling=null),Vm(r,!1,f,i,m,u);break;case"backwards":case"unstable_legacy-backwards":for(i=null,f=r.child,r.child=null;f!==null;){if(a=f.alternate,a!==null&&dd(a)===null){r.child=f;break}a=f.sibling,f.sibling=i,i=f,f=a}Vm(r,!0,i,null,m,u);break;case"together":Vm(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function Er(a,r,i){if(a!==null&&(r.dependencies=a.dependencies),ps|=r.lanes,(i&r.childLanes)===0)if(a!==null){if(To(a,r,i,!1),(i&r.childLanes)===0)return null}else return null;if(a!==null&&r.child!==a.child)throw Error(s(153));if(r.child!==null){for(a=r.child,i=mr(a,a.pendingProps),r.child=i,i.return=r;a.sibling!==null;)a=a.sibling,i=i.sibling=mr(a,a.pendingProps),i.return=r;i.sibling=null}return r.child}function Mm(a,r){return(a.lanes&r)!==0?!0:(a=a.dependencies,!!(a!==null&&ad(a)))}function xS(a,r,i){switch(r.tag){case 3:Ft(r,r.stateNode.containerInfo),os(r,Vt,a.memoizedState.cache),_i();break;case 27:case 5:Zs(r);break;case 4:Ft(r,r.stateNode.containerInfo);break;case 10:os(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,om(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(ds(r),r.flags|=128,null):(i&r.child.childLanes)!==0?V_(a,r,i):(ds(r),a=Er(a,r,i),a!==null?a.sibling:null);ds(r);break;case 19:var f=(a.flags&128)!==0;if(u=(i&r.childLanes)!==0,u||(To(a,r,i,!1),u=(i&r.childLanes)!==0),f){if(u)return L_(a,r,i);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),G(St,St.current),u)break;return null;case 22:return r.lanes=0,C_(a,r,i,r.pendingProps);case 24:os(r,Vt,a.memoizedState.cache)}return Er(a,r,i)}function k_(a,r,i){if(a!==null)if(a.memoizedProps!==r.pendingProps)Lt=!0;else{if(!Mm(a,i)&&(r.flags&128)===0)return Lt=!1,xS(a,r,i);Lt=(a.flags&131072)!==0}else Lt=!1,qe&&(r.flags&1048576)!==0&&gy(r,$l,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(a=xi(r.elementType),r.type=a,typeof a=="function")Bf(a)?(u=Ai(a,u),r.tag=1,r=O_(null,r,a,u,i)):(r.tag=0,r=Cm(null,r,a,u,i));else{if(a!=null){var f=a.$$typeof;if(f===oe){r.tag=11,r=N_(null,r,a,u,i);break e}else if(f===A){r.tag=14,r=A_(null,r,a,u,i);break e}}throw r=De(a)||a,Error(s(306,r,""))}}return r;case 0:return Cm(a,r,r.type,r.pendingProps,i);case 1:return u=r.type,f=Ai(u,r.pendingProps),O_(a,r,u,f,i);case 3:e:{if(Ft(r,r.stateNode.containerInfo),a===null)throw Error(s(387));u=r.pendingProps;var m=r.memoizedState;f=m.element,nm(a,r),ec(r,u,null,i);var E=r.memoizedState;if(u=E.cache,os(r,Vt,u),u!==m.cache&&Xf(r,[Vt],i,!0),Zl(),u=E.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=P_(a,r,u,i);break e}else if(u!==f){f=Jn(Error(s(424)),r),Ql(f),r=P_(a,r,u,i);break e}else{switch(a=r.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(ut=na(a.firstChild),Zt=r,qe=!0,ss=null,ea=!0,i=Cy(r,null,u,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(_i(),u===f){r=Er(a,r,i);break e}tn(a,r,u,i)}r=r.child}return r;case 26:return Td(a,r),a===null?(i=K0(r.type,null,r.pendingProps,null))?r.memoizedState=i:qe||(i=r.type,a=r.pendingProps,u=Ud(Ie.current).createElement(i),u[It]=r,u[Qt]=a,nn(u,i,a),Ot(u),r.stateNode=u):r.memoizedState=K0(r.type,a.memoizedProps,r.pendingProps,a.memoizedState),null;case 27:return Zs(r),a===null&&qe&&(u=r.stateNode=$0(r.type,r.pendingProps,Ie.current),Zt=r,ea=!0,f=ut,Es(r.type)?(pp=f,ut=na(u.firstChild)):ut=f),tn(a,r,r.pendingProps.children,i),Td(a,r),a===null&&(r.flags|=4194304),r.child;case 5:return a===null&&qe&&((f=u=ut)&&(u=ZS(u,r.type,r.pendingProps,ea),u!==null?(r.stateNode=u,Zt=r,ut=na(u.firstChild),ea=!1,f=!0):f=!1),f||is(r)),Zs(r),f=r.type,m=r.pendingProps,E=a!==null?a.memoizedProps:null,u=m.children,up(f,m)?u=null:E!==null&&up(f,E)&&(r.flags|=32),r.memoizedState!==null&&(f=cm(a,r,mS,null,null,i),Ec._currentValue=f),Td(a,r),tn(a,r,u,i),r.child;case 6:return a===null&&qe&&((a=i=ut)&&(i=eN(i,r.pendingProps,ea),i!==null?(r.stateNode=i,Zt=r,ut=null,a=!0):a=!1),a||is(r)),null;case 13:return V_(a,r,i);case 4:return Ft(r,r.stateNode.containerInfo),u=r.pendingProps,a===null?r.child=Si(r,null,u,i):tn(a,r,u,i),r.child;case 11:return N_(a,r,r.type,r.pendingProps,i);case 7:return tn(a,r,r.pendingProps,i),r.child;case 8:return tn(a,r,r.pendingProps.children,i),r.child;case 12:return tn(a,r,r.pendingProps.children,i),r.child;case 10:return u=r.pendingProps,os(r,r.type,u.value),tn(a,r,u.children,i),r.child;case 9:return f=r.type._context,u=r.pendingProps.children,bi(r),f=en(f),u=u(f),r.flags|=1,tn(a,r,u,i),r.child;case 14:return A_(a,r,r.type,r.pendingProps,i);case 15:return R_(a,r,r.type,r.pendingProps,i);case 19:return L_(a,r,i);case 31:return TS(a,r,i);case 22:return C_(a,r,i,r.pendingProps);case 24:return bi(r),u=en(Vt),a===null?(f=Zf(),f===null&&(f=ot,m=Jf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=i),f=m),r.memoizedState={parent:u,cache:f},tm(r),os(r,Vt,f)):((a.lanes&i)!==0&&(nm(a,r),ec(r,null,null,i),Zl()),f=a.memoizedState,m=r.memoizedState,f.parent!==u?(f={parent:u,cache:u},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),os(r,Vt,u)):(u=m.cache,os(r,Vt,u),u!==f.cache&&Xf(r,[Vt],i,!0))),tn(a,r,r.pendingProps.children,i),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function br(a){a.flags|=4}function Lm(a,r,i,u,f){if((r=(a.mode&32)!==0)&&(r=!1),r){if(a.flags|=16777216,(f&335544128)===f)if(a.stateNode.complete)a.flags|=8192;else if(d0())a.flags|=8192;else throw wi=od,em}else a.flags&=-16777217}function U_(a,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!eE(r))if(d0())a.flags|=8192;else throw wi=od,em}function wd(a,r){r!==null&&(a.flags|=4),a.flags&16384&&(r=a.tag!==22?ju():536870912,a.lanes|=r,Po|=r)}function ic(a,r){if(!qe)switch(a.tailMode){case"hidden":r=a.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?a.tail=null:i.sibling=null;break;case"collapsed":i=a.tail;for(var u=null;i!==null;)i.alternate!==null&&(u=i),i=i.sibling;u===null?r||a.tail===null?a.tail=null:a.tail.sibling=null:u.sibling=null}}function dt(a){var r=a.alternate!==null&&a.alternate.child===a.child,i=0,u=0;if(r)for(var f=a.child;f!==null;)i|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=a,f=f.sibling;else for(f=a.child;f!==null;)i|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=a,f=f.sibling;return a.subtreeFlags|=u,a.childLanes=i,r}function wS(a,r,i){var u=r.pendingProps;switch(Gf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(r),null;case 1:return dt(r),null;case 3:return i=r.stateNode,u=null,a!==null&&(u=a.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),vr(Vt),ft(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(a===null||a.child===null)&&(bo(r)?br(r):a===null||a.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Qf())),dt(r),null;case 26:var f=r.type,m=r.memoizedState;return a===null?(br(r),m!==null?(dt(r),U_(r,m)):(dt(r),Lm(r,f,null,u,i))):m?m!==a.memoizedState?(br(r),dt(r),U_(r,m)):(dt(r),r.flags&=-16777217):(a=a.memoizedProps,a!==u&&br(r),dt(r),Lm(r,f,a,u,i)),null;case 27:if(Wi(r),i=Ie.current,f=r.type,a!==null&&r.stateNode!=null)a.memoizedProps!==u&&br(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return dt(r),null}a=he.current,bo(r)?yy(r):(a=$0(f,u,i),r.stateNode=a,br(r))}return dt(r),null;case 5:if(Wi(r),f=r.type,a!==null&&r.stateNode!=null)a.memoizedProps!==u&&br(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return dt(r),null}if(m=he.current,bo(r))yy(r);else{var E=Ud(Ie.current);switch(m){case 1:m=E.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=E.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=E.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=E.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=E.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?E.createElement("select",{is:u.is}):E.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?E.createElement(f,{is:u.is}):E.createElement(f)}}m[It]=r,m[Qt]=u;e:for(E=r.child;E!==null;){if(E.tag===5||E.tag===6)m.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===r)break e;for(;E.sibling===null;){if(E.return===null||E.return===r)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}r.stateNode=m;e:switch(nn(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&br(r)}}return dt(r),Lm(r,r.type,a===null?null:a.memoizedProps,r.pendingProps,i),null;case 6:if(a&&r.stateNode!=null)a.memoizedProps!==u&&br(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(a=Ie.current,bo(r)){if(a=r.stateNode,i=r.memoizedProps,u=null,f=Zt,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}a[It]=r,a=!!(a.nodeValue===i||u!==null&&u.suppressHydrationWarning===!0||V0(a.nodeValue,i)),a||is(r,!0)}else a=Ud(a).createTextNode(u),a[It]=r,r.stateNode=a}return dt(r),null;case 31:if(i=r.memoizedState,a===null||a.memoizedState!==null){if(u=bo(r),i!==null){if(a===null){if(!u)throw Error(s(318));if(a=r.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(557));a[It]=r}else _i(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;dt(r),a=!1}else i=Qf(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=i),a=!0;if(!a)return r.flags&256?(kn(r),r):(kn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return dt(r),null;case 13:if(u=r.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(f=bo(r),u!==null&&u.dehydrated!==null){if(a===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[It]=r}else _i(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;dt(r),f=!1}else f=Qf(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(kn(r),r):(kn(r),null)}return kn(r),(r.flags&128)!==0?(r.lanes=i,r):(i=u!==null,a=a!==null&&a.memoizedState!==null,i&&(u=r.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),i!==a&&i&&(r.child.flags|=8192),wd(r,r.updateQueue),dt(r),null);case 4:return ft(),a===null&&sp(r.stateNode.containerInfo),dt(r),null;case 10:return vr(r.type),dt(r),null;case 19:if(te(St),u=r.memoizedState,u===null)return dt(r),null;if(f=(r.flags&128)!==0,m=u.rendering,m===null)if(f)ic(u,!1);else{if(_t!==0||a!==null&&(a.flags&128)!==0)for(a=r.child;a!==null;){if(m=dd(a),m!==null){for(r.flags|=128,ic(u,!1),a=m.updateQueue,r.updateQueue=a,wd(r,a),r.subtreeFlags=0,a=i,i=r.child;i!==null;)fy(i,a),i=i.sibling;return G(St,St.current&1|2),qe&&pr(r,u.treeForkCount),r.child}a=a.sibling}u.tail!==null&&fn()>Cd&&(r.flags|=128,f=!0,ic(u,!1),r.lanes=4194304)}else{if(!f)if(a=dd(m),a!==null){if(r.flags|=128,f=!0,a=a.updateQueue,r.updateQueue=a,wd(r,a),ic(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!qe)return dt(r),null}else 2*fn()-u.renderingStartTime>Cd&&i!==536870912&&(r.flags|=128,f=!0,ic(u,!1),r.lanes=4194304);u.isBackwards?(m.sibling=r.child,r.child=m):(a=u.last,a!==null?a.sibling=m:r.child=m,u.last=m)}return u.tail!==null?(a=u.tail,u.rendering=a,u.tail=a.sibling,u.renderingStartTime=fn(),a.sibling=null,i=St.current,G(St,f?i&1|2:i&1),qe&&pr(r,u.treeForkCount),a):(dt(r),null);case 22:case 23:return kn(r),im(),u=r.memoizedState!==null,a!==null?a.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(i&536870912)!==0&&(r.flags&128)===0&&(dt(r),r.subtreeFlags&6&&(r.flags|=8192)):dt(r),i=r.updateQueue,i!==null&&wd(r,i.retryQueue),i=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==i&&(r.flags|=2048),a!==null&&te(Ti),null;case 24:return i=null,a!==null&&(i=a.memoizedState.cache),r.memoizedState.cache!==i&&(r.flags|=2048),vr(Vt),dt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function SS(a,r){switch(Gf(r),r.tag){case 1:return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 3:return vr(Vt),ft(),a=r.flags,(a&65536)!==0&&(a&128)===0?(r.flags=a&-65537|128,r):null;case 26:case 27:case 5:return Wi(r),null;case 31:if(r.memoizedState!==null){if(kn(r),r.alternate===null)throw Error(s(340));_i()}return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 13:if(kn(r),a=r.memoizedState,a!==null&&a.dehydrated!==null){if(r.alternate===null)throw Error(s(340));_i()}return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 19:return te(St),null;case 4:return ft(),null;case 10:return vr(r.type),null;case 22:case 23:return kn(r),im(),a!==null&&te(Ti),a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 24:return vr(Vt),null;case 25:return null;default:return null}}function z_(a,r){switch(Gf(r),r.tag){case 3:vr(Vt),ft();break;case 26:case 27:case 5:Wi(r);break;case 4:ft();break;case 31:r.memoizedState!==null&&kn(r);break;case 13:kn(r);break;case 19:te(St);break;case 10:vr(r.type);break;case 22:case 23:kn(r),im(),a!==null&&te(Ti);break;case 24:vr(Vt)}}function oc(a,r){try{var i=r.updateQueue,u=i!==null?i.lastEffect:null;if(u!==null){var f=u.next;i=f;do{if((i.tag&a)===a){u=void 0;var m=i.create,E=i.inst;u=m(),E.destroy=u}i=i.next}while(i!==f)}}catch(N){et(r,r.return,N)}}function fs(a,r,i){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&a)===a){var E=u.inst,N=E.destroy;if(N!==void 0){E.destroy=void 0,f=r;var V=i,Q=N;try{Q()}catch(ee){et(f,V,ee)}}}u=u.next}while(u!==m)}}catch(ee){et(r,r.return,ee)}}function B_(a){var r=a.updateQueue;if(r!==null){var i=a.stateNode;try{Dy(r,i)}catch(u){et(a,a.return,u)}}}function F_(a,r,i){i.props=Ai(a.type,a.memoizedProps),i.state=a.memoizedState;try{i.componentWillUnmount()}catch(u){et(a,r,u)}}function lc(a,r){try{var i=a.ref;if(i!==null){switch(a.tag){case 26:case 27:case 5:var u=a.stateNode;break;case 30:u=a.stateNode;break;default:u=a.stateNode}typeof i=="function"?a.refCleanup=i(u):i.current=u}}catch(f){et(a,r,f)}}function Qa(a,r){var i=a.ref,u=a.refCleanup;if(i!==null)if(typeof u=="function")try{u()}catch(f){et(a,r,f)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){et(a,r,f)}else i.current=null}function q_(a){var r=a.type,i=a.memoizedProps,u=a.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":i.autoFocus&&u.focus();break e;case"img":i.src?u.src=i.src:i.srcSet&&(u.srcset=i.srcSet)}}catch(f){et(a,a.return,f)}}function km(a,r,i){try{var u=a.stateNode;QS(u,a.type,i,r),u[Qt]=r}catch(f){et(a,a.return,f)}}function H_(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Es(a.type)||a.tag===4}function Um(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||H_(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Es(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function zm(a,r,i){var u=a.tag;if(u===5||u===6)a=a.stateNode,r?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(a,r):(r=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.appendChild(a),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=ha));else if(u!==4&&(u===27&&Es(a.type)&&(i=a.stateNode,r=null),a=a.child,a!==null))for(zm(a,r,i),a=a.sibling;a!==null;)zm(a,r,i),a=a.sibling}function Sd(a,r,i){var u=a.tag;if(u===5||u===6)a=a.stateNode,r?i.insertBefore(a,r):i.appendChild(a);else if(u!==4&&(u===27&&Es(a.type)&&(i=a.stateNode),a=a.child,a!==null))for(Sd(a,r,i),a=a.sibling;a!==null;)Sd(a,r,i),a=a.sibling}function G_(a){var r=a.stateNode,i=a.memoizedProps;try{for(var u=a.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);nn(r,u,i),r[It]=a,r[Qt]=i}catch(m){et(a,a.return,m)}}var Tr=!1,kt=!1,Bm=!1,$_=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function NS(a,r){if(a=a.containerInfo,lp=$d,a=ry(a),Pf(a)){if("selectionStart"in a)var i={start:a.selectionStart,end:a.selectionEnd};else e:{i=(i=a.ownerDocument)&&i.defaultView||window;var u=i.getSelection&&i.getSelection();if(u&&u.rangeCount!==0){i=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var E=0,N=-1,V=-1,Q=0,ee=0,se=a,Y=null;t:for(;;){for(var W;se!==i||f!==0&&se.nodeType!==3||(N=E+f),se!==m||u!==0&&se.nodeType!==3||(V=E+u),se.nodeType===3&&(E+=se.nodeValue.length),(W=se.firstChild)!==null;)Y=se,se=W;for(;;){if(se===a)break t;if(Y===i&&++Q===f&&(N=E),Y===m&&++ee===u&&(V=E),(W=se.nextSibling)!==null)break;se=Y,Y=se.parentNode}se=W}i=N===-1||V===-1?null:{start:N,end:V}}else i=null}i=i||{start:0,end:0}}else i=null;for(cp={focusedElem:a,selectionRange:i},$d=!1,Kt=r;Kt!==null;)if(r=Kt,a=r.child,(r.subtreeFlags&1028)!==0&&a!==null)a.return=r,Kt=a;else for(;Kt!==null;){switch(r=Kt,m=r.alternate,a=r.flags,r.tag){case 0:if((a&4)!==0&&(a=r.updateQueue,a=a!==null?a.events:null,a!==null))for(i=0;i<a.length;i++)f=a[i],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&m!==null){a=void 0,i=r,f=m.memoizedProps,m=m.memoizedState,u=i.stateNode;try{var ve=Ai(i.type,f);a=u.getSnapshotBeforeUpdate(ve,m),u.__reactInternalSnapshotBeforeUpdate=a}catch(be){et(i,i.return,be)}}break;case 3:if((a&1024)!==0){if(a=r.stateNode.containerInfo,i=a.nodeType,i===9)hp(a);else if(i===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":hp(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(s(163))}if(a=r.sibling,a!==null){a.return=r.return,Kt=a;break}Kt=r.return}}function Q_(a,r,i){var u=i.flags;switch(i.tag){case 0:case 11:case 15:wr(a,i),u&4&&oc(5,i);break;case 1:if(wr(a,i),u&4)if(a=i.stateNode,r===null)try{a.componentDidMount()}catch(E){et(i,i.return,E)}else{var f=Ai(i.type,r.memoizedProps);r=r.memoizedState;try{a.componentDidUpdate(f,r,a.__reactInternalSnapshotBeforeUpdate)}catch(E){et(i,i.return,E)}}u&64&&B_(i),u&512&&lc(i,i.return);break;case 3:if(wr(a,i),u&64&&(a=i.updateQueue,a!==null)){if(r=null,i.child!==null)switch(i.child.tag){case 27:case 5:r=i.child.stateNode;break;case 1:r=i.child.stateNode}try{Dy(a,r)}catch(E){et(i,i.return,E)}}break;case 27:r===null&&u&4&&G_(i);case 26:case 5:wr(a,i),r===null&&u&4&&q_(i),u&512&&lc(i,i.return);break;case 12:wr(a,i);break;case 31:wr(a,i),u&4&&X_(a,i);break;case 13:wr(a,i),u&4&&J_(a,i),u&64&&(a=i.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(i=VS.bind(null,i),tN(a,i))));break;case 22:if(u=i.memoizedState!==null||Tr,!u){r=r!==null&&r.memoizedState!==null||kt,f=Tr;var m=kt;Tr=u,(kt=r)&&!m?Sr(a,i,(i.subtreeFlags&8772)!==0):wr(a,i),Tr=f,kt=m}break;case 30:break;default:wr(a,i)}}function Y_(a){var r=a.alternate;r!==null&&(a.alternate=null,Y_(r)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(r=a.stateNode,r!==null&&ao(r)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var pt=null,bn=!1;function xr(a,r,i){for(i=i.child;i!==null;)K_(a,r,i),i=i.sibling}function K_(a,r,i){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(la,i)}catch{}switch(i.tag){case 26:kt||Qa(i,r),xr(a,r,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:kt||Qa(i,r);var u=pt,f=bn;Es(i.type)&&(pt=i.stateNode,bn=!1),xr(a,r,i),vc(i.stateNode),pt=u,bn=f;break;case 5:kt||Qa(i,r);case 6:if(u=pt,f=bn,pt=null,xr(a,r,i),pt=u,bn=f,pt!==null)if(bn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(i.stateNode)}catch(m){et(i,r,m)}else try{pt.removeChild(i.stateNode)}catch(m){et(i,r,m)}break;case 18:pt!==null&&(bn?(a=pt,B0(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.stateNode),Fo(a)):B0(pt,i.stateNode));break;case 4:u=pt,f=bn,pt=i.stateNode.containerInfo,bn=!0,xr(a,r,i),pt=u,bn=f;break;case 0:case 11:case 14:case 15:fs(2,i,r),kt||fs(4,i,r),xr(a,r,i);break;case 1:kt||(Qa(i,r),u=i.stateNode,typeof u.componentWillUnmount=="function"&&F_(i,r,u)),xr(a,r,i);break;case 21:xr(a,r,i);break;case 22:kt=(u=kt)||i.memoizedState!==null,xr(a,r,i),kt=u;break;default:xr(a,r,i)}}function X_(a,r){if(r.memoizedState===null&&(a=r.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Fo(a)}catch(i){et(r,r.return,i)}}}function J_(a,r){if(r.memoizedState===null&&(a=r.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Fo(a)}catch(i){et(r,r.return,i)}}function AS(a){switch(a.tag){case 31:case 13:case 19:var r=a.stateNode;return r===null&&(r=a.stateNode=new $_),r;case 22:return a=a.stateNode,r=a._retryCache,r===null&&(r=a._retryCache=new $_),r;default:throw Error(s(435,a.tag))}}function Nd(a,r){var i=AS(a);r.forEach(function(u){if(!i.has(u)){i.add(u);var f=MS.bind(null,a,u);u.then(f,f)}})}function Tn(a,r){var i=r.deletions;if(i!==null)for(var u=0;u<i.length;u++){var f=i[u],m=a,E=r,N=E;e:for(;N!==null;){switch(N.tag){case 27:if(Es(N.type)){pt=N.stateNode,bn=!1;break e}break;case 5:pt=N.stateNode,bn=!1;break e;case 3:case 4:pt=N.stateNode.containerInfo,bn=!0;break e}N=N.return}if(pt===null)throw Error(s(160));K_(m,E,f),pt=null,bn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)W_(r,a),r=r.sibling}var ya=null;function W_(a,r){var i=a.alternate,u=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Tn(r,a),xn(a),u&4&&(fs(3,a,a.return),oc(3,a),fs(5,a,a.return));break;case 1:Tn(r,a),xn(a),u&512&&(kt||i===null||Qa(i,i.return)),u&64&&Tr&&(a=a.updateQueue,a!==null&&(u=a.callbacks,u!==null&&(i=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=i===null?u:i.concat(u))));break;case 26:var f=ya;if(Tn(r,a),xn(a),u&512&&(kt||i===null||Qa(i,i.return)),u&4){var m=i!==null?i.memoizedState:null;if(u=a.memoizedState,i===null)if(u===null)if(a.stateNode===null){e:{u=a.type,i=a.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Oa]||m[It]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),nn(m,u,i),m[It]=a,Ot(m),u=m;break e;case"link":var E=W0("link","href",f).get(u+(i.href||""));if(E){for(var N=0;N<E.length;N++)if(m=E[N],m.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&m.getAttribute("rel")===(i.rel==null?null:i.rel)&&m.getAttribute("title")===(i.title==null?null:i.title)&&m.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){E.splice(N,1);break t}}m=f.createElement(u),nn(m,u,i),f.head.appendChild(m);break;case"meta":if(E=W0("meta","content",f).get(u+(i.content||""))){for(N=0;N<E.length;N++)if(m=E[N],m.getAttribute("content")===(i.content==null?null:""+i.content)&&m.getAttribute("name")===(i.name==null?null:i.name)&&m.getAttribute("property")===(i.property==null?null:i.property)&&m.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&m.getAttribute("charset")===(i.charSet==null?null:i.charSet)){E.splice(N,1);break t}}m=f.createElement(u),nn(m,u,i),f.head.appendChild(m);break;default:throw Error(s(468,u))}m[It]=a,Ot(m),u=m}a.stateNode=u}else Z0(f,a.type,a.stateNode);else a.stateNode=J0(f,u,a.memoizedProps);else m!==u?(m===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):m.count--,u===null?Z0(f,a.type,a.stateNode):J0(f,u,a.memoizedProps)):u===null&&a.stateNode!==null&&km(a,a.memoizedProps,i.memoizedProps)}break;case 27:Tn(r,a),xn(a),u&512&&(kt||i===null||Qa(i,i.return)),i!==null&&u&4&&km(a,a.memoizedProps,i.memoizedProps);break;case 5:if(Tn(r,a),xn(a),u&512&&(kt||i===null||Qa(i,i.return)),a.flags&32){f=a.stateNode;try{En(f,"")}catch(ve){et(a,a.return,ve)}}u&4&&a.stateNode!=null&&(f=a.memoizedProps,km(a,f,i!==null?i.memoizedProps:f)),u&1024&&(Bm=!0);break;case 6:if(Tn(r,a),xn(a),u&4){if(a.stateNode===null)throw Error(s(162));u=a.memoizedProps,i=a.stateNode;try{i.nodeValue=u}catch(ve){et(a,a.return,ve)}}break;case 3:if(Fd=null,f=ya,ya=zd(r.containerInfo),Tn(r,a),ya=f,xn(a),u&4&&i!==null&&i.memoizedState.isDehydrated)try{Fo(r.containerInfo)}catch(ve){et(a,a.return,ve)}Bm&&(Bm=!1,Z_(a));break;case 4:u=ya,ya=zd(a.stateNode.containerInfo),Tn(r,a),xn(a),ya=u;break;case 12:Tn(r,a),xn(a);break;case 31:Tn(r,a),xn(a),u&4&&(u=a.updateQueue,u!==null&&(a.updateQueue=null,Nd(a,u)));break;case 13:Tn(r,a),xn(a),a.child.flags&8192&&a.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Rd=fn()),u&4&&(u=a.updateQueue,u!==null&&(a.updateQueue=null,Nd(a,u)));break;case 22:f=a.memoizedState!==null;var V=i!==null&&i.memoizedState!==null,Q=Tr,ee=kt;if(Tr=Q||f,kt=ee||V,Tn(r,a),kt=ee,Tr=Q,xn(a),u&8192)e:for(r=a.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(i===null||V||Tr||kt||Ri(a)),i=null,r=a;;){if(r.tag===5||r.tag===26){if(i===null){V=i=r;try{if(m=V.stateNode,f)E=m.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{N=V.stateNode;var se=V.memoizedProps.style,Y=se!=null&&se.hasOwnProperty("display")?se.display:null;N.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(ve){et(V,V.return,ve)}}}else if(r.tag===6){if(i===null){V=r;try{V.stateNode.nodeValue=f?"":V.memoizedProps}catch(ve){et(V,V.return,ve)}}}else if(r.tag===18){if(i===null){V=r;try{var W=V.stateNode;f?F0(W,!0):F0(V.stateNode,!1)}catch(ve){et(V,V.return,ve)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===a)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;i===r&&(i=null),r=r.return}i===r&&(i=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=a.updateQueue,u!==null&&(i=u.retryQueue,i!==null&&(u.retryQueue=null,Nd(a,i))));break;case 19:Tn(r,a),xn(a),u&4&&(u=a.updateQueue,u!==null&&(a.updateQueue=null,Nd(a,u)));break;case 30:break;case 21:break;default:Tn(r,a),xn(a)}}function xn(a){var r=a.flags;if(r&2){try{for(var i,u=a.return;u!==null;){if(H_(u)){i=u;break}u=u.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var f=i.stateNode,m=Um(a);Sd(a,m,f);break;case 5:var E=i.stateNode;i.flags&32&&(En(E,""),i.flags&=-33);var N=Um(a);Sd(a,N,E);break;case 3:case 4:var V=i.stateNode.containerInfo,Q=Um(a);zm(a,Q,V);break;default:throw Error(s(161))}}catch(ee){et(a,a.return,ee)}a.flags&=-3}r&4096&&(a.flags&=-4097)}function Z_(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var r=a;Z_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),a=a.sibling}}function wr(a,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Q_(a,r.alternate,r),r=r.sibling}function Ri(a){for(a=a.child;a!==null;){var r=a;switch(r.tag){case 0:case 11:case 14:case 15:fs(4,r,r.return),Ri(r);break;case 1:Qa(r,r.return);var i=r.stateNode;typeof i.componentWillUnmount=="function"&&F_(r,r.return,i),Ri(r);break;case 27:vc(r.stateNode);case 26:case 5:Qa(r,r.return),Ri(r);break;case 22:r.memoizedState===null&&Ri(r);break;case 30:Ri(r);break;default:Ri(r)}a=a.sibling}}function Sr(a,r,i){for(i=i&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,f=a,m=r,E=m.flags;switch(m.tag){case 0:case 11:case 15:Sr(f,m,i),oc(4,m);break;case 1:if(Sr(f,m,i),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Q){et(u,u.return,Q)}if(u=m,f=u.updateQueue,f!==null){var N=u.stateNode;try{var V=f.shared.hiddenCallbacks;if(V!==null)for(f.shared.hiddenCallbacks=null,f=0;f<V.length;f++)jy(V[f],N)}catch(Q){et(u,u.return,Q)}}i&&E&64&&B_(m),lc(m,m.return);break;case 27:G_(m);case 26:case 5:Sr(f,m,i),i&&u===null&&E&4&&q_(m),lc(m,m.return);break;case 12:Sr(f,m,i);break;case 31:Sr(f,m,i),i&&E&4&&X_(f,m);break;case 13:Sr(f,m,i),i&&E&4&&J_(f,m);break;case 22:m.memoizedState===null&&Sr(f,m,i),lc(m,m.return);break;case 30:break;default:Sr(f,m,i)}r=r.sibling}}function Fm(a,r){var i=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),a=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==i&&(a!=null&&a.refCount++,i!=null&&Yl(i))}function qm(a,r){a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&Yl(a))}function _a(a,r,i,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)e0(a,r,i,u),r=r.sibling}function e0(a,r,i,u){var f=r.flags;switch(r.tag){case 0:case 11:case 15:_a(a,r,i,u),f&2048&&oc(9,r);break;case 1:_a(a,r,i,u);break;case 3:_a(a,r,i,u),f&2048&&(a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&Yl(a)));break;case 12:if(f&2048){_a(a,r,i,u),a=r.stateNode;try{var m=r.memoizedProps,E=m.id,N=m.onPostCommit;typeof N=="function"&&N(E,r.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(V){et(r,r.return,V)}}else _a(a,r,i,u);break;case 31:_a(a,r,i,u);break;case 13:_a(a,r,i,u);break;case 23:break;case 22:m=r.stateNode,E=r.alternate,r.memoizedState!==null?m._visibility&2?_a(a,r,i,u):cc(a,r):m._visibility&2?_a(a,r,i,u):(m._visibility|=2,Do(a,r,i,u,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Fm(E,r);break;case 24:_a(a,r,i,u),f&2048&&qm(r.alternate,r);break;default:_a(a,r,i,u)}}function Do(a,r,i,u,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=a,E=r,N=i,V=u,Q=E.flags;switch(E.tag){case 0:case 11:case 15:Do(m,E,N,V,f),oc(8,E);break;case 23:break;case 22:var ee=E.stateNode;E.memoizedState!==null?ee._visibility&2?Do(m,E,N,V,f):cc(m,E):(ee._visibility|=2,Do(m,E,N,V,f)),f&&Q&2048&&Fm(E.alternate,E);break;case 24:Do(m,E,N,V,f),f&&Q&2048&&qm(E.alternate,E);break;default:Do(m,E,N,V,f)}r=r.sibling}}function cc(a,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var i=a,u=r,f=u.flags;switch(u.tag){case 22:cc(i,u),f&2048&&Fm(u.alternate,u);break;case 24:cc(i,u),f&2048&&qm(u.alternate,u);break;default:cc(i,u)}r=r.sibling}}var uc=8192;function Io(a,r,i){if(a.subtreeFlags&uc)for(a=a.child;a!==null;)t0(a,r,i),a=a.sibling}function t0(a,r,i){switch(a.tag){case 26:Io(a,r,i),a.flags&uc&&a.memoizedState!==null&&fN(i,ya,a.memoizedState,a.memoizedProps);break;case 5:Io(a,r,i);break;case 3:case 4:var u=ya;ya=zd(a.stateNode.containerInfo),Io(a,r,i),ya=u;break;case 22:a.memoizedState===null&&(u=a.alternate,u!==null&&u.memoizedState!==null?(u=uc,uc=16777216,Io(a,r,i),uc=u):Io(a,r,i));break;default:Io(a,r,i)}}function n0(a){var r=a.alternate;if(r!==null&&(a=r.child,a!==null)){r.child=null;do r=a.sibling,a.sibling=null,a=r;while(a!==null)}}function dc(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var u=r[i];Kt=u,r0(u,a)}n0(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)a0(a),a=a.sibling}function a0(a){switch(a.tag){case 0:case 11:case 15:dc(a),a.flags&2048&&fs(9,a,a.return);break;case 3:dc(a);break;case 12:dc(a);break;case 22:var r=a.stateNode;a.memoizedState!==null&&r._visibility&2&&(a.return===null||a.return.tag!==13)?(r._visibility&=-3,Ad(a)):dc(a);break;default:dc(a)}}function Ad(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var u=r[i];Kt=u,r0(u,a)}n0(a)}for(a=a.child;a!==null;){switch(r=a,r.tag){case 0:case 11:case 15:fs(8,r,r.return),Ad(r);break;case 22:i=r.stateNode,i._visibility&2&&(i._visibility&=-3,Ad(r));break;default:Ad(r)}a=a.sibling}}function r0(a,r){for(;Kt!==null;){var i=Kt;switch(i.tag){case 0:case 11:case 15:fs(8,i,r);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var u=i.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Yl(i.memoizedState.cache)}if(u=i.child,u!==null)u.return=i,Kt=u;else e:for(i=a;Kt!==null;){u=Kt;var f=u.sibling,m=u.return;if(Y_(u),u===i){Kt=null;break e}if(f!==null){f.return=m,Kt=f;break e}Kt=m}}}var RS={getCacheForType:function(a){var r=en(Vt),i=r.data.get(a);return i===void 0&&(i=a(),r.data.set(a,i)),i},cacheSignal:function(){return en(Vt).controller.signal}},CS=typeof WeakMap=="function"?WeakMap:Map,Ke=0,ot=null,Me=null,ke=0,Ze=0,Un=null,ms=!1,Oo=!1,Hm=!1,Nr=0,_t=0,ps=0,Ci=0,Gm=0,zn=0,Po=0,hc=null,wn=null,$m=!1,Rd=0,s0=0,Cd=1/0,jd=null,gs=null,Ht=0,vs=null,Vo=null,Ar=0,Qm=0,Ym=null,i0=null,fc=0,Km=null;function Bn(){return(Ke&2)!==0&&ke!==0?ke&-ke:Z.T!==null?tp():Du()}function o0(){if(zn===0)if((ke&536870912)===0||qe){var a=ni;ni<<=1,(ni&3932160)===0&&(ni=262144),zn=a}else zn=536870912;return a=Ln.current,a!==null&&(a.flags|=32),zn}function Sn(a,r,i){(a===ot&&(Ze===2||Ze===9)||a.cancelPendingCommit!==null)&&(Mo(a,0),ys(a,ke,zn,!1)),ai(a,i),((Ke&2)===0||a!==ot)&&(a===ot&&((Ke&2)===0&&(Ci|=i),_t===4&&ys(a,ke,zn,!1)),Ya(a))}function l0(a,r,i){if((Ke&6)!==0)throw Error(s(327));var u=!i&&(r&127)===0&&(r&a.expiredLanes)===0||ca(a,r),f=u?IS(a,r):Jm(a,r,!0),m=u;do{if(f===0){Oo&&!u&&ys(a,r,0,!1);break}else{if(i=a.current.alternate,m&&!jS(i)){f=Jm(a,r,!1),m=!1;continue}if(f===2){if(m=r,a.errorRecoveryDisabledLanes&m)var E=0;else E=a.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var N=a;f=hc;var V=N.current.memoizedState.isDehydrated;if(V&&(Mo(N,E).flags|=256),E=Jm(N,E,!1),E!==2){if(Hm&&!V){N.errorRecoveryDisabledLanes|=m,Ci|=m,f=4;break e}m=wn,wn=f,m!==null&&(wn===null?wn=m:wn.push.apply(wn,m))}f=E}if(m=!1,f!==2)continue}}if(f===1){Mo(a,0),ys(a,r,0,!0);break}e:{switch(u=a,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:ys(u,r,zn,!ms);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=Rd+300-fn(),10<f)){if(ys(u,r,zn,!ms),ja(u,0,!0)!==0)break e;Ar=r,u.timeoutHandle=U0(c0.bind(null,u,i,wn,jd,$m,r,zn,Ci,Po,ms,m,"Throttled",-0,0),f);break e}c0(u,i,wn,jd,$m,r,zn,Ci,Po,ms,m,null,-0,0)}}break}while(!0);Ya(a)}function c0(a,r,i,u,f,m,E,N,V,Q,ee,se,Y,W){if(a.timeoutHandle=-1,se=r.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ha},t0(r,m,se);var ve=(m&62914560)===m?Rd-fn():(m&4194048)===m?s0-fn():0;if(ve=mN(se,ve),ve!==null){Ar=m,a.cancelPendingCommit=ve(v0.bind(null,a,r,m,i,u,f,E,N,V,ee,se,null,Y,W)),ys(a,m,E,!Q);return}}v0(a,r,m,i,u,f,E,N,V)}function jS(a){for(var r=a;;){var i=r.tag;if((i===0||i===11||i===15)&&r.flags&16384&&(i=r.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var u=0;u<i.length;u++){var f=i[u],m=f.getSnapshot;f=f.value;try{if(!Vn(m(),f))return!1}catch{return!1}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ys(a,r,i,u){r&=~Gm,r&=~Ci,a.suspendedLanes|=r,a.pingedLanes&=~r,u&&(a.warmLanes|=r),u=a.expirationTimes;for(var f=r;0<f;){var m=31-xt(f),E=1<<m;u[m]=-1,f&=~E}i!==0&&ri(a,i,r)}function Dd(){return(Ke&6)===0?(mc(0),!1):!0}function Xm(){if(Me!==null){if(Ze===0)var a=Me.return;else a=Me,gr=Ei=null,hm(a),No=null,Xl=0,a=Me;for(;a!==null;)z_(a.alternate,a),a=a.return;Me=null}}function Mo(a,r){var i=a.timeoutHandle;i!==-1&&(a.timeoutHandle=-1,XS(i)),i=a.cancelPendingCommit,i!==null&&(a.cancelPendingCommit=null,i()),Ar=0,Xm(),ot=a,Me=i=mr(a.current,null),ke=r,Ze=0,Un=null,ms=!1,Oo=ca(a,r),Hm=!1,Po=zn=Gm=Ci=ps=_t=0,wn=hc=null,$m=!1,(r&8)!==0&&(r|=r&32);var u=a.entangledLanes;if(u!==0)for(a=a.entanglements,u&=r;0<u;){var f=31-xt(u),m=1<<f;r|=a[f],u&=~m}return Nr=r,Wu(),i}function u0(a,r){je=null,Z.H=rc,r===So||r===id?(r=Ny(),Ze=3):r===em?(r=Ny(),Ze=4):Ze=r===Rm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Un=r,Me===null&&(_t=1,Ed(a,Jn(r,a.current)))}function d0(){var a=Ln.current;return a===null?!0:(ke&4194048)===ke?ta===null:(ke&62914560)===ke||(ke&536870912)!==0?a===ta:!1}function h0(){var a=Z.H;return Z.H=rc,a===null?rc:a}function f0(){var a=Z.A;return Z.A=RS,a}function Id(){_t=4,ms||(ke&4194048)!==ke&&Ln.current!==null||(Oo=!0),(ps&134217727)===0&&(Ci&134217727)===0||ot===null||ys(ot,ke,zn,!1)}function Jm(a,r,i){var u=Ke;Ke|=2;var f=h0(),m=f0();(ot!==a||ke!==r)&&(jd=null,Mo(a,r)),r=!1;var E=_t;e:do try{if(Ze!==0&&Me!==null){var N=Me,V=Un;switch(Ze){case 8:Xm(),E=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(r=!0);var Q=Ze;if(Ze=0,Un=null,Lo(a,N,V,Q),i&&Oo){E=0;break e}break;default:Q=Ze,Ze=0,Un=null,Lo(a,N,V,Q)}}DS(),E=_t;break}catch(ee){u0(a,ee)}while(!0);return r&&a.shellSuspendCounter++,gr=Ei=null,Ke=u,Z.H=f,Z.A=m,Me===null&&(ot=null,ke=0,Wu()),E}function DS(){for(;Me!==null;)m0(Me)}function IS(a,r){var i=Ke;Ke|=2;var u=h0(),f=f0();ot!==a||ke!==r?(jd=null,Cd=fn()+500,Mo(a,r)):Oo=ca(a,r);e:do try{if(Ze!==0&&Me!==null){r=Me;var m=Un;t:switch(Ze){case 1:Ze=0,Un=null,Lo(a,r,m,1);break;case 2:case 9:if(wy(m)){Ze=0,Un=null,p0(r);break}r=function(){Ze!==2&&Ze!==9||ot!==a||(Ze=7),Ya(a)},m.then(r,r);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:wy(m)?(Ze=0,Un=null,p0(r)):(Ze=0,Un=null,Lo(a,r,m,7));break;case 5:var E=null;switch(Me.tag){case 26:E=Me.memoizedState;case 5:case 27:var N=Me;if(E?eE(E):N.stateNode.complete){Ze=0,Un=null;var V=N.sibling;if(V!==null)Me=V;else{var Q=N.return;Q!==null?(Me=Q,Od(Q)):Me=null}break t}}Ze=0,Un=null,Lo(a,r,m,5);break;case 6:Ze=0,Un=null,Lo(a,r,m,6);break;case 8:Xm(),_t=6;break e;default:throw Error(s(462))}}OS();break}catch(ee){u0(a,ee)}while(!0);return gr=Ei=null,Z.H=u,Z.A=f,Ke=i,Me!==null?0:(ot=null,ke=0,Wu(),_t)}function OS(){for(;Me!==null&&!Af();)m0(Me)}function m0(a){var r=k_(a.alternate,a,Nr);a.memoizedProps=a.pendingProps,r===null?Od(a):Me=r}function p0(a){var r=a,i=r.alternate;switch(r.tag){case 15:case 0:r=I_(i,r,r.pendingProps,r.type,void 0,ke);break;case 11:r=I_(i,r,r.pendingProps,r.type.render,r.ref,ke);break;case 5:hm(r);default:z_(i,r),r=Me=fy(r,Nr),r=k_(i,r,Nr)}a.memoizedProps=a.pendingProps,r===null?Od(a):Me=r}function Lo(a,r,i,u){gr=Ei=null,hm(r),No=null,Xl=0;var f=r.return;try{if(bS(a,f,r,i,ke)){_t=1,Ed(a,Jn(i,a.current)),Me=null;return}}catch(m){if(f!==null)throw Me=f,m;_t=1,Ed(a,Jn(i,a.current)),Me=null;return}r.flags&32768?(qe||u===1?a=!0:Oo||(ke&536870912)!==0?a=!1:(ms=a=!0,(u===2||u===9||u===3||u===6)&&(u=Ln.current,u!==null&&u.tag===13&&(u.flags|=16384))),g0(r,a)):Od(r)}function Od(a){var r=a;do{if((r.flags&32768)!==0){g0(r,ms);return}a=r.return;var i=wS(r.alternate,r,Nr);if(i!==null){Me=i;return}if(r=r.sibling,r!==null){Me=r;return}Me=r=a}while(r!==null);_t===0&&(_t=5)}function g0(a,r){do{var i=SS(a.alternate,a);if(i!==null){i.flags&=32767,Me=i;return}if(i=a.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!r&&(a=a.sibling,a!==null)){Me=a;return}Me=a=i}while(a!==null);_t=6,Me=null}function v0(a,r,i,u,f,m,E,N,V){a.cancelPendingCommit=null;do Pd();while(Ht!==0);if((Ke&6)!==0)throw Error(s(327));if(r!==null){if(r===a.current)throw Error(s(177));if(m=r.lanes|r.childLanes,m|=Uf,jf(a,i,m,E,N,V),a===ot&&(Me=ot=null,ke=0),Vo=r,vs=a,Ar=i,Qm=m,Ym=f,i0=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,LS(Yr,function(){return T0(),null})):(a.callbackNode=null,a.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=Z.T,Z.T=null,f=le.p,le.p=2,E=Ke,Ke|=4;try{NS(a,r,i)}finally{Ke=E,le.p=f,Z.T=u}}Ht=1,y0(),_0(),E0()}}function y0(){if(Ht===1){Ht=0;var a=vs,r=Vo,i=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||i){i=Z.T,Z.T=null;var u=le.p;le.p=2;var f=Ke;Ke|=4;try{W_(r,a);var m=cp,E=ry(a.containerInfo),N=m.focusedElem,V=m.selectionRange;if(E!==N&&N&&N.ownerDocument&&ay(N.ownerDocument.documentElement,N)){if(V!==null&&Pf(N)){var Q=V.start,ee=V.end;if(ee===void 0&&(ee=Q),"selectionStart"in N)N.selectionStart=Q,N.selectionEnd=Math.min(ee,N.value.length);else{var se=N.ownerDocument||document,Y=se&&se.defaultView||window;if(Y.getSelection){var W=Y.getSelection(),ve=N.textContent.length,be=Math.min(V.start,ve),st=V.end===void 0?be:Math.min(V.end,ve);!W.extend&&be>st&&(E=st,st=be,be=E);var B=ny(N,be),k=ny(N,st);if(B&&k&&(W.rangeCount!==1||W.anchorNode!==B.node||W.anchorOffset!==B.offset||W.focusNode!==k.node||W.focusOffset!==k.offset)){var $=se.createRange();$.setStart(B.node,B.offset),W.removeAllRanges(),be>st?(W.addRange($),W.extend(k.node,k.offset)):($.setEnd(k.node,k.offset),W.addRange($))}}}}for(se=[],W=N;W=W.parentNode;)W.nodeType===1&&se.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<se.length;N++){var re=se[N];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}$d=!!lp,cp=lp=null}finally{Ke=f,le.p=u,Z.T=i}}a.current=r,Ht=2}}function _0(){if(Ht===2){Ht=0;var a=vs,r=Vo,i=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||i){i=Z.T,Z.T=null;var u=le.p;le.p=2;var f=Ke;Ke|=4;try{Q_(a,r.alternate,r)}finally{Ke=f,le.p=u,Z.T=i}}Ht=3}}function E0(){if(Ht===4||Ht===3){Ht=0,wu();var a=vs,r=Vo,i=Ar,u=i0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ht=5:(Ht=0,Vo=vs=null,b0(a,a.pendingLanes));var f=a.pendingLanes;if(f===0&&(gs=null),ur(i),r=r.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(la,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=Z.T,f=le.p,le.p=2,Z.T=null;try{for(var m=a.onRecoverableError,E=0;E<u.length;E++){var N=u[E];m(N.value,{componentStack:N.stack})}}finally{Z.T=r,le.p=f}}(Ar&3)!==0&&Pd(),Ya(a),f=a.pendingLanes,(i&261930)!==0&&(f&42)!==0?a===Km?fc++:(fc=0,Km=a):fc=0,mc(0)}}function b0(a,r){(a.pooledCacheLanes&=r)===0&&(r=a.pooledCache,r!=null&&(a.pooledCache=null,Yl(r)))}function Pd(){return y0(),_0(),E0(),T0()}function T0(){if(Ht!==5)return!1;var a=vs,r=Qm;Qm=0;var i=ur(Ar),u=Z.T,f=le.p;try{le.p=32>i?32:i,Z.T=null,i=Ym,Ym=null;var m=vs,E=Ar;if(Ht=0,Vo=vs=null,Ar=0,(Ke&6)!==0)throw Error(s(331));var N=Ke;if(Ke|=4,a0(m.current),e0(m,m.current,E,i),Ke=N,mc(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(la,m)}catch{}return!0}finally{le.p=f,Z.T=u,b0(a,r)}}function x0(a,r,i){r=Jn(i,r),r=Am(a.stateNode,r,2),a=us(a,r,2),a!==null&&(ai(a,2),Ya(a))}function et(a,r,i){if(a.tag===3)x0(a,a,i);else for(;r!==null;){if(r.tag===3){x0(r,a,i);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(gs===null||!gs.has(u))){a=Jn(i,a),i=w_(2),u=us(r,i,2),u!==null&&(S_(i,u,r,a),ai(u,2),Ya(u));break}}r=r.return}}function Wm(a,r,i){var u=a.pingCache;if(u===null){u=a.pingCache=new CS;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(i)||(Hm=!0,f.add(i),a=PS.bind(null,a,r,i),r.then(a,a))}function PS(a,r,i){var u=a.pingCache;u!==null&&u.delete(r),a.pingedLanes|=a.suspendedLanes&i,a.warmLanes&=~i,ot===a&&(ke&i)===i&&(_t===4||_t===3&&(ke&62914560)===ke&&300>fn()-Rd?(Ke&2)===0&&Mo(a,0):Gm|=i,Po===ke&&(Po=0)),Ya(a)}function w0(a,r){r===0&&(r=ju()),a=vi(a,r),a!==null&&(ai(a,r),Ya(a))}function VS(a){var r=a.memoizedState,i=0;r!==null&&(i=r.retryLane),w0(a,i)}function MS(a,r){var i=0;switch(a.tag){case 31:case 13:var u=a.stateNode,f=a.memoizedState;f!==null&&(i=f.retryLane);break;case 19:u=a.stateNode;break;case 22:u=a.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),w0(a,i)}function LS(a,r){return qt(a,r)}var Vd=null,ko=null,Zm=!1,Md=!1,ep=!1,_s=0;function Ya(a){a!==ko&&a.next===null&&(ko===null?Vd=ko=a:ko=ko.next=a),Md=!0,Zm||(Zm=!0,US())}function mc(a,r){if(!ep&&Md){ep=!0;do for(var i=!1,u=Vd;u!==null;){if(a!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var E=u.suspendedLanes,N=u.pingedLanes;m=(1<<31-xt(42|a)+1)-1,m&=f&~(E&~N),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(i=!0,R0(u,m))}else m=ke,m=ja(u,u===ot?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||ca(u,m)||(i=!0,R0(u,m));u=u.next}while(i);ep=!1}}function kS(){S0()}function S0(){Md=Zm=!1;var a=0;_s!==0&&KS()&&(a=_s);for(var r=fn(),i=null,u=Vd;u!==null;){var f=u.next,m=N0(u,r);m===0?(u.next=null,i===null?Vd=f:i.next=f,f===null&&(ko=i)):(i=u,(a!==0||(m&3)!==0)&&(Md=!0)),u=f}Ht!==0&&Ht!==5||mc(a),_s!==0&&(_s=0)}function N0(a,r){for(var i=a.suspendedLanes,u=a.pingedLanes,f=a.expirationTimes,m=a.pendingLanes&-62914561;0<m;){var E=31-xt(m),N=1<<E,V=f[E];V===-1?((N&i)===0||(N&u)!==0)&&(f[E]=Cf(N,r)):V<=r&&(a.expiredLanes|=N),m&=~N}if(r=ot,i=ke,i=ja(a,a===r?i:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),u=a.callbackNode,i===0||a===r&&(Ze===2||Ze===9)||a.cancelPendingCommit!==null)return u!==null&&u!==null&&Qr(u),a.callbackNode=null,a.callbackPriority=0;if((i&3)===0||ca(a,i)){if(r=i&-i,r===a.callbackPriority)return r;switch(u!==null&&Qr(u),ur(i)){case 2:case 8:i=wl;break;case 32:i=Yr;break;case 268435456:i=Su;break;default:i=Yr}return u=A0.bind(null,a),i=qt(i,u),a.callbackPriority=r,a.callbackNode=i,r}return u!==null&&u!==null&&Qr(u),a.callbackPriority=2,a.callbackNode=null,2}function A0(a,r){if(Ht!==0&&Ht!==5)return a.callbackNode=null,a.callbackPriority=0,null;var i=a.callbackNode;if(Pd()&&a.callbackNode!==i)return null;var u=ke;return u=ja(a,a===ot?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),u===0?null:(l0(a,u,r),N0(a,fn()),a.callbackNode!=null&&a.callbackNode===i?A0.bind(null,a):null)}function R0(a,r){if(Pd())return null;l0(a,r,!0)}function US(){JS(function(){(Ke&6)!==0?qt(xl,kS):S0()})}function tp(){if(_s===0){var a=xo;a===0&&(a=Ra,Ra<<=1,(Ra&261888)===0&&(Ra=256)),_s=a}return _s}function C0(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:oo(""+a)}function j0(a,r){var i=r.ownerDocument.createElement("input");return i.name=r.name,i.value=r.value,a.id&&i.setAttribute("form",a.id),r.parentNode.insertBefore(i,r),a=new FormData(a),i.parentNode.removeChild(i),a}function zS(a,r,i,u,f){if(r==="submit"&&i&&i.stateNode===f){var m=C0((f[Qt]||null).action),E=u.submitter;E&&(r=(r=E[Qt]||null)?C0(r.formAction):E.getAttribute("formAction"),r!==null&&(m=r,E=null));var N=new Ba("action","action",null,u,f);a.push({event:N,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(_s!==0){var V=E?j0(f,E):new FormData(f);bm(i,{pending:!0,data:V,method:f.method,action:m},null,V)}}else typeof m=="function"&&(N.preventDefault(),V=E?j0(f,E):new FormData(f),bm(i,{pending:!0,data:V,method:f.method,action:m},m,V))},currentTarget:f}]})}}for(var np=0;np<kf.length;np++){var ap=kf[np],BS=ap.toLowerCase(),FS=ap[0].toUpperCase()+ap.slice(1);va(BS,"on"+FS)}va(oy,"onAnimationEnd"),va(ly,"onAnimationIteration"),va(cy,"onAnimationStart"),va("dblclick","onDoubleClick"),va("focusin","onFocus"),va("focusout","onBlur"),va(rS,"onTransitionRun"),va(sS,"onTransitionStart"),va(iS,"onTransitionCancel"),va(uy,"onTransitionEnd"),La("onMouseEnter",["mouseout","mouseover"]),La("onMouseLeave",["mouseout","mouseover"]),La("onPointerEnter",["pointerout","pointerover"]),La("onPointerLeave",["pointerout","pointerover"]),Ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ma("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pc));function D0(a,r){r=(r&4)!==0;for(var i=0;i<a.length;i++){var u=a[i],f=u.event;u=u.listeners;e:{var m=void 0;if(r)for(var E=u.length-1;0<=E;E--){var N=u[E],V=N.instance,Q=N.currentTarget;if(N=N.listener,V!==m&&f.isPropagationStopped())break e;m=N,f.currentTarget=Q;try{m(f)}catch(ee){Ju(ee)}f.currentTarget=null,m=V}else for(E=0;E<u.length;E++){if(N=u[E],V=N.instance,Q=N.currentTarget,N=N.listener,V!==m&&f.isPropagationStopped())break e;m=N,f.currentTarget=Q;try{m(f)}catch(ee){Ju(ee)}f.currentTarget=null,m=V}}}}function Le(a,r){var i=r[no];i===void 0&&(i=r[no]=new Set);var u=a+"__bubble";i.has(u)||(I0(r,a,2,!1),i.add(u))}function rp(a,r,i){var u=0;r&&(u|=4),I0(i,a,u,r)}var Ld="_reactListening"+Math.random().toString(36).slice(2);function sp(a){if(!a[Ld]){a[Ld]=!0,Al.forEach(function(i){i!=="selectionchange"&&(qS.has(i)||rp(i,!1,a),rp(i,!0,a))});var r=a.nodeType===9?a:a.ownerDocument;r===null||r[Ld]||(r[Ld]=!0,rp("selectionchange",!1,r))}}function I0(a,r,i,u){switch(oE(r)){case 2:var f=vN;break;case 8:f=yN;break;default:f=Ep}i=f.bind(null,r,i,a),f=void 0,!ci||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?a.addEventListener(r,i,{capture:!0,passive:f}):a.addEventListener(r,i,!0):f!==void 0?a.addEventListener(r,i,{passive:f}):a.addEventListener(r,i,!1)}function ip(a,r,i,u,f){var m=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var N=u.stateNode.containerInfo;if(N===f)break;if(E===4)for(E=u.return;E!==null;){var V=E.tag;if((V===3||V===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;N!==null;){if(E=Pa(N),E===null)return;if(V=E.tag,V===5||V===6||V===26||V===27){u=m=E;continue e}N=N.parentNode}}u=u.return}es(function(){var Q=m,ee=Qn(i),se=[];e:{var Y=dy.get(a);if(Y!==void 0){var W=Ba,ve=a;switch(a){case"keypress":if(di(i)===0)break e;case"keydown":case"keyup":W=Yu;break;case"focusin":ve="focus",W=fi;break;case"focusout":ve="blur",W=fi;break;case"beforeblur":case"afterblur":W=fi;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=zl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Uu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=y;break;case oy:case ly:case cy:W=Bu;break;case uy:W=R;break;case"scroll":case"scrollend":W=Ul;break;case"wheel":W=K;break;case"copy":case"cut":case"paste":W=Fu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=fr;break;case"toggle":case"beforetoggle":W=Ce}var be=(r&4)!==0,st=!be&&(a==="scroll"||a==="scrollend"),B=be?Y!==null?Y+"Capture":null:Y;be=[];for(var k=Q,$;k!==null;){var re=k;if($=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||$===null||B===null||(re=fa(k,B),re!=null&&be.push(gc(k,re,$))),st)break;k=k.return}0<be.length&&(Y=new W(Y,ve,null,i,ee),se.push({event:Y,listeners:be}))}}if((r&7)===0){e:{if(Y=a==="mouseover"||a==="pointerover",W=a==="mouseout"||a==="pointerout",Y&&i!==Ml&&(ve=i.relatedTarget||i.fromElement)&&(Pa(ve)||ve[Ia]))break e;if((W||Y)&&(Y=ee.window===ee?ee:(Y=ee.ownerDocument)?Y.defaultView||Y.parentWindow:window,W?(ve=i.relatedTarget||i.toElement,W=Q,ve=ve?Pa(ve):null,ve!==null&&(st=c(ve),be=ve.tag,ve!==st||be!==5&&be!==27&&be!==6)&&(ve=null)):(W=null,ve=Q),W!==ve)){if(be=zl,re="onMouseLeave",B="onMouseEnter",k="mouse",(a==="pointerout"||a==="pointerover")&&(be=fr,re="onPointerLeave",B="onPointerEnter",k="pointer"),st=W==null?Y:On(W),$=ve==null?Y:On(ve),Y=new be(re,k+"leave",W,i,ee),Y.target=st,Y.relatedTarget=$,re=null,Pa(ee)===Q&&(be=new be(B,k+"enter",ve,i,ee),be.target=$,be.relatedTarget=st,re=be),st=re,W&&ve)t:{for(be=HS,B=W,k=ve,$=0,re=B;re;re=be(re))$++;re=0;for(var _e=k;_e;_e=be(_e))re++;for(;0<$-re;)B=be(B),$--;for(;0<re-$;)k=be(k),re--;for(;$--;){if(B===k||k!==null&&B===k.alternate){be=B;break t}B=be(B),k=be(k)}be=null}else be=null;W!==null&&O0(se,Y,W,be,!1),ve!==null&&st!==null&&O0(se,st,ve,be,!0)}}e:{if(Y=Q?On(Q):window,W=Y.nodeName&&Y.nodeName.toLowerCase(),W==="select"||W==="input"&&Y.type==="file")var $e=Xv;else if(Yv(Y))if(Jv)$e=tS;else{$e=Zw;var ye=Ww}else W=Y.nodeName,!W||W.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?Q&&io(Q.elementType)&&($e=Xv):$e=eS;if($e&&($e=$e(a,Q))){Kv(se,$e,i,ee);break e}ye&&ye(a,Y,Q),a==="focusout"&&Q&&Y.type==="number"&&Q.memoizedProps.value!=null&&Ol(Y,"number",Y.value)}switch(ye=Q?On(Q):window,a){case"focusin":(Yv(ye)||ye.contentEditable==="true")&&(po=ye,Vf=Q,Gl=null);break;case"focusout":Gl=Vf=po=null;break;case"mousedown":Mf=!0;break;case"contextmenu":case"mouseup":case"dragend":Mf=!1,sy(se,i,ee);break;case"selectionchange":if(aS)break;case"keydown":case"keyup":sy(se,i,ee)}var Oe;if(Ye)e:{switch(a){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else mo?mi(a,i)&&(Ue="onCompositionEnd"):a==="keydown"&&i.keyCode===229&&(Ue="onCompositionStart");Ue&&(Ha&&i.locale!=="ko"&&(mo||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&mo&&(Oe=kl()):(za=ee,Ll="value"in za?za.value:za.textContent,mo=!0)),ye=kd(Q,Ue),0<ye.length&&(Ue=new qa(Ue,a,null,i,ee),se.push({event:Ue,listeners:ye}),Oe?Ue.data=Oe:(Oe=fo(i),Oe!==null&&(Ue.data=Oe)))),(Oe=Kn?Yw(a,i):Kw(a,i))&&(Ue=kd(Q,"onBeforeInput"),0<Ue.length&&(ye=new qa("onBeforeInput","beforeinput",null,i,ee),se.push({event:ye,listeners:Ue}),ye.data=Oe)),zS(se,a,Q,i,ee)}D0(se,r)})}function gc(a,r,i){return{instance:a,listener:r,currentTarget:i}}function kd(a,r){for(var i=r+"Capture",u=[];a!==null;){var f=a,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=fa(a,i),f!=null&&u.unshift(gc(a,f,m)),f=fa(a,r),f!=null&&u.push(gc(a,f,m))),a.tag===3)return u;a=a.return}return[]}function HS(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function O0(a,r,i,u,f){for(var m=r._reactName,E=[];i!==null&&i!==u;){var N=i,V=N.alternate,Q=N.stateNode;if(N=N.tag,V!==null&&V===u)break;N!==5&&N!==26&&N!==27||Q===null||(V=Q,f?(Q=fa(i,m),Q!=null&&E.unshift(gc(i,Q,V))):f||(Q=fa(i,m),Q!=null&&E.push(gc(i,Q,V)))),i=i.return}E.length!==0&&a.push({event:r,listeners:E})}var GS=/\r\n?/g,$S=/\u0000|\uFFFD/g;function P0(a){return(typeof a=="string"?a:""+a).replace(GS,`
`).replace($S,"")}function V0(a,r){return r=P0(r),P0(a)===r}function rt(a,r,i,u,f,m){switch(i){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||En(a,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&En(a,""+u);break;case"className":Pn(a,"class",u);break;case"tabIndex":Pn(a,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Pn(a,i,u);break;case"style":Vl(a,u,m);break;case"data":if(r!=="object"){Pn(a,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||i!=="href")){a.removeAttribute(i);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){a.removeAttribute(i);break}u=oo(""+u),a.setAttribute(i,u);break;case"action":case"formAction":if(typeof u=="function"){a.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(i==="formAction"?(r!=="input"&&rt(a,r,"name",f.name,f,null),rt(a,r,"formEncType",f.formEncType,f,null),rt(a,r,"formMethod",f.formMethod,f,null),rt(a,r,"formTarget",f.formTarget,f,null)):(rt(a,r,"encType",f.encType,f,null),rt(a,r,"method",f.method,f,null),rt(a,r,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){a.removeAttribute(i);break}u=oo(""+u),a.setAttribute(i,u);break;case"onClick":u!=null&&(a.onclick=ha);break;case"onScroll":u!=null&&Le("scroll",a);break;case"onScrollEnd":u!=null&&Le("scrollend",a);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(i=u.__html,i!=null){if(f.children!=null)throw Error(s(60));a.innerHTML=i}}break;case"multiple":a.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":a.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){a.removeAttribute("xlink:href");break}i=oo(""+u),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(i,""+u):a.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(i,""):a.removeAttribute(i);break;case"capture":case"download":u===!0?a.setAttribute(i,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(i,u):a.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?a.setAttribute(i,u):a.removeAttribute(i);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?a.removeAttribute(i):a.setAttribute(i,u);break;case"popover":Le("beforetoggle",a),Le("toggle",a),ro(a,"popover",u);break;case"xlinkActuate":Pt(a,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Pt(a,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Pt(a,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Pt(a,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Pt(a,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Pt(a,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Pt(a,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Pt(a,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Pt(a,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ro(a,"is",u);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=ku.get(i)||i,ro(a,i,u))}}function op(a,r,i,u,f,m){switch(i){case"style":Vl(a,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(i=u.__html,i!=null){if(f.children!=null)throw Error(s(60));a.innerHTML=i}}break;case"children":typeof u=="string"?En(a,u):(typeof u=="number"||typeof u=="bigint")&&En(a,""+u);break;case"onScroll":u!=null&&Le("scroll",a);break;case"onScrollEnd":u!=null&&Le("scrollend",a);break;case"onClick":u!=null&&(a.onclick=ha);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rl.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),r=i.slice(2,f?i.length-7:void 0),m=a[Qt]||null,m=m!=null?m[i]:null,typeof m=="function"&&a.removeEventListener(r,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(i in a?a[i]=null:a.hasAttribute(i)&&a.removeAttribute(i)),a.addEventListener(r,u,f);break e}i in a?a[i]=u:u===!0?a.setAttribute(i,""):ro(a,i,u)}}}function nn(a,r,i){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",a),Le("load",a);var u=!1,f=!1,m;for(m in i)if(i.hasOwnProperty(m)){var E=i[m];if(E!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:rt(a,r,m,E,i,null)}}f&&rt(a,r,"srcSet",i.srcSet,i,null),u&&rt(a,r,"src",i.src,i,null);return;case"input":Le("invalid",a);var N=m=E=f=null,V=null,Q=null;for(u in i)if(i.hasOwnProperty(u)){var ee=i[u];if(ee!=null)switch(u){case"name":f=ee;break;case"type":E=ee;break;case"checked":V=ee;break;case"defaultChecked":Q=ee;break;case"value":m=ee;break;case"defaultValue":N=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,r));break;default:rt(a,r,u,ee,i,null)}}Vu(a,m,N,V,Q,E,f,!1);return;case"select":Le("invalid",a),u=E=m=null;for(f in i)if(i.hasOwnProperty(f)&&(N=i[f],N!=null))switch(f){case"value":m=N;break;case"defaultValue":E=N;break;case"multiple":u=N;default:rt(a,r,f,N,i,null)}r=m,i=E,a.multiple=!!u,r!=null?Xr(a,!!u,r,!1):i!=null&&Xr(a,!!u,i,!0);return;case"textarea":Le("invalid",a),m=f=u=null;for(E in i)if(i.hasOwnProperty(E)&&(N=i[E],N!=null))switch(E){case"value":u=N;break;case"defaultValue":f=N;break;case"children":m=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(s(91));break;default:rt(a,r,E,N,i,null)}Jr(a,u,f,m);return;case"option":for(V in i)if(i.hasOwnProperty(V)&&(u=i[V],u!=null))switch(V){case"selected":a.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:rt(a,r,V,u,i,null)}return;case"dialog":Le("beforetoggle",a),Le("toggle",a),Le("cancel",a),Le("close",a);break;case"iframe":case"object":Le("load",a);break;case"video":case"audio":for(u=0;u<pc.length;u++)Le(pc[u],a);break;case"image":Le("error",a),Le("load",a);break;case"details":Le("toggle",a);break;case"embed":case"source":case"link":Le("error",a),Le("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in i)if(i.hasOwnProperty(Q)&&(u=i[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:rt(a,r,Q,u,i,null)}return;default:if(io(r)){for(ee in i)i.hasOwnProperty(ee)&&(u=i[ee],u!==void 0&&op(a,r,ee,u,i,void 0));return}}for(N in i)i.hasOwnProperty(N)&&(u=i[N],u!=null&&rt(a,r,N,u,i,null))}function QS(a,r,i,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,E=null,N=null,V=null,Q=null,ee=null;for(W in i){var se=i[W];if(i.hasOwnProperty(W)&&se!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":V=se;default:u.hasOwnProperty(W)||rt(a,r,W,null,u,se)}}for(var Y in u){var W=u[Y];if(se=i[Y],u.hasOwnProperty(Y)&&(W!=null||se!=null))switch(Y){case"type":m=W;break;case"name":f=W;break;case"checked":Q=W;break;case"defaultChecked":ee=W;break;case"value":E=W;break;case"defaultValue":N=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:W!==se&&rt(a,r,Y,W,u,se)}}so(a,E,N,V,Q,ee,m,f);return;case"select":W=E=N=Y=null;for(m in i)if(V=i[m],i.hasOwnProperty(m)&&V!=null)switch(m){case"value":break;case"multiple":W=V;default:u.hasOwnProperty(m)||rt(a,r,m,null,u,V)}for(f in u)if(m=u[f],V=i[f],u.hasOwnProperty(f)&&(m!=null||V!=null))switch(f){case"value":Y=m;break;case"defaultValue":N=m;break;case"multiple":E=m;default:m!==V&&rt(a,r,f,m,u,V)}r=N,i=E,u=W,Y!=null?Xr(a,!!i,Y,!1):!!u!=!!i&&(r!=null?Xr(a,!!i,r,!0):Xr(a,!!i,i?[]:"",!1));return;case"textarea":W=Y=null;for(N in i)if(f=i[N],i.hasOwnProperty(N)&&f!=null&&!u.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:rt(a,r,N,null,u,f)}for(E in u)if(f=u[E],m=i[E],u.hasOwnProperty(E)&&(f!=null||m!=null))switch(E){case"value":Y=f;break;case"defaultValue":W=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&rt(a,r,E,f,u,m)}Mu(a,Y,W);return;case"option":for(var ve in i)if(Y=i[ve],i.hasOwnProperty(ve)&&Y!=null&&!u.hasOwnProperty(ve))switch(ve){case"selected":a.selected=!1;break;default:rt(a,r,ve,null,u,Y)}for(V in u)if(Y=u[V],W=i[V],u.hasOwnProperty(V)&&Y!==W&&(Y!=null||W!=null))switch(V){case"selected":a.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:rt(a,r,V,Y,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in i)Y=i[be],i.hasOwnProperty(be)&&Y!=null&&!u.hasOwnProperty(be)&&rt(a,r,be,null,u,Y);for(Q in u)if(Y=u[Q],W=i[Q],u.hasOwnProperty(Q)&&Y!==W&&(Y!=null||W!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,r));break;default:rt(a,r,Q,Y,u,W)}return;default:if(io(r)){for(var st in i)Y=i[st],i.hasOwnProperty(st)&&Y!==void 0&&!u.hasOwnProperty(st)&&op(a,r,st,void 0,u,Y);for(ee in u)Y=u[ee],W=i[ee],!u.hasOwnProperty(ee)||Y===W||Y===void 0&&W===void 0||op(a,r,ee,Y,u,W);return}}for(var B in i)Y=i[B],i.hasOwnProperty(B)&&Y!=null&&!u.hasOwnProperty(B)&&rt(a,r,B,null,u,Y);for(se in u)Y=u[se],W=i[se],!u.hasOwnProperty(se)||Y===W||Y==null&&W==null||rt(a,r,se,Y,u,W)}function M0(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function YS(){if(typeof performance.getEntriesByType=="function"){for(var a=0,r=0,i=performance.getEntriesByType("resource"),u=0;u<i.length;u++){var f=i[u],m=f.transferSize,E=f.initiatorType,N=f.duration;if(m&&N&&M0(E)){for(E=0,N=f.responseEnd,u+=1;u<i.length;u++){var V=i[u],Q=V.startTime;if(Q>N)break;var ee=V.transferSize,se=V.initiatorType;ee&&M0(se)&&(V=V.responseEnd,E+=ee*(V<N?1:(N-Q)/(V-Q)))}if(--u,r+=8*(m+E)/(f.duration/1e3),a++,10<a)break}}if(0<a)return r/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var lp=null,cp=null;function Ud(a){return a.nodeType===9?a:a.ownerDocument}function L0(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function k0(a,r){if(a===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&r==="foreignObject"?0:a}function up(a,r){return a==="textarea"||a==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var dp=null;function KS(){var a=window.event;return a&&a.type==="popstate"?a===dp?!1:(dp=a,!0):(dp=null,!1)}var U0=typeof setTimeout=="function"?setTimeout:void 0,XS=typeof clearTimeout=="function"?clearTimeout:void 0,z0=typeof Promise=="function"?Promise:void 0,JS=typeof queueMicrotask=="function"?queueMicrotask:typeof z0<"u"?function(a){return z0.resolve(null).then(a).catch(WS)}:U0;function WS(a){setTimeout(function(){throw a})}function Es(a){return a==="head"}function B0(a,r){var i=r,u=0;do{var f=i.nextSibling;if(a.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"||i==="/&"){if(u===0){a.removeChild(f),Fo(r);return}u--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")u++;else if(i==="html")vc(a.ownerDocument.documentElement);else if(i==="head"){i=a.ownerDocument.head,vc(i);for(var m=i.firstChild;m;){var E=m.nextSibling,N=m.nodeName;m[Oa]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&m.rel.toLowerCase()==="stylesheet"||i.removeChild(m),m=E}}else i==="body"&&vc(a.ownerDocument.body);i=f}while(i);Fo(r)}function F0(a,r){var i=a;a=0;do{var u=i.nextSibling;if(i.nodeType===1?r?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(r?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),u&&u.nodeType===8)if(i=u.data,i==="/$"){if(a===0)break;a--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||a++;i=u}while(i)}function hp(a){var r=a.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var i=r;switch(r=r.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":hp(i),ao(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}a.removeChild(i)}}function ZS(a,r,i,u){for(;a.nodeType===1;){var f=i;if(a.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(u){if(!a[Oa])switch(r){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(m=a.getAttribute("rel"),m==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(m!==f.rel||a.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||a.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||a.getAttribute("title")!==(f.title==null?null:f.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(m=a.getAttribute("src"),(m!==(f.src==null?null:f.src)||a.getAttribute("type")!==(f.type==null?null:f.type)||a.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(r==="input"&&a.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&a.getAttribute("name")===m)return a}else return a;if(a=na(a.nextSibling),a===null)break}return null}function eN(a,r,i){if(r==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!i||(a=na(a.nextSibling),a===null))return null;return a}function q0(a,r){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!r||(a=na(a.nextSibling),a===null))return null;return a}function fp(a){return a.data==="$?"||a.data==="$~"}function mp(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function tN(a,r){var i=a.ownerDocument;if(a.data==="$~")a._reactRetry=r;else if(a.data!=="$?"||i.readyState!=="loading")r();else{var u=function(){r(),i.removeEventListener("DOMContentLoaded",u)};i.addEventListener("DOMContentLoaded",u),a._reactRetry=u}}function na(a){for(;a!=null;a=a.nextSibling){var r=a.nodeType;if(r===1||r===3)break;if(r===8){if(r=a.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return a}var pp=null;function H0(a){a=a.nextSibling;for(var r=0;a;){if(a.nodeType===8){var i=a.data;if(i==="/$"||i==="/&"){if(r===0)return na(a.nextSibling);r--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||r++}a=a.nextSibling}return null}function G0(a){a=a.previousSibling;for(var r=0;a;){if(a.nodeType===8){var i=a.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(r===0)return a;r--}else i!=="/$"&&i!=="/&"||r++}a=a.previousSibling}return null}function $0(a,r,i){switch(r=Ud(i),a){case"html":if(a=r.documentElement,!a)throw Error(s(452));return a;case"head":if(a=r.head,!a)throw Error(s(453));return a;case"body":if(a=r.body,!a)throw Error(s(454));return a;default:throw Error(s(451))}}function vc(a){for(var r=a.attributes;r.length;)a.removeAttributeNode(r[0]);ao(a)}var aa=new Map,Q0=new Set;function zd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Rr=le.d;le.d={f:nN,r:aN,D:rN,C:sN,L:iN,m:oN,X:cN,S:lN,M:uN};function nN(){var a=Rr.f(),r=Dd();return a||r}function aN(a){var r=$n(a);r!==null&&r.tag===5&&r.type==="form"?u_(r):Rr.r(a)}var Uo=typeof document>"u"?null:document;function Y0(a,r,i){var u=Uo;if(u&&typeof r=="string"&&r){var f=_n(r);f='link[rel="'+a+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),Q0.has(f)||(Q0.add(f),a={rel:a,crossOrigin:i,href:r},u.querySelector(f)===null&&(r=u.createElement("link"),nn(r,"link",a),Ot(r),u.head.appendChild(r)))}}function rN(a){Rr.D(a),Y0("dns-prefetch",a,null)}function sN(a,r){Rr.C(a,r),Y0("preconnect",a,r)}function iN(a,r,i){Rr.L(a,r,i);var u=Uo;if(u&&a&&r){var f='link[rel="preload"][as="'+_n(r)+'"]';r==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+_n(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+_n(i.imageSizes)+'"]')):f+='[href="'+_n(a)+'"]';var m=f;switch(r){case"style":m=zo(a);break;case"script":m=Bo(a)}aa.has(m)||(a=T({rel:"preload",href:r==="image"&&i&&i.imageSrcSet?void 0:a,as:r},i),aa.set(m,a),u.querySelector(f)!==null||r==="style"&&u.querySelector(yc(m))||r==="script"&&u.querySelector(_c(m))||(r=u.createElement("link"),nn(r,"link",a),Ot(r),u.head.appendChild(r)))}}function oN(a,r){Rr.m(a,r);var i=Uo;if(i&&a){var u=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+_n(u)+'"][href="'+_n(a)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Bo(a)}if(!aa.has(m)&&(a=T({rel:"modulepreload",href:a},r),aa.set(m,a),i.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(_c(m)))return}u=i.createElement("link"),nn(u,"link",a),Ot(u),i.head.appendChild(u)}}}function lN(a,r,i){Rr.S(a,r,i);var u=Uo;if(u&&a){var f=Va(u).hoistableStyles,m=zo(a);r=r||"default";var E=f.get(m);if(!E){var N={loading:0,preload:null};if(E=u.querySelector(yc(m)))N.loading=5;else{a=T({rel:"stylesheet",href:a,"data-precedence":r},i),(i=aa.get(m))&&gp(a,i);var V=E=u.createElement("link");Ot(V),nn(V,"link",a),V._p=new Promise(function(Q,ee){V.onload=Q,V.onerror=ee}),V.addEventListener("load",function(){N.loading|=1}),V.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Bd(E,r,u)}E={type:"stylesheet",instance:E,count:1,state:N},f.set(m,E)}}}function cN(a,r){Rr.X(a,r);var i=Uo;if(i&&a){var u=Va(i).hoistableScripts,f=Bo(a),m=u.get(f);m||(m=i.querySelector(_c(f)),m||(a=T({src:a,async:!0},r),(r=aa.get(f))&&vp(a,r),m=i.createElement("script"),Ot(m),nn(m,"link",a),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function uN(a,r){Rr.M(a,r);var i=Uo;if(i&&a){var u=Va(i).hoistableScripts,f=Bo(a),m=u.get(f);m||(m=i.querySelector(_c(f)),m||(a=T({src:a,async:!0,type:"module"},r),(r=aa.get(f))&&vp(a,r),m=i.createElement("script"),Ot(m),nn(m,"link",a),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function K0(a,r,i,u){var f=(f=Ie.current)?zd(f):null;if(!f)throw Error(s(446));switch(a){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(r=zo(i.href),i=Va(f).hoistableStyles,u=i.get(r),u||(u={type:"style",instance:null,count:0,state:null},i.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){a=zo(i.href);var m=Va(f).hoistableStyles,E=m.get(a);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(a,E),(m=f.querySelector(yc(a)))&&!m._p&&(E.instance=m,E.state.loading=5),aa.has(a)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},aa.set(a,i),m||dN(f,a,i,E.state))),r&&u===null)throw Error(s(528,""));return E}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=i.async,i=i.src,typeof i=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Bo(i),i=Va(f).hoistableScripts,u=i.get(r),u||(u={type:"script",instance:null,count:0,state:null},i.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,a))}}function zo(a){return'href="'+_n(a)+'"'}function yc(a){return'link[rel="stylesheet"]['+a+"]"}function X0(a){return T({},a,{"data-precedence":a.precedence,precedence:null})}function dN(a,r,i,u){a.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=a.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),nn(r,"link",i),Ot(r),a.head.appendChild(r))}function Bo(a){return'[src="'+_n(a)+'"]'}function _c(a){return"script[async]"+a}function J0(a,r,i){if(r.count++,r.instance===null)switch(r.type){case"style":var u=a.querySelector('style[data-href~="'+_n(i.href)+'"]');if(u)return r.instance=u,Ot(u),u;var f=T({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return u=(a.ownerDocument||a).createElement("style"),Ot(u),nn(u,"style",f),Bd(u,i.precedence,a),r.instance=u;case"stylesheet":f=zo(i.href);var m=a.querySelector(yc(f));if(m)return r.state.loading|=4,r.instance=m,Ot(m),m;u=X0(i),(f=aa.get(f))&&gp(u,f),m=(a.ownerDocument||a).createElement("link"),Ot(m);var E=m;return E._p=new Promise(function(N,V){E.onload=N,E.onerror=V}),nn(m,"link",u),r.state.loading|=4,Bd(m,i.precedence,a),r.instance=m;case"script":return m=Bo(i.src),(f=a.querySelector(_c(m)))?(r.instance=f,Ot(f),f):(u=i,(f=aa.get(m))&&(u=T({},i),vp(u,f)),a=a.ownerDocument||a,f=a.createElement("script"),Ot(f),nn(f,"link",u),a.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Bd(u,i.precedence,a));return r.instance}function Bd(a,r,i){for(var u=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,E=0;E<u.length;E++){var N=u[E];if(N.dataset.precedence===r)m=N;else if(m!==f)break}m?m.parentNode.insertBefore(a,m.nextSibling):(r=i.nodeType===9?i.head:i,r.insertBefore(a,r.firstChild))}function gp(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.title==null&&(a.title=r.title)}function vp(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.integrity==null&&(a.integrity=r.integrity)}var Fd=null;function W0(a,r,i){if(Fd===null){var u=new Map,f=Fd=new Map;f.set(i,u)}else f=Fd,u=f.get(i),u||(u=new Map,f.set(i,u));if(u.has(a))return u;for(u.set(a,null),i=i.getElementsByTagName(a),f=0;f<i.length;f++){var m=i[f];if(!(m[Oa]||m[It]||a==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var E=m.getAttribute(r)||"";E=a+E;var N=u.get(E);N?N.push(m):u.set(E,[m])}}return u}function Z0(a,r,i){a=a.ownerDocument||a,a.head.insertBefore(i,r==="title"?a.querySelector("head > title"):null)}function hN(a,r,i){if(i===1||r.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return a=r.disabled,typeof r.precedence=="string"&&a==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function eE(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function fN(a,r,i,u){if(i.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=zo(u.href),m=r.querySelector(yc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(a.count++,a=qd.bind(a),r.then(a,a)),i.state.loading|=4,i.instance=m,Ot(m);return}m=r.ownerDocument||r,u=X0(u),(f=aa.get(f))&&gp(u,f),m=m.createElement("link"),Ot(m);var E=m;E._p=new Promise(function(N,V){E.onload=N,E.onerror=V}),nn(m,"link",u),i.instance=m}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(a.count++,i=qd.bind(a),r.addEventListener("load",i),r.addEventListener("error",i))}}var yp=0;function mN(a,r){return a.stylesheets&&a.count===0&&Gd(a,a.stylesheets),0<a.count||0<a.imgCount?function(i){var u=setTimeout(function(){if(a.stylesheets&&Gd(a,a.stylesheets),a.unsuspend){var m=a.unsuspend;a.unsuspend=null,m()}},6e4+r);0<a.imgBytes&&yp===0&&(yp=62500*YS());var f=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&Gd(a,a.stylesheets),a.unsuspend)){var m=a.unsuspend;a.unsuspend=null,m()}},(a.imgBytes>yp?50:800)+r);return a.unsuspend=i,function(){a.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function qd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gd(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Hd=null;function Gd(a,r){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Hd=new Map,r.forEach(pN,a),Hd=null,qd.call(a))}function pN(a,r){if(!(r.state.loading&4)){var i=Hd.get(a);if(i)var u=i.get(null);else{i=new Map,Hd.set(a,i);for(var f=a.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var E=f[m];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(i.set(E.dataset.precedence,E),u=E)}u&&i.set(null,u)}f=r.instance,E=f.getAttribute("data-precedence"),m=i.get(E)||u,m===u&&i.set(null,f),i.set(E,f),this.count++,u=qd.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(f,a.firstChild)),r.state.loading|=4}}var Ec={$$typeof:F,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function gN(a,r,i,u,f,m,E,N,V){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Da(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Da(0),this.hiddenUpdates=Da(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function tE(a,r,i,u,f,m,E,N,V,Q,ee,se){return a=new gN(a,r,i,E,V,Q,ee,se,N),r=1,m===!0&&(r|=24),m=Mn(3,null,null,r),a.current=m,m.stateNode=a,r=Jf(),r.refCount++,a.pooledCache=r,r.refCount++,m.memoizedState={element:u,isDehydrated:i,cache:r},tm(m),a}function nE(a){return a?(a=yo,a):yo}function aE(a,r,i,u,f,m){f=nE(f),u.context===null?u.context=f:u.pendingContext=f,u=cs(r),u.payload={element:i},m=m===void 0?null:m,m!==null&&(u.callback=m),i=us(a,u,r),i!==null&&(Sn(i,a,r),Wl(i,a,r))}function rE(a,r){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var i=a.retryLane;a.retryLane=i!==0&&i<r?i:r}}function _p(a,r){rE(a,r),(a=a.alternate)&&rE(a,r)}function sE(a){if(a.tag===13||a.tag===31){var r=vi(a,67108864);r!==null&&Sn(r,a,67108864),_p(a,67108864)}}function iE(a){if(a.tag===13||a.tag===31){var r=Bn();r=si(r);var i=vi(a,r);i!==null&&Sn(i,a,r),_p(a,r)}}var $d=!0;function vN(a,r,i,u){var f=Z.T;Z.T=null;var m=le.p;try{le.p=2,Ep(a,r,i,u)}finally{le.p=m,Z.T=f}}function yN(a,r,i,u){var f=Z.T;Z.T=null;var m=le.p;try{le.p=8,Ep(a,r,i,u)}finally{le.p=m,Z.T=f}}function Ep(a,r,i,u){if($d){var f=bp(u);if(f===null)ip(a,r,u,Qd,i),lE(a,u);else if(EN(f,a,r,i,u))u.stopPropagation();else if(lE(a,u),r&4&&-1<_N.indexOf(a)){for(;f!==null;){var m=$n(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var E=Ca(m.pendingLanes);if(E!==0){var N=m;for(N.pendingLanes|=2,N.entangledLanes|=2;E;){var V=1<<31-xt(E);N.entanglements[1]|=V,E&=~V}Ya(m),(Ke&6)===0&&(Cd=fn()+500,mc(0))}}break;case 31:case 13:N=vi(m,2),N!==null&&Sn(N,m,2),Dd(),_p(m,2)}if(m=bp(u),m===null&&ip(a,r,u,Qd,i),m===f)break;f=m}f!==null&&u.stopPropagation()}else ip(a,r,u,null,i)}}function bp(a){return a=Qn(a),Tp(a)}var Qd=null;function Tp(a){if(Qd=null,a=Pa(a),a!==null){var r=c(a);if(r===null)a=null;else{var i=r.tag;if(i===13){if(a=d(r),a!==null)return a;a=null}else if(i===31){if(a=p(r),a!==null)return a;a=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;a=null}else r!==a&&(a=null)}}return Qd=a,null}function oE(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ti()){case xl:return 2;case wl:return 8;case Yr:case Rf:return 32;case Su:return 268435456;default:return 32}default:return 32}}var xp=!1,bs=null,Ts=null,xs=null,bc=new Map,Tc=new Map,ws=[],_N="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lE(a,r){switch(a){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":xs=null;break;case"pointerover":case"pointerout":bc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tc.delete(r.pointerId)}}function xc(a,r,i,u,f,m){return a===null||a.nativeEvent!==m?(a={blockedOn:r,domEventName:i,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},r!==null&&(r=$n(r),r!==null&&sE(r)),a):(a.eventSystemFlags|=u,r=a.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),a)}function EN(a,r,i,u,f){switch(r){case"focusin":return bs=xc(bs,a,r,i,u,f),!0;case"dragenter":return Ts=xc(Ts,a,r,i,u,f),!0;case"mouseover":return xs=xc(xs,a,r,i,u,f),!0;case"pointerover":var m=f.pointerId;return bc.set(m,xc(bc.get(m)||null,a,r,i,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Tc.set(m,xc(Tc.get(m)||null,a,r,i,u,f)),!0}return!1}function cE(a){var r=Pa(a.target);if(r!==null){var i=c(r);if(i!==null){if(r=i.tag,r===13){if(r=d(i),r!==null){a.blockedOn=r,ua(a.priority,function(){iE(i)});return}}else if(r===31){if(r=p(i),r!==null){a.blockedOn=r,ua(a.priority,function(){iE(i)});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){a.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Yd(a){if(a.blockedOn!==null)return!1;for(var r=a.targetContainers;0<r.length;){var i=bp(a.nativeEvent);if(i===null){i=a.nativeEvent;var u=new i.constructor(i.type,i);Ml=u,i.target.dispatchEvent(u),Ml=null}else return r=$n(i),r!==null&&sE(r),a.blockedOn=i,!1;r.shift()}return!0}function uE(a,r,i){Yd(a)&&i.delete(r)}function bN(){xp=!1,bs!==null&&Yd(bs)&&(bs=null),Ts!==null&&Yd(Ts)&&(Ts=null),xs!==null&&Yd(xs)&&(xs=null),bc.forEach(uE),Tc.forEach(uE)}function Kd(a,r){a.blockedOn===r&&(a.blockedOn=null,xp||(xp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,bN)))}var Xd=null;function dE(a){Xd!==a&&(Xd=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Xd===a&&(Xd=null);for(var r=0;r<a.length;r+=3){var i=a[r],u=a[r+1],f=a[r+2];if(typeof u!="function"){if(Tp(u||i)===null)continue;break}var m=$n(i);m!==null&&(a.splice(r,3),r-=3,bm(m,{pending:!0,data:f,method:i.method,action:u},u,f))}}))}function Fo(a){function r(V){return Kd(V,a)}bs!==null&&Kd(bs,a),Ts!==null&&Kd(Ts,a),xs!==null&&Kd(xs,a),bc.forEach(r),Tc.forEach(r);for(var i=0;i<ws.length;i++){var u=ws[i];u.blockedOn===a&&(u.blockedOn=null)}for(;0<ws.length&&(i=ws[0],i.blockedOn===null);)cE(i),i.blockedOn===null&&ws.shift();if(i=(a.ownerDocument||a).$$reactFormReplay,i!=null)for(u=0;u<i.length;u+=3){var f=i[u],m=i[u+1],E=f[Qt]||null;if(typeof m=="function")E||dE(i);else if(E){var N=null;if(m&&m.hasAttribute("formAction")){if(f=m,E=m[Qt]||null)N=E.formAction;else if(Tp(f)!==null)continue}else N=E.action;typeof N=="function"?i[u+1]=N:(i.splice(u,3),u-=3),dE(i)}}}function hE(){function a(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(E){return f=E})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),u||setTimeout(i,20)}function i(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(i,100),function(){u=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function wp(a){this._internalRoot=a}Jd.prototype.render=wp.prototype.render=function(a){var r=this._internalRoot;if(r===null)throw Error(s(409));var i=r.current,u=Bn();aE(i,u,a,r,null,null)},Jd.prototype.unmount=wp.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var r=a.containerInfo;aE(a.current,2,null,a,null,null),Dd(),r[Ia]=null}};function Jd(a){this._internalRoot=a}Jd.prototype.unstable_scheduleHydration=function(a){if(a){var r=Du();a={blockedOn:null,target:a,priority:r};for(var i=0;i<ws.length&&r!==0&&r<ws[i].priority;i++);ws.splice(i,0,a),i===0&&cE(a)}};var fE=e.version;if(fE!=="19.2.0")throw Error(s(527,fE,"19.2.0"));le.findDOMNode=function(a){var r=a._reactInternals;if(r===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=g(r),a=a!==null?_(a):null,a=a===null?null:a.stateNode,a};var TN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wd.isDisabled&&Wd.supportsFiber)try{la=Wd.inject(TN),Jt=Wd}catch{}}return Sc.createRoot=function(a,r){if(!o(a))throw Error(s(299));var i=!1,u="",f=E_,m=b_,E=T_;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError)),r=tE(a,1,!1,null,null,i,u,null,f,m,E,hE),a[Ia]=r.current,sp(a),new wp(r)},Sc.hydrateRoot=function(a,r,i){if(!o(a))throw Error(s(299));var u=!1,f="",m=E_,E=b_,N=T_,V=null;return i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(E=i.onCaughtError),i.onRecoverableError!==void 0&&(N=i.onRecoverableError),i.formState!==void 0&&(V=i.formState)),r=tE(a,1,!0,r,i??null,u,f,V,m,E,N,hE),r.context=nE(null),i=r.current,u=Bn(),u=si(u),f=cs(u),f.callback=null,us(i,f,u),i=u,r.current.lanes=i,ai(r,i),Ya(r),a[Ia]=r.current,sp(a),new Jd(r)},Sc.version="19.2.0",Sc}var xE;function ON(){if(xE)return Ap.exports;xE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ap.exports=IN(),Ap.exports}var PN=ON();const VN=()=>{};var wE={};const Cb=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},MN=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=n[t++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=n[t++],d=n[t++],p=n[t++],v=((o&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(v>>10)),e[s++]=String.fromCharCode(56320+(v&1023))}else{const c=n[t++],d=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},jb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const c=n[o],d=o+1<n.length,p=d?n[o+1]:0,v=o+2<n.length,g=v?n[o+2]:0,_=c>>2,T=(c&3)<<4|p>>4;let x=(p&15)<<2|g>>6,w=g&63;v||(w=64,d||(x=64)),s.push(t[_],t[T],t[x],t[w])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Cb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):MN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const c=t[n.charAt(o++)],p=o<n.length?t[n.charAt(o)]:0;++o;const g=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,c==null||p==null||g==null||T==null)throw new LN;const x=c<<2|p>>4;if(s.push(x),g!==64){const w=p<<4&240|g>>2;if(s.push(w),T!==64){const I=g<<6&192|T;s.push(I)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class LN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kN=function(n){const e=Cb(n);return jb.encodeByteArray(e,!0)},Nh=function(n){return kN(n).replace(/\./g,"")},Db=function(n){try{return jb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function UN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const zN=()=>UN().__FIREBASE_DEFAULTS__,BN=()=>{if(typeof process>"u"||typeof wE>"u")return;const n=wE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},FN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Db(n[1]);return e&&JSON.parse(e)},Zh=()=>{try{return VN()||zN()||BN()||FN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ib=n=>Zh()?.emulatorHosts?.[n],Ob=n=>{const e=Ib(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Pb=()=>Zh()?.config,Vb=n=>Zh()?.[`_${n}`];class qN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function Ks(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Vg(n){return(await fetch(n,{credentials:"include"})).ok}function Mb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Nh(JSON.stringify(t)),Nh(JSON.stringify(d)),""].join(".")}const zc={};function HN(){const n={prod:[],emulator:[]};for(const e of Object.keys(zc))zc[e]?n.emulator.push(e):n.prod.push(e);return n}function GN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let SE=!1;function Mg(n,e){if(typeof window>"u"||typeof document>"u"||!Ks(window.location.host)||zc[n]===e||zc[n]||SE)return;zc[n]=e;function t(x){return`__firebase__banner__${x}`}const s="__firebase__banner",c=HN().prod.length>0;function d(){const x=document.getElementById(s);x&&x.remove()}function p(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function v(x,w){x.setAttribute("width","24"),x.setAttribute("id",w),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function g(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{SE=!0,d()},x}function _(x,w){x.setAttribute("id",w),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function T(){const x=GN(s),w=t("text"),I=document.getElementById(w)||document.createElement("span"),U=t("learnmore"),L=document.getElementById(U)||document.createElement("a"),q=t("preprendIcon"),X=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const F=x.element;p(F),_(L,U);const oe=g();v(X,q),F.append(X,I,L,oe),document.body.appendChild(F)}c?(I.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $N(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function QN(){const n=Zh()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function XN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JN(){const n=hn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function WN(){return!QN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZN(){try{return typeof indexedDB=="object"}catch{return!1}}function eA(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const tA="FirebaseError";class lr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=tA,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,su.prototype.create)}}class su{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?nA(c,s):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new lr(o,p,s)}}function nA(n,e){return n.replace(aA,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const aA=/\{\$([^}]+)}/g;function rA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ki(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const c=n[o],d=e[o];if(NE(c)&&NE(d)){if(!ki(c,d))return!1}else if(c!==d)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function NE(n){return n!==null&&typeof n=="object"}function iu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ic(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,c]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Oc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function sA(n,e){const t=new iA(n,e);return t.subscribe.bind(t)}class iA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");oA(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Dp),o.error===void 0&&(o.error=Dp),o.complete===void 0&&(o.complete=Dp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Dp(){}function ct(n){return n&&n._delegate?n._delegate:n}class Bs{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Di="[DEFAULT]";class lA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new qN;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uA(e))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=Di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Di){return this.instances.has(e)}getOptions(e=Di){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&d.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:cA(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Di){return this.component?this.component.multipleInstances?e:Di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cA(n){return n===Di?void 0:n}function uA(n){return n.instantiationMode==="EAGER"}class dA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ze||(ze={}));const hA={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},fA=ze.INFO,mA={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},pA=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=mA[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lg{constructor(e){this.name=e,this._logLevel=fA,this._logHandler=pA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const gA=(n,e)=>e.some(t=>n instanceof t);let AE,RE;function vA(){return AE||(AE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yA(){return RE||(RE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Lb=new WeakMap,Zp=new WeakMap,kb=new WeakMap,Ip=new WeakMap,kg=new WeakMap;function _A(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",c),n.removeEventListener("error",d)},c=()=>{t(Ms(n.result)),o()},d=()=>{s(n.error),o()};n.addEventListener("success",c),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Lb.set(t,n)}).catch(()=>{}),kg.set(e,n),e}function EA(n){if(Zp.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",d),n.removeEventListener("abort",d)},c=()=>{t(),o()},d=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",c),n.addEventListener("error",d),n.addEventListener("abort",d)});Zp.set(n,e)}let eg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Zp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||kb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ms(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bA(n){eg=n(eg)}function TA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Op(this),e,...t);return kb.set(s,e.sort?e.sort():[e]),Ms(s)}:yA().includes(n)?function(...e){return n.apply(Op(this),e),Ms(Lb.get(this))}:function(...e){return Ms(n.apply(Op(this),e))}}function xA(n){return typeof n=="function"?TA(n):(n instanceof IDBTransaction&&EA(n),gA(n,vA())?new Proxy(n,eg):n)}function Ms(n){if(n instanceof IDBRequest)return _A(n);if(Ip.has(n))return Ip.get(n);const e=xA(n);return e!==n&&(Ip.set(n,e),kg.set(e,n)),e}const Op=n=>kg.get(n);function wA(n,e,{blocked:t,upgrade:s,blocking:o,terminated:c}={}){const d=indexedDB.open(n,e),p=Ms(d);return s&&d.addEventListener("upgradeneeded",v=>{s(Ms(d.result),v.oldVersion,v.newVersion,Ms(d.transaction),v)}),t&&d.addEventListener("blocked",v=>t(v.oldVersion,v.newVersion,v)),p.then(v=>{c&&v.addEventListener("close",()=>c()),o&&v.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const SA=["get","getKey","getAll","getAllKeys","count"],NA=["put","add","delete","clear"],Pp=new Map;function CE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Pp.get(e))return Pp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=NA.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||SA.includes(t)))return;const c=async function(d,...p){const v=this.transaction(d,o?"readwrite":"readonly");let g=v.store;return s&&(g=g.index(p.shift())),(await Promise.all([g[t](...p),o&&v.done]))[0]};return Pp.set(e,c),c}bA(n=>({...n,get:(e,t,s)=>CE(e,t)||n.get(e,t,s),has:(e,t)=>!!CE(e,t)||n.has(e,t)}));class AA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(RA(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function RA(n){return n.getComponent()?.type==="VERSION"}const tg="@firebase/app",jE="0.14.6";const Mr=new Lg("@firebase/app"),CA="@firebase/app-compat",jA="@firebase/analytics-compat",DA="@firebase/analytics",IA="@firebase/app-check-compat",OA="@firebase/app-check",PA="@firebase/auth",VA="@firebase/auth-compat",MA="@firebase/database",LA="@firebase/data-connect",kA="@firebase/database-compat",UA="@firebase/functions",zA="@firebase/functions-compat",BA="@firebase/installations",FA="@firebase/installations-compat",qA="@firebase/messaging",HA="@firebase/messaging-compat",GA="@firebase/performance",$A="@firebase/performance-compat",QA="@firebase/remote-config",YA="@firebase/remote-config-compat",KA="@firebase/storage",XA="@firebase/storage-compat",JA="@firebase/firestore",WA="@firebase/ai",ZA="@firebase/firestore-compat",eR="firebase",tR="12.6.0";const ng="[DEFAULT]",nR={[tg]:"fire-core",[CA]:"fire-core-compat",[DA]:"fire-analytics",[jA]:"fire-analytics-compat",[OA]:"fire-app-check",[IA]:"fire-app-check-compat",[PA]:"fire-auth",[VA]:"fire-auth-compat",[MA]:"fire-rtdb",[LA]:"fire-data-connect",[kA]:"fire-rtdb-compat",[UA]:"fire-fn",[zA]:"fire-fn-compat",[BA]:"fire-iid",[FA]:"fire-iid-compat",[qA]:"fire-fcm",[HA]:"fire-fcm-compat",[GA]:"fire-perf",[$A]:"fire-perf-compat",[QA]:"fire-rc",[YA]:"fire-rc-compat",[KA]:"fire-gcs",[XA]:"fire-gcs-compat",[JA]:"fire-fst",[ZA]:"fire-fst-compat",[WA]:"fire-vertex","fire-js":"fire-js",[eR]:"fire-js-all"};const Ah=new Map,aR=new Map,ag=new Map;function DE(n,e){try{n.container.addComponent(e)}catch(t){Mr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ui(n){const e=n.name;if(ag.has(e))return Mr.debug(`There were multiple attempts to register component ${e}.`),!1;ag.set(e,n);for(const t of Ah.values())DE(t,n);for(const t of aR.values())DE(t,n);return!0}function ef(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Fn(n){return n==null?!1:n.settings!==void 0}const rR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ls=new su("app","Firebase",rR);class sR{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ls.create("app-deleted",{appName:this._name})}}const Qi=tR;function Ub(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:ng,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ls.create("bad-app-name",{appName:String(o)});if(t||(t=Pb()),!t)throw Ls.create("no-options");const c=Ah.get(o);if(c){if(ki(t,c.options)&&ki(s,c.config))return c;throw Ls.create("duplicate-app",{appName:o})}const d=new dA(o);for(const v of ag.values())d.addComponent(v);const p=new sR(t,s,d);return Ah.set(o,p),p}function Ug(n=ng){const e=Ah.get(n);if(!e&&n===ng&&Pb())return Ub();if(!e)throw Ls.create("no-app",{appName:n});return e}function Za(n,e,t){let s=nR[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mr.warn(d.join(" "));return}Ui(new Bs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const iR="firebase-heartbeat-database",oR=1,Yc="firebase-heartbeat-store";let Vp=null;function zb(){return Vp||(Vp=wA(iR,oR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ls.create("idb-open",{originalErrorMessage:n.message})})),Vp}async function lR(n){try{const t=(await zb()).transaction(Yc),s=await t.objectStore(Yc).get(Bb(n));return await t.done,s}catch(e){if(e instanceof lr)Mr.warn(e.message);else{const t=Ls.create("idb-get",{originalErrorMessage:e?.message});Mr.warn(t.message)}}}async function IE(n,e){try{const s=(await zb()).transaction(Yc,"readwrite");await s.objectStore(Yc).put(e,Bb(n)),await s.done}catch(t){if(t instanceof lr)Mr.warn(t.message);else{const s=Ls.create("idb-set",{originalErrorMessage:t?.message});Mr.warn(s.message)}}}function Bb(n){return`${n.name}!${n.options.appId}`}const cR=1024,uR=30;class dR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fR(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=OE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>uR){const o=mR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Mr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=OE(),{heartbeatsToSend:t,unsentEntries:s}=hR(this._heartbeatsCache.heartbeats),o=Nh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Mr.warn(e),""}}}function OE(){return new Date().toISOString().substring(0,10)}function hR(n,e=cR){const t=[];let s=n.slice();for(const o of n){const c=t.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),PE(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),PE(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class fR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZN()?eA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await lR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return IE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return IE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function PE(n){return Nh(JSON.stringify({version:2,heartbeats:n})).length}function mR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}function pR(n){Ui(new Bs("platform-logger",e=>new AA(e),"PRIVATE")),Ui(new Bs("heartbeat",e=>new dR(e),"PRIVATE")),Za(tg,jE,n),Za(tg,jE,"esm2020"),Za("fire-js","")}pR("");var gR="firebase",vR="12.6.0";Za(gR,vR,"app");var VE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ks,Fb;(function(){var n;function e(A,D){function S(){}S.prototype=D.prototype,A.F=D.prototype,A.prototype=new S,A.prototype.constructor=A,A.D=function(j,M,z){for(var C=Array(arguments.length-2),De=2;De<arguments.length;De++)C[De-2]=arguments[De];return D.prototype[M].apply(j,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(A,D,S){S||(S=0);const j=Array(16);if(typeof D=="string")for(var M=0;M<16;++M)j[M]=D.charCodeAt(S++)|D.charCodeAt(S++)<<8|D.charCodeAt(S++)<<16|D.charCodeAt(S++)<<24;else for(M=0;M<16;++M)j[M]=D[S++]|D[S++]<<8|D[S++]<<16|D[S++]<<24;D=A.g[0],S=A.g[1],M=A.g[2];let z=A.g[3],C;C=D+(z^S&(M^z))+j[0]+3614090360&4294967295,D=S+(C<<7&4294967295|C>>>25),C=z+(M^D&(S^M))+j[1]+3905402710&4294967295,z=D+(C<<12&4294967295|C>>>20),C=M+(S^z&(D^S))+j[2]+606105819&4294967295,M=z+(C<<17&4294967295|C>>>15),C=S+(D^M&(z^D))+j[3]+3250441966&4294967295,S=M+(C<<22&4294967295|C>>>10),C=D+(z^S&(M^z))+j[4]+4118548399&4294967295,D=S+(C<<7&4294967295|C>>>25),C=z+(M^D&(S^M))+j[5]+1200080426&4294967295,z=D+(C<<12&4294967295|C>>>20),C=M+(S^z&(D^S))+j[6]+2821735955&4294967295,M=z+(C<<17&4294967295|C>>>15),C=S+(D^M&(z^D))+j[7]+4249261313&4294967295,S=M+(C<<22&4294967295|C>>>10),C=D+(z^S&(M^z))+j[8]+1770035416&4294967295,D=S+(C<<7&4294967295|C>>>25),C=z+(M^D&(S^M))+j[9]+2336552879&4294967295,z=D+(C<<12&4294967295|C>>>20),C=M+(S^z&(D^S))+j[10]+4294925233&4294967295,M=z+(C<<17&4294967295|C>>>15),C=S+(D^M&(z^D))+j[11]+2304563134&4294967295,S=M+(C<<22&4294967295|C>>>10),C=D+(z^S&(M^z))+j[12]+1804603682&4294967295,D=S+(C<<7&4294967295|C>>>25),C=z+(M^D&(S^M))+j[13]+4254626195&4294967295,z=D+(C<<12&4294967295|C>>>20),C=M+(S^z&(D^S))+j[14]+2792965006&4294967295,M=z+(C<<17&4294967295|C>>>15),C=S+(D^M&(z^D))+j[15]+1236535329&4294967295,S=M+(C<<22&4294967295|C>>>10),C=D+(M^z&(S^M))+j[1]+4129170786&4294967295,D=S+(C<<5&4294967295|C>>>27),C=z+(S^M&(D^S))+j[6]+3225465664&4294967295,z=D+(C<<9&4294967295|C>>>23),C=M+(D^S&(z^D))+j[11]+643717713&4294967295,M=z+(C<<14&4294967295|C>>>18),C=S+(z^D&(M^z))+j[0]+3921069994&4294967295,S=M+(C<<20&4294967295|C>>>12),C=D+(M^z&(S^M))+j[5]+3593408605&4294967295,D=S+(C<<5&4294967295|C>>>27),C=z+(S^M&(D^S))+j[10]+38016083&4294967295,z=D+(C<<9&4294967295|C>>>23),C=M+(D^S&(z^D))+j[15]+3634488961&4294967295,M=z+(C<<14&4294967295|C>>>18),C=S+(z^D&(M^z))+j[4]+3889429448&4294967295,S=M+(C<<20&4294967295|C>>>12),C=D+(M^z&(S^M))+j[9]+568446438&4294967295,D=S+(C<<5&4294967295|C>>>27),C=z+(S^M&(D^S))+j[14]+3275163606&4294967295,z=D+(C<<9&4294967295|C>>>23),C=M+(D^S&(z^D))+j[3]+4107603335&4294967295,M=z+(C<<14&4294967295|C>>>18),C=S+(z^D&(M^z))+j[8]+1163531501&4294967295,S=M+(C<<20&4294967295|C>>>12),C=D+(M^z&(S^M))+j[13]+2850285829&4294967295,D=S+(C<<5&4294967295|C>>>27),C=z+(S^M&(D^S))+j[2]+4243563512&4294967295,z=D+(C<<9&4294967295|C>>>23),C=M+(D^S&(z^D))+j[7]+1735328473&4294967295,M=z+(C<<14&4294967295|C>>>18),C=S+(z^D&(M^z))+j[12]+2368359562&4294967295,S=M+(C<<20&4294967295|C>>>12),C=D+(S^M^z)+j[5]+4294588738&4294967295,D=S+(C<<4&4294967295|C>>>28),C=z+(D^S^M)+j[8]+2272392833&4294967295,z=D+(C<<11&4294967295|C>>>21),C=M+(z^D^S)+j[11]+1839030562&4294967295,M=z+(C<<16&4294967295|C>>>16),C=S+(M^z^D)+j[14]+4259657740&4294967295,S=M+(C<<23&4294967295|C>>>9),C=D+(S^M^z)+j[1]+2763975236&4294967295,D=S+(C<<4&4294967295|C>>>28),C=z+(D^S^M)+j[4]+1272893353&4294967295,z=D+(C<<11&4294967295|C>>>21),C=M+(z^D^S)+j[7]+4139469664&4294967295,M=z+(C<<16&4294967295|C>>>16),C=S+(M^z^D)+j[10]+3200236656&4294967295,S=M+(C<<23&4294967295|C>>>9),C=D+(S^M^z)+j[13]+681279174&4294967295,D=S+(C<<4&4294967295|C>>>28),C=z+(D^S^M)+j[0]+3936430074&4294967295,z=D+(C<<11&4294967295|C>>>21),C=M+(z^D^S)+j[3]+3572445317&4294967295,M=z+(C<<16&4294967295|C>>>16),C=S+(M^z^D)+j[6]+76029189&4294967295,S=M+(C<<23&4294967295|C>>>9),C=D+(S^M^z)+j[9]+3654602809&4294967295,D=S+(C<<4&4294967295|C>>>28),C=z+(D^S^M)+j[12]+3873151461&4294967295,z=D+(C<<11&4294967295|C>>>21),C=M+(z^D^S)+j[15]+530742520&4294967295,M=z+(C<<16&4294967295|C>>>16),C=S+(M^z^D)+j[2]+3299628645&4294967295,S=M+(C<<23&4294967295|C>>>9),C=D+(M^(S|~z))+j[0]+4096336452&4294967295,D=S+(C<<6&4294967295|C>>>26),C=z+(S^(D|~M))+j[7]+1126891415&4294967295,z=D+(C<<10&4294967295|C>>>22),C=M+(D^(z|~S))+j[14]+2878612391&4294967295,M=z+(C<<15&4294967295|C>>>17),C=S+(z^(M|~D))+j[5]+4237533241&4294967295,S=M+(C<<21&4294967295|C>>>11),C=D+(M^(S|~z))+j[12]+1700485571&4294967295,D=S+(C<<6&4294967295|C>>>26),C=z+(S^(D|~M))+j[3]+2399980690&4294967295,z=D+(C<<10&4294967295|C>>>22),C=M+(D^(z|~S))+j[10]+4293915773&4294967295,M=z+(C<<15&4294967295|C>>>17),C=S+(z^(M|~D))+j[1]+2240044497&4294967295,S=M+(C<<21&4294967295|C>>>11),C=D+(M^(S|~z))+j[8]+1873313359&4294967295,D=S+(C<<6&4294967295|C>>>26),C=z+(S^(D|~M))+j[15]+4264355552&4294967295,z=D+(C<<10&4294967295|C>>>22),C=M+(D^(z|~S))+j[6]+2734768916&4294967295,M=z+(C<<15&4294967295|C>>>17),C=S+(z^(M|~D))+j[13]+1309151649&4294967295,S=M+(C<<21&4294967295|C>>>11),C=D+(M^(S|~z))+j[4]+4149444226&4294967295,D=S+(C<<6&4294967295|C>>>26),C=z+(S^(D|~M))+j[11]+3174756917&4294967295,z=D+(C<<10&4294967295|C>>>22),C=M+(D^(z|~S))+j[2]+718787259&4294967295,M=z+(C<<15&4294967295|C>>>17),C=S+(z^(M|~D))+j[9]+3951481745&4294967295,A.g[0]=A.g[0]+D&4294967295,A.g[1]=A.g[1]+(M+(C<<21&4294967295|C>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+z&4294967295}s.prototype.v=function(A,D){D===void 0&&(D=A.length);const S=D-this.blockSize,j=this.C;let M=this.h,z=0;for(;z<D;){if(M==0)for(;z<=S;)o(this,A,z),z+=this.blockSize;if(typeof A=="string"){for(;z<D;)if(j[M++]=A.charCodeAt(z++),M==this.blockSize){o(this,j),M=0;break}}else for(;z<D;)if(j[M++]=A[z++],M==this.blockSize){o(this,j),M=0;break}}this.h=M,this.o+=D},s.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var D=1;D<A.length-8;++D)A[D]=0;D=this.o*8;for(var S=A.length-8;S<A.length;++S)A[S]=D&255,D/=256;for(this.v(A),A=Array(16),D=0,S=0;S<4;++S)for(let j=0;j<32;j+=8)A[D++]=this.g[S]>>>j&255;return A};function c(A,D){var S=p;return Object.prototype.hasOwnProperty.call(S,A)?S[A]:S[A]=D(A)}function d(A,D){this.h=D;const S=[];let j=!0;for(let M=A.length-1;M>=0;M--){const z=A[M]|0;j&&z==D||(S[M]=z,j=!1)}this.g=S}var p={};function v(A){return-128<=A&&A<128?c(A,function(D){return new d([D|0],D<0?-1:0)}):new d([A|0],A<0?-1:0)}function g(A){if(isNaN(A)||!isFinite(A))return T;if(A<0)return L(g(-A));const D=[];let S=1;for(let j=0;A>=S;j++)D[j]=A/S|0,S*=4294967296;return new d(D,0)}function _(A,D){if(A.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(A.charAt(0)=="-")return L(_(A.substring(1),D));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=g(Math.pow(D,8));let j=T;for(let z=0;z<A.length;z+=8){var M=Math.min(8,A.length-z);const C=parseInt(A.substring(z,z+M),D);M<8?(M=g(Math.pow(D,M)),j=j.j(M).add(g(C))):(j=j.j(S),j=j.add(g(C)))}return j}var T=v(0),x=v(1),w=v(16777216);n=d.prototype,n.m=function(){if(U(this))return-L(this).m();let A=0,D=1;for(let S=0;S<this.g.length;S++){const j=this.i(S);A+=(j>=0?j:4294967296+j)*D,D*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(I(this))return"0";if(U(this))return"-"+L(this).toString(A);const D=g(Math.pow(A,6));var S=this;let j="";for(;;){const M=oe(S,D).g;S=q(S,M.j(D));let z=((S.g.length>0?S.g[0]:S.h)>>>0).toString(A);if(S=M,I(S))return z+j;for(;z.length<6;)z="0"+z;j=z+j}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function I(A){if(A.h!=0)return!1;for(let D=0;D<A.g.length;D++)if(A.g[D]!=0)return!1;return!0}function U(A){return A.h==-1}n.l=function(A){return A=q(this,A),U(A)?-1:I(A)?0:1};function L(A){const D=A.g.length,S=[];for(let j=0;j<D;j++)S[j]=~A.g[j];return new d(S,~A.h).add(x)}n.abs=function(){return U(this)?L(this):this},n.add=function(A){const D=Math.max(this.g.length,A.g.length),S=[];let j=0;for(let M=0;M<=D;M++){let z=j+(this.i(M)&65535)+(A.i(M)&65535),C=(z>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);j=C>>>16,z&=65535,C&=65535,S[M]=C<<16|z}return new d(S,S[S.length-1]&-2147483648?-1:0)};function q(A,D){return A.add(L(D))}n.j=function(A){if(I(this)||I(A))return T;if(U(this))return U(A)?L(this).j(L(A)):L(L(this).j(A));if(U(A))return L(this.j(L(A)));if(this.l(w)<0&&A.l(w)<0)return g(this.m()*A.m());const D=this.g.length+A.g.length,S=[];for(var j=0;j<2*D;j++)S[j]=0;for(j=0;j<this.g.length;j++)for(let M=0;M<A.g.length;M++){const z=this.i(j)>>>16,C=this.i(j)&65535,De=A.i(M)>>>16,it=A.i(M)&65535;S[2*j+2*M]+=C*it,X(S,2*j+2*M),S[2*j+2*M+1]+=z*it,X(S,2*j+2*M+1),S[2*j+2*M+1]+=C*De,X(S,2*j+2*M+1),S[2*j+2*M+2]+=z*De,X(S,2*j+2*M+2)}for(A=0;A<D;A++)S[A]=S[2*A+1]<<16|S[2*A];for(A=D;A<2*D;A++)S[A]=0;return new d(S,0)};function X(A,D){for(;(A[D]&65535)!=A[D];)A[D+1]+=A[D]>>>16,A[D]&=65535,D++}function F(A,D){this.g=A,this.h=D}function oe(A,D){if(I(D))throw Error("division by zero");if(I(A))return new F(T,T);if(U(A))return D=oe(L(A),D),new F(L(D.g),L(D.h));if(U(D))return D=oe(A,L(D)),new F(L(D.g),D.h);if(A.g.length>30){if(U(A)||U(D))throw Error("slowDivide_ only works with positive integers.");for(var S=x,j=D;j.l(A)<=0;)S=ce(S),j=ce(j);var M=ue(S,1),z=ue(j,1);for(j=ue(j,2),S=ue(S,2);!I(j);){var C=z.add(j);C.l(A)<=0&&(M=M.add(S),z=C),j=ue(j,1),S=ue(S,1)}return D=q(A,M.j(D)),new F(M,D)}for(M=T;A.l(D)>=0;){for(S=Math.max(1,Math.floor(A.m()/D.m())),j=Math.ceil(Math.log(S)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),z=g(S),C=z.j(D);U(C)||C.l(A)>0;)S-=j,z=g(S),C=z.j(D);I(z)&&(z=x),M=M.add(z),A=q(A,C)}return new F(M,A)}n.B=function(A){return oe(this,A).h},n.and=function(A){const D=Math.max(this.g.length,A.g.length),S=[];for(let j=0;j<D;j++)S[j]=this.i(j)&A.i(j);return new d(S,this.h&A.h)},n.or=function(A){const D=Math.max(this.g.length,A.g.length),S=[];for(let j=0;j<D;j++)S[j]=this.i(j)|A.i(j);return new d(S,this.h|A.h)},n.xor=function(A){const D=Math.max(this.g.length,A.g.length),S=[];for(let j=0;j<D;j++)S[j]=this.i(j)^A.i(j);return new d(S,this.h^A.h)};function ce(A){const D=A.g.length+1,S=[];for(let j=0;j<D;j++)S[j]=A.i(j)<<1|A.i(j-1)>>>31;return new d(S,A.h)}function ue(A,D){const S=D>>5;D%=32;const j=A.g.length-S,M=[];for(let z=0;z<j;z++)M[z]=D>0?A.i(z+S)>>>D|A.i(z+S+1)<<32-D:A.i(z+S);return new d(M,A.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Fb=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=_,ks=d}).apply(typeof VE<"u"?VE:typeof self<"u"?self:typeof window<"u"?window:{});var Zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var qb,Pc,Hb,fh,rg,Gb,$b,Qb;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zd=="object"&&Zd];for(var y=0;y<h.length;++y){var b=h[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var s=t(this);function o(h,y){if(y)e:{var b=s;h=h.split(".");for(var R=0;R<h.length-1;R++){var H=h[R];if(!(H in b))break e;b=b[H]}h=h[h.length-1],R=b[h],y=y(R),y!=R&&y!=null&&e(b,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var b=[],R;for(R in y)Object.prototype.hasOwnProperty.call(y,R)&&b.push([R,y[R]]);return b}});var c=c||{},d=this||self;function p(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function v(h,y,b){return h.call.apply(h.bind,arguments)}function g(h,y,b){return g=v,g.apply(null,arguments)}function _(h,y){var b=Array.prototype.slice.call(arguments,1);return function(){var R=b.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function T(h,y){function b(){}b.prototype=y.prototype,h.Z=y.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(R,H,K){for(var de=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)de[Ce-2]=arguments[Ce];return y.prototype[H].apply(R,de)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function w(h){const y=h.length;if(y>0){const b=Array(y);for(let R=0;R<y;R++)b[R]=h[R];return b}return[]}function I(h,y){for(let R=1;R<arguments.length;R++){const H=arguments[R];var b=typeof H;if(b=b!="object"?b:H?Array.isArray(H)?"array":b:"null",b=="array"||b=="object"&&typeof H.length=="number"){b=h.length||0;const K=H.length||0;h.length=b+K;for(let de=0;de<K;de++)h[b+de]=H[de]}else h.push(H)}}class U{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function L(h){d.setTimeout(()=>{throw h},0)}function q(){var h=A;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class X{constructor(){this.h=this.g=null}add(y,b){const R=F.get();R.set(y,b),this.h?this.h.next=R:this.g=R,this.h=R}}var F=new U(()=>new oe,h=>h.reset());class oe{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,ue=!1,A=new X,D=()=>{const h=Promise.resolve(void 0);ce=()=>{h.then(S)}};function S(){for(var h;h=q();){try{h.h.call(h.g)}catch(b){L(b)}var y=F;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ue=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};d.addEventListener("test",b,y),d.removeEventListener("test",b,y)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function De(h,y){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}T(De,M),De.prototype.init=function(h,y){const b=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(b=="mouseover"?y=h.fromElement:b=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&De.Z.h.call(this)},De.prototype.h=function(){De.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var it="closure_listenable_"+(Math.random()*1e6|0),Z=0;function le(h,y,b,R,H){this.listener=h,this.proxy=null,this.src=y,this.type=b,this.capture=!!R,this.ha=H,this.key=++Z,this.da=this.fa=!1}function ge(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ne(h,y,b){for(const R in h)y.call(b,h[R],R,h)}function J(h,y){for(const b in h)y.call(void 0,h[b],b,h)}function P(h){const y={};for(const b in h)y[b]=h[b];return y}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(h,y){let b,R;for(let H=1;H<arguments.length;H++){R=arguments[H];for(b in R)h[b]=R[b];for(let K=0;K<te.length;K++)b=te[K],Object.prototype.hasOwnProperty.call(R,b)&&(h[b]=R[b])}}function he(h){this.src=h,this.g={},this.h=0}he.prototype.add=function(h,y,b,R,H){const K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);const de=Ie(h,y,R,H);return de>-1?(y=h[de],b||(y.fa=!1)):(y=new le(y,this.src,K,!!R,H),y.fa=b,h.push(y)),y};function xe(h,y){const b=y.type;if(b in h.g){var R=h.g[b],H=Array.prototype.indexOf.call(R,y,void 0),K;(K=H>=0)&&Array.prototype.splice.call(R,H,1),K&&(ge(y),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Ie(h,y,b,R){for(let H=0;H<h.length;++H){const K=h[H];if(!K.da&&K.listener==y&&K.capture==!!b&&K.ha==R)return H}return-1}var He="closure_lm_"+(Math.random()*1e6|0),Ft={};function ft(h,y,b,R,H){if(Array.isArray(y)){for(let K=0;K<y.length;K++)ft(h,y[K],b,R,H);return null}return b=Tl(b),h&&h[it]?h.J(y,b,p(R)?!!R.capture:!1,H):Zs(h,y,b,!1,R,H)}function Zs(h,y,b,R,H,K){if(!y)throw Error("Invalid event type");const de=p(H)?!!H.capture:!!H;let Ce=ei(h);if(Ce||(h[He]=Ce=new he(h)),b=Ce.add(y,b,R,de,K),b.proxy)return b;if(R=Wi(),b.proxy=R,R.src=h,R.listener=b,h.addEventListener)z||(H=de),H===void 0&&(H=!1),h.addEventListener(y.toString(),R,H);else if(h.attachEvent)h.attachEvent(Aa(y.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Wi(){function h(b){return y.call(h.src,h.listener,b)}const y=El;return h}function Zi(h,y,b,R,H){if(Array.isArray(y))for(var K=0;K<y.length;K++)Zi(h,y[K],b,R,H);else R=p(R)?!!R.capture:!!R,b=Tl(b),h&&h[it]?(h=h.i,K=String(y).toString(),K in h.g&&(y=h.g[K],b=Ie(y,b,R,H),b>-1&&(ge(y[b]),Array.prototype.splice.call(y,b,1),y.length==0&&(delete h.g[K],h.h--)))):h&&(h=ei(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ie(y,b,R,H)),(b=h>-1?y[h]:null)&&eo(b))}function eo(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[it])xe(y.i,h);else{var b=h.type,R=h.proxy;y.removeEventListener?y.removeEventListener(b,R,h.capture):y.detachEvent?y.detachEvent(Aa(b),R):y.addListener&&y.removeListener&&y.removeListener(R),(b=ei(y))?(xe(b,h),b.h==0&&(b.src=null,y[He]=null)):ge(h)}}}function Aa(h){return h in Ft?Ft[h]:Ft[h]="on"+h}function El(h,y){if(h.da)h=!0;else{y=new De(y,this);const b=h.listener,R=h.ha||h.src;h.fa&&eo(h),h=b.call(R,y)}return h}function ei(h){return h=h[He],h instanceof he?h:null}var bl="__closure_events_fn_"+(Math.random()*1e9>>>0);function Tl(h){return typeof h=="function"?h:(h[bl]||(h[bl]=function(y){return h.handleEvent(y)}),h[bl])}function jt(){j.call(this),this.i=new he(this),this.M=this,this.G=null}T(jt,j),jt.prototype[it]=!0,jt.prototype.removeEventListener=function(h,y,b,R){Zi(this,h,y,b,R)};function qt(h,y){var b,R=h.G;if(R)for(b=[];R;R=R.G)b.push(R);if(h=h.M,R=y.type||y,typeof y=="string")y=new M(y,h);else if(y instanceof M)y.target=y.target||h;else{var H=y;y=new M(R,h),G(y,H)}H=!0;let K,de;if(b)for(de=b.length-1;de>=0;de--)K=y.g=b[de],H=Qr(K,R,!0,y)&&H;if(K=y.g=h,H=Qr(K,R,!0,y)&&H,H=Qr(K,R,!1,y)&&H,b)for(de=0;de<b.length;de++)K=y.g=b[de],H=Qr(K,R,!1,y)&&H}jt.prototype.N=function(){if(jt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const b=h.g[y];for(let R=0;R<b.length;R++)ge(b[R]);delete h.g[y],h.h--}}this.G=null},jt.prototype.J=function(h,y,b,R){return this.i.add(String(h),y,!1,b,R)},jt.prototype.K=function(h,y,b,R){return this.i.add(String(h),y,!0,b,R)};function Qr(h,y,b,R){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let K=0;K<y.length;++K){const de=y[K];if(de&&!de.da&&de.capture==b){const Ce=de.listener,wt=de.ha||de.src;de.fa&&xe(h.i,de),H=Ce.call(wt,R)!==!1&&H}}return H&&!R.defaultPrevented}function Af(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(h,y||0)}function wu(h){h.g=Af(()=>{h.g=null,h.i&&(h.i=!1,wu(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class fn extends j{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:wu(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ti(h){j.call(this),this.h=h,this.g={}}T(ti,j);var xl=[];function wl(h){ne(h.g,function(y,b){this.g.hasOwnProperty(b)&&eo(y)},h),h.g={}}ti.prototype.N=function(){ti.Z.N.call(this),wl(this)},ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yr=d.JSON.stringify,Rf=d.JSON.parse,Su=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Nu(){}function Au(){}var la={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){M.call(this,"d")}T(Jt,M);function Gn(){M.call(this,"c")}T(Gn,M);var xt={},Ru=null;function to(){return Ru=Ru||new jt}xt.Ia="serverreachability";function Cu(h){M.call(this,xt.Ia,h)}T(Cu,M);function Ra(h){const y=to();qt(y,new Cu(y))}xt.STAT_EVENT="statevent";function ni(h,y){M.call(this,xt.STAT_EVENT,h),this.stat=y}T(ni,M);function Dt(h){const y=to();qt(y,new ni(y,h))}xt.Ja="timingevent";function Ca(h,y){M.call(this,xt.Ja,h),this.size=y}T(Ca,M);function ja(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function ca(){this.g=!0}ca.prototype.ua=function(){this.g=!1};function Cf(h,y,b,R,H,K){h.info(function(){if(h.g)if(K){var de="",Ce=K.split("&");for(let Ye=0;Ye<Ce.length;Ye++){var wt=Ce[Ye].split("=");if(wt.length>1){const mt=wt[0];wt=wt[1];const Kn=mt.split("_");de=Kn.length>=2&&Kn[1]=="type"?de+(mt+"="+wt+"&"):de+(mt+"=redacted&")}}}else de=null;else de=K;return"XMLHTTP REQ ("+R+") [attempt "+H+"]: "+y+`
`+b+`
`+de})}function ju(h,y,b,R,H,K,de){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+H+"]: "+y+`
`+b+`
`+K+" "+de})}function Da(h,y,b,R){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+jf(h,b)+(R?" "+R:"")})}function ai(h,y){h.info(function(){return"TIMEOUT: "+y})}ca.prototype.info=function(){};function jf(h,y){if(!h.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(h=0;h<K.length;h++)if(Array.isArray(K[h])){var b=K[h];if(!(b.length<2)){var R=b[1];if(Array.isArray(R)&&!(R.length<1)){var H=R[0];if(H!="noop"&&H!="stop"&&H!="close")for(let de=1;de<R.length;de++)R[de]=""}}}}return Yr(K)}catch{return y}}var ri={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Sl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Nl;function si(){}T(si,Nu),si.prototype.g=function(){return new XMLHttpRequest},Nl=new si;function ur(h){return encodeURIComponent(String(h))}function Du(h){var y=1;h=h.split(":");const b=[];for(;y>0&&h.length;)b.push(h.shift()),y--;return h.length&&b.push(h.join(":")),b}function ua(h,y,b,R){this.j=h,this.i=y,this.l=b,this.S=R||1,this.V=new ti(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new da}function da(){this.i=null,this.g="",this.h=!1}var It={},Qt={};function Ia(h,y,b){h.M=1,h.A=ii(Pt(y)),h.u=b,h.R=!0,no(h,null)}function no(h,y){h.F=Date.now(),Oa(h),h.B=Pt(h.A);var b=h.B,R=h.S;Array.isArray(R)||(R=[String(R)]),io(b.i,"t",R),h.C=0,b=h.j.L,h.h=new da,h.g=$u(h.j,b?y:null,!h.u),h.P>0&&(h.O=new fn(g(h.Y,h,h.g),h.P)),y=h.V,b=h.g,R=h.ba;var H="readystatechange";Array.isArray(H)||(H&&(xl[0]=H.toString()),H=xl);for(let K=0;K<H.length;K++){const de=ft(b,H[K],R||y.handleEvent,!1,y.h||y);if(!de)break;y.g[de.key]=de}y=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Ra(),Cf(h.i,h.v,h.B,h.l,h.S,h.u)}ua.prototype.ba=function(h){h=h.target;const y=this.O;y&&ma(h)==3?y.j():this.Y(h)},ua.prototype.Y=function(h){try{if(h==this.g)e:{const Ce=ma(this.g),wt=this.g.ya(),Ye=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||Wt(this.g)))){this.K||Ce!=4||wt==7||(wt==8||Ye<=0?Ra(3):Ra(2)),Pa(this);var y=this.g.ca();this.X=y;var b=Df(this);if(this.o=y==200,ju(this.i,this.v,this.B,this.l,this.S,Ce,y),this.o){if(this.U&&!this.L){t:{if(this.g){var R,H=this.g;if((R=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(R)){var K=R;break t}}K=null}if(h=K)Da(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Va(this,h);else{this.o=!1,this.m=3,Dt(12),On(this),$n(this);break e}}if(this.R){h=!0;let mt;for(;!this.K&&this.C<b.length;)if(mt=Ou(this,b),mt==Qt){Ce==4&&(this.m=4,Dt(14),h=!1),Da(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==It){this.m=4,Dt(15),Da(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else Da(this.i,this.l,mt,null),Va(this,mt);if(Iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||b.length!=0||this.h.h||(this.m=1,Dt(16),h=!1),this.o=this.o&&h,!h)Da(this.i,this.l,b,"[Invalid Chunked Response]"),On(this),$n(this);else if(b.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Bl(de),de.P=!0,Dt(11))}}else Da(this.i,this.l,b,null),Va(this,b);Ce==4&&On(this),this.o&&!this.K&&(Ce==4?Fu(this.j,this):(this.o=!1,Oa(this)))}else hr(this.g),y==400&&b.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),On(this),$n(this)}}}catch{}finally{}};function Df(h){if(!Iu(h))return h.g.la();const y=Wt(h.g);if(y==="")return"";let b="";const R=y.length,H=ma(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return On(h),$n(h),"";h.h.i=new d.TextDecoder}for(let K=0;K<R;K++)h.h.h=!0,b+=h.h.i.decode(y[K],{stream:!(H&&K==R-1)});return y.length=0,h.h.g+=b,h.C=0,h.h.g}function Iu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ou(h,y){var b=h.C,R=y.indexOf(`
`,b);return R==-1?Qt:(b=Number(y.substring(b,R)),isNaN(b)?It:(R+=1,R+b>y.length?Qt:(y=y.slice(R,R+b),h.C=R+b,y)))}ua.prototype.cancel=function(){this.K=!0,On(this)};function Oa(h){h.T=Date.now()+h.H,ao(h,h.H)}function ao(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=ja(g(h.aa,h),y)}function Pa(h){h.D&&(d.clearTimeout(h.D),h.D=null)}ua.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(ai(this.i,this.B),this.M!=2&&(Ra(),Dt(17)),On(this),this.m=2,$n(this)):ao(this,this.T-h)};function $n(h){h.j.I==0||h.K||Fu(h.j,h)}function On(h){Pa(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,wl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Va(h,y){try{var b=h.j;if(b.I!=0&&(b.g==h||La(b.h,h))){if(!h.L&&La(b.h,h)&&b.I==3){try{var R=b.Ba.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var H=R;if(H[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)ho(b),ns(b);else break e;fi(b),Dt(18)}}else b.xa=H[1],0<b.xa-b.K&&H[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=ja(g(b.Va,b),6e3));Ma(b.h)<=1&&b.ta&&(b.ta=void 0)}else qa(b,11)}else if((h.L||b.g==h)&&ho(b),!C(y))for(H=b.Ba.g.parse(y),y=0;y<H.length;y++){let Ye=H[y];const mt=Ye[0];if(!(mt<=b.K))if(b.K=mt,Ye=Ye[1],b.I==2)if(Ye[0]=="c"){b.M=Ye[1],b.ba=Ye[2];const Kn=Ye[3];Kn!=null&&(b.ka=Kn,b.j.info("VER="+b.ka));const Ha=Ye[4];Ha!=null&&(b.za=Ha,b.j.info("SVER="+b.za));const pa=Ye[5];pa!=null&&typeof pa=="number"&&pa>0&&(R=1.5*pa,b.O=R,b.j.info("backChannelRequestTimeoutMs_="+R)),R=b;const ga=h.g;if(ga){const mi=ga.g?ga.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mi){var K=R.h;K.g||mi.indexOf("spdy")==-1&&mi.indexOf("quic")==-1&&mi.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Cl(K,K.h),K.h=null))}if(R.G){const fo=ga.g?ga.g.getResponseHeader("X-HTTP-Session-Id"):null;fo&&(R.wa=fo,We(R.J,R.G,fo))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),R=b;var de=h;if(R.na=Gu(R,R.L?R.ba:null,R.W),de.L){jl(R.h,de);var Ce=de,wt=R.O;wt&&(Ce.H=wt),Ce.D&&(Pa(Ce),Oa(Ce)),R.g=de}else zu(R);b.i.length>0&&Fa(b)}else Ye[0]!="stop"&&Ye[0]!="close"||qa(b,7);else b.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?qa(b,7):Ul(b):Ye[0]!="noop"&&b.l&&b.l.qa(Ye),b.A=0)}}Ra(4)}catch{}}var Ot=class{constructor(h,y){this.g=h,this.map=y}};function Al(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Rl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ma(h){return h.h?1:h.g?h.g.size:0}function La(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Cl(h,y){h.g?h.g.add(y):h.h=y}function jl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Al.prototype.cancel=function(){if(this.i=Dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Dl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const b of h.g.values())y=y.concat(b.G);return y}return w(h.i)}var Pu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ro(h,y){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const R=h[b].indexOf("=");let H,K=null;R>=0?(H=h[b].substring(0,R),K=h[b].substring(R+1)):H=h[b],y(H,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Pn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Pn?(this.l=h.l,Yt(this,h.j),this.o=h.o,this.g=h.g,Kr(this,h.u),this.h=h.h,Il(this,ku(h.i)),this.m=h.m):h&&(y=String(h).match(Pu))?(this.l=!1,Yt(this,y[1]||"",!0),this.o=ka(y[2]||""),this.g=ka(y[3]||"",!0),Kr(this,y[4]),this.h=ka(y[5]||"",!0),Il(this,y[6]||"",!0),this.m=ka(y[7]||"")):(this.l=!1,this.i=new Jr(null,this.l))}Pn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(oi(y,so,!0),":");var b=this.g;return(b||y=="file")&&(h.push("//"),(y=this.o)&&h.push(oi(y,so,!0),"@"),h.push(ur(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(oi(b,b.charAt(0)=="/"?Ol:Vu,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",oi(b,Mu)),h.join("")},Pn.prototype.resolve=function(h){const y=Pt(this);let b=!!h.j;b?Yt(y,h.j):b=!!h.o,b?y.o=h.o:b=!!h.g,b?y.g=h.g:b=h.u!=null;var R=h.h;if(b)Kr(y,h.u);else if(b=!!h.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var H=y.h.lastIndexOf("/");H!=-1&&(R=y.h.slice(0,H+1)+R)}if(H=R,H==".."||H==".")R="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){R=H.lastIndexOf("/",0)==0,H=H.split("/");const K=[];for(let de=0;de<H.length;){const Ce=H[de++];Ce=="."?R&&de==H.length&&K.push(""):Ce==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),R&&de==H.length&&K.push("")):(K.push(Ce),R=!0)}R=K.join("/")}else R=H}return b?y.h=R:b=h.i.toString()!=="",b?Il(y,ku(h.i)):b=!!h.m,b&&(y.m=h.m),y};function Pt(h){return new Pn(h)}function Yt(h,y,b){h.j=b?ka(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Kr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Il(h,y,b){y instanceof Jr?(h.i=y,oo(h.i,h.l)):(b||(y=oi(y,Xr)),h.i=new Jr(y,h.l))}function We(h,y,b){h.i.set(y,b)}function ii(h){return We(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ka(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function oi(h,y,b){return typeof h=="string"?(h=encodeURI(h).replace(y,_n),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function _n(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var so=/[#\/\?@]/g,Vu=/[#\?:]/g,Ol=/[#\?]/g,Xr=/[#\?@]/g,Mu=/#/g;function Jr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function En(h){h.g||(h.g=new Map,h.h=0,h.i&&ro(h.i,function(y,b){h.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}n=Jr.prototype,n.add=function(h,y){En(this),this.i=null,h=Wr(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(y),this.h+=1,this};function Lu(h,y){En(h),y=Wr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Pl(h,y){return En(h),y=Wr(h,y),h.g.has(y)}n.forEach=function(h,y){En(this),this.g.forEach(function(b,R){b.forEach(function(H){h.call(y,H,R,this)},this)},this)};function Vl(h,y){En(h);let b=[];if(typeof y=="string")Pl(h,y)&&(b=b.concat(h.g.get(Wr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)b=b.concat(h[y]);return b}n.set=function(h,y){return En(this),this.i=null,h=Wr(this,h),Pl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=Vl(this,h),h.length>0?String(h[0]):y):y};function io(h,y,b){Lu(h,y),b.length>0&&(h.i=null,h.g.set(Wr(h,y),w(b)),h.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let R=0;R<y.length;R++){var b=y[R];const H=ur(b);b=Vl(this,b);for(let K=0;K<b.length;K++){let de=H;b[K]!==""&&(de+="="+ur(b[K])),h.push(de)}}return this.i=h.join("&")};function ku(h){const y=new Jr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Wr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function oo(h,y){y&&!h.j&&(En(h),h.i=null,h.g.forEach(function(b,R){const H=R.toLowerCase();R!=H&&(Lu(this,R),io(this,H,b))},h)),h.j=y}function ha(h,y){const b=new ca;if(d.Image){const R=new Image;R.onload=_(Qn,b,"TestLoadImage: loaded",!0,y,R),R.onerror=_(Qn,b,"TestLoadImage: error",!1,y,R),R.onabort=_(Qn,b,"TestLoadImage: abort",!1,y,R),R.ontimeout=_(Qn,b,"TestLoadImage: timeout",!1,y,R),d.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else y(!1)}function Ml(h,y){const b=new ca,R=new AbortController,H=setTimeout(()=>{R.abort(),Qn(b,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:R.signal}).then(K=>{clearTimeout(H),K.ok?Qn(b,"TestPingServer: ok",!0,y):Qn(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Qn(b,"TestPingServer: error",!1,y)})}function Qn(h,y,b,R,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),R(b)}catch{}}function Zr(){this.g=new Su}function Ua(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Ua,Nu),Ua.prototype.g=function(){return new li(this.i,this.h)};function li(h,y){jt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(li,jt),n=li.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,fa(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,es(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,fa(this)),this.g&&(this.readyState=3,fa(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;lo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function lo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?es(this):fa(this),this.readyState==3&&lo(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,es(this))},n.Na=function(h){this.g&&(this.response=h,es(this))},n.ga=function(){this.g&&es(this)};function es(h){h.readyState=4,h.l=null,h.j=null,h.B=null,fa(h)}n.setRequestHeader=function(h,y){this.A.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=y.next();return h.join(`\r
`)};function fa(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(li.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Yn(h){let y="";return ne(h,function(b,R){y+=R,y+=":",y+=b,y+=`\r
`}),y}function ci(h,y,b){e:{for(R in b){var R=!1;break e}R=!0}R||(b=Yn(b),typeof h=="string"?b!=null&&ur(b):We(h,y,b))}function nt(h){jt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(nt,jt);var za=/^https?$/i,Ll=["POST","PUT"];n=nt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,y,b,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Nl.g(),this.g.onreadystatechange=x(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(K){ui(this,K);return}if(h=b||"",b=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var H in R)b.set(H,R[H]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const K of R.keys())b.set(K,R.get(K));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(b.keys()).find(K=>K.toLowerCase()=="content-type"),H=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Ll,y,void 0)>=0)||R||H||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,de]of b)this.g.setRequestHeader(K,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(K){ui(this,K)}};function ui(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,kl(h),dr(h)}function kl(h){h.A||(h.A=!0,qt(h,"complete"),qt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,qt(this,"complete"),qt(this,"abort"),dr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dr(this,!0)),nt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?di(this):this.Xa())},n.Xa=function(){di(this)};function di(h){if(h.h&&typeof c<"u"){if(h.v&&ma(h)==4)setTimeout(h.Ca.bind(h),0);else if(qt(h,"readystatechange"),ma(h)==4){h.h=!1;try{const K=h.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var R;if(R=K===0){let de=String(h.D).match(Pu)[1]||null;!de&&d.self&&d.self.location&&(de=d.self.location.protocol.slice(0,-1)),R=!za.test(de?de.toLowerCase():"")}b=R}if(b)qt(h,"complete"),qt(h,"success");else{h.o=6;try{var H=ma(h)>2?h.g.statusText:""}catch{H=""}h.l=H+" ["+h.ca()+"]",kl(h)}}finally{dr(h)}}}}function dr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,y||qt(h,"ready");try{b.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ma(h){return h.g?h.g.readyState:0}n.ca=function(){try{return ma(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Rf(y)}};function Wt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function hr(h){const y={};h=(h.g&&ma(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(C(h[R]))continue;var b=Du(h[R]);const H=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const K=y[H]||[];y[H]=K,K.push(b)}J(y,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ba(h,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||y}function ts(h){this.za=0,this.i=[],this.j=new ca,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ba("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ba("baseRetryDelayMs",5e3,h),this.Za=Ba("retryDelaySeedMs",1e4,h),this.Ta=Ba("forwardChannelMaxRetries",2,h),this.va=Ba("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Al(h&&h.concurrentRequestLimit),this.Ba=new Zr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ts.prototype,n.ka=8,n.I=1,n.connect=function(h,y,b,R){Dt(0),this.W=h,this.H=y||{},b&&R!==void 0&&(this.H.OSID=b,this.H.OAID=R),this.F=this.X,this.J=Gu(this,null,this.W),Fa(this)};function Ul(h){if(co(h),h.I==3){var y=h.V++,b=Pt(h.J);if(We(b,"SID",h.M),We(b,"RID",y),We(b,"TYPE","terminate"),hi(h,b),y=new ua(h,h.j,y),y.M=2,y.A=ii(Pt(b)),b=!1,d.navigator&&d.navigator.sendBeacon)try{b=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!b&&d.Image&&(new Image().src=y.A,b=!0),b||(y.g=$u(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Oa(y)}Hu(h)}function ns(h){h.g&&(Bl(h),h.g.cancel(),h.g=null)}function co(h){ns(h),h.v&&(d.clearTimeout(h.v),h.v=null),ho(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Fa(h){if(!Rl(h.h)&&!h.m){h.m=!0;var y=h.Ea;ce||D(),ue||(ce(),ue=!0),A.add(y,h),h.D=0}}function uo(h,y){return Ma(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=ja(g(h.Ea,h,y),qu(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const H=new ua(this,this.j,h);let K=this.o;if(this.U&&(K?(K=P(K),G(K,this.U)):K=this.U),this.u!==null||this.R||(H.J=K,K=null),this.S)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var R=this.i[b];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,y>4096){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=Uu(this,H,y),b=Pt(this.J),We(b,"RID",h),We(b,"CVER",22),this.G&&We(b,"X-HTTP-Session-Id",this.G),hi(this,b),K&&(this.R?y="headers="+ur(Yn(K))+"&"+y:this.u&&ci(b,this.u,K)),Cl(this.h,H),this.Ra&&We(b,"TYPE","init"),this.S?(We(b,"$req",y),We(b,"SID","null"),H.U=!0,Ia(H,b,null)):Ia(H,b,y),this.I=2}}else this.I==3&&(h?zl(this,h):this.i.length==0||Rl(this.h)||zl(this))};function zl(h,y){var b;y?b=y.l:b=h.V++;const R=Pt(h.J);We(R,"SID",h.M),We(R,"RID",b),We(R,"AID",h.K),hi(h,R),h.u&&h.o&&ci(R,h.u,h.o),b=new ua(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Uu(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Cl(h.h,b),Ia(b,R,y)}function hi(h,y){h.H&&ne(h.H,function(b,R){We(y,R,b)}),h.l&&ne({},function(b,R){We(y,R,b)})}function Uu(h,y,b){b=Math.min(h.i.length,b);const R=h.l?g(h.l.Ka,h.l,h):null;e:{var H=h.i;let Ce=-1;for(;;){const wt=["count="+b];Ce==-1?b>0?(Ce=H[0].g,wt.push("ofs="+Ce)):Ce=0:wt.push("ofs="+Ce);let Ye=!0;for(let mt=0;mt<b;mt++){var K=H[mt].g;const Kn=H[mt].map;if(K-=Ce,K<0)Ce=Math.max(0,H[mt].g-100),Ye=!1;else try{K="req"+K+"_"||"";try{var de=Kn instanceof Map?Kn:Object.entries(Kn);for(const[Ha,pa]of de){let ga=pa;p(pa)&&(ga=Yr(pa)),wt.push(K+Ha+"="+encodeURIComponent(ga))}}catch(Ha){throw wt.push(K+"type="+encodeURIComponent("_badmap")),Ha}}catch{R&&R(Kn)}}if(Ye){de=wt.join("&");break e}}de=void 0}return h=h.i.splice(0,b),y.G=h,de}function zu(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ce||D(),ue||(ce(),ue=!0),A.add(y,h),h.A=0}}function fi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=ja(g(h.Da,h),qu(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Bu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=ja(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),ns(this),Bu(this))};function Bl(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Bu(h){h.g=new ua(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Pt(h.na);We(y,"RID","rpc"),We(y,"SID",h.M),We(y,"AID",h.K),We(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&We(y,"TO",h.ia),We(y,"TYPE","xmlhttp"),hi(h,y),h.u&&h.o&&ci(y,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=ii(Pt(y)),b.u=null,b.R=!0,no(b,h)}n.Va=function(){this.C!=null&&(this.C=null,ns(this),fi(this),Dt(19))};function ho(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Fu(h,y){var b=null;if(h.g==y){ho(h),Bl(h),h.g=null;var R=2}else if(La(h.h,y))b=y.G,jl(h.h,y),R=1;else return;if(h.I!=0){if(y.o)if(R==1){b=y.u?y.u.length:0,y=Date.now()-y.F;var H=h.D;R=to(),qt(R,new Ca(R,b)),Fa(h)}else zu(h);else if(H=y.m,H==3||H==0&&y.X>0||!(R==1&&uo(h,y)||R==2&&fi(h)))switch(b&&b.length>0&&(y=h.h,y.i=y.i.concat(b)),H){case 1:qa(h,5);break;case 4:qa(h,10);break;case 3:qa(h,6);break;default:qa(h,2)}}}function qu(h,y){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*y}function qa(h,y){if(h.j.info("Error code "+y),y==2){var b=g(h.bb,h),R=h.Ua;const H=!R;R=new Pn(R||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Yt(R,"https"),ii(R),H?ha(R.toString(),b):Ml(R.toString(),b)}else Dt(2);h.I=0,h.l&&h.l.pa(y),Hu(h),co(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function Hu(h){if(h.I=0,h.ja=[],h.l){const y=Dl(h.h);(y.length!=0||h.i.length!=0)&&(I(h.ja,y),I(h.ja,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.oa()}}function Gu(h,y,b){var R=b instanceof Pn?Pt(b):new Pn(b);if(R.g!="")y&&(R.g=y+"."+R.g),Kr(R,R.u);else{var H=d.location;R=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const K=new Pn(null);R&&Yt(K,R),y&&(K.g=y),H&&Kr(K,H),b&&(K.h=b),R=K}return b=h.G,y=h.wa,b&&y&&We(R,b,y),We(R,"VER",h.ka),hi(h,R),R}function $u(h,y,b){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new nt(new Ua({ab:b})):new nt(h.ma),y.Fa(h.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qu(){}n=Qu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function as(){}as.prototype.g=function(h,y){return new mn(h,y)};function mn(h,y){jt.call(this),this.g=new ts(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!C(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new fr(this)}T(mn,jt),mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Ul(this.g)},mn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=Yr(h),h=b);y.i.push(new Ot(y.Ya++,h)),y.I==3&&Fa(y)},mn.prototype.N=function(){this.g.l=null,delete this.j,Ul(this.g),delete this.g,mn.Z.N.call(this)};function Yu(h){Jt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const b in y){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}T(Yu,Jt);function Ku(){Gn.call(this),this.status=1}T(Ku,Gn);function fr(h){this.g=h}T(fr,Qu),fr.prototype.ra=function(){qt(this.g,"a")},fr.prototype.qa=function(h){qt(this.g,new Yu(h))},fr.prototype.pa=function(h){qt(this.g,new Ku)},fr.prototype.oa=function(){qt(this.g,"b")},as.prototype.createWebChannel=as.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Qb=function(){return new as},$b=function(){return to()},Gb=xt,rg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ri.NO_ERROR=0,ri.TIMEOUT=8,ri.HTTP_ERROR=6,fh=ri,Sl.COMPLETE="complete",Hb=Sl,Au.EventType=la,la.OPEN="a",la.CLOSE="b",la.ERROR="c",la.MESSAGE="d",jt.prototype.listen=jt.prototype.J,Pc=Au,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,qb=nt}).apply(typeof Zd<"u"?Zd:typeof self<"u"?self:typeof window<"u"?window:{});const ME="@firebase/firestore",LE="4.9.2";class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");let dl="12.3.0";const zi=new Lg("@firebase/firestore");function Go(){return zi.logLevel}function pe(n,...e){if(zi.logLevel<=ze.DEBUG){const t=e.map(zg);zi.debug(`Firestore (${dl}): ${n}`,...t)}}function Lr(n,...e){if(zi.logLevel<=ze.ERROR){const t=e.map(zg);zi.error(`Firestore (${dl}): ${n}`,...t)}}function nl(n,...e){if(zi.logLevel<=ze.WARN){const t=e.map(zg);zi.warn(`Firestore (${dl}): ${n}`,...t)}}function zg(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Se(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Yb(n,s,t)}function Yb(n,e,t){let s=`FIRESTORE (${dl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Lr(s),new Error(s)}function Je(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||Yb(e,o,s)}function Re(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ir{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Kb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(cn.UNAUTHENTICATED)))}shutdown(){}}class _R{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ER{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0,42304);let s=this.i;const o=v=>this.i!==s?(s=this.i,t(v)):Promise.resolve();let c=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ir,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const v=c;e.enqueueRetryable((async()=>{await v.promise,await o(this.currentUser)}))},p=v=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((v=>p(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?p(v):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ir)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Je(typeof s.accessToken=="string",31837,{l:s}),new Kb(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class bR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class TR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new bR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class kE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0,3512);const s=c=>{c.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,pe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new kE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new kE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function wR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}class Bg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=wR(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<t&&(s+=e.charAt(o[c]%62))}return s}}function Be(n,e){return n<e?-1:n>e?1:0}function sg(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),c=e.charAt(s);if(o!==c)return Mp(o)===Mp(c)?Be(o,c):Mp(o)?1:-1}return Be(n.length,e.length)}const SR=55296,NR=57343;function Mp(n){const e=n.charCodeAt(0);return e>=SR&&e<=NR}function al(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}const UE="__name__";class Xa{constructor(e,t,s){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Se(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Xa.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xa?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const c=Xa.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return Be(e.length,t.length)}static compareSegments(e,t){const s=Xa.isNumericId(e),o=Xa.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Xa.extractNumericId(e).compare(Xa.extractNumericId(t)):sg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ks.fromString(e.substring(4,e.length-2))}}class lt extends Xa{construct(e,t,s){return new lt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new fe(ae.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const AR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Xa{construct(e,t,s){return new rn(e,t,s)}static isValidIdentifier(e){return AR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UE}static keyField(){return new rn([UE])}static fromServerFormat(e){const t=[];let s="",o=0;const c=()=>{if(s.length===0)throw new fe(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new fe(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new fe(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=v,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(s+=p,o++):(c(),o++)}if(c(),d)throw new fe(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(t)}static emptyPath(){return new rn([])}}class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(lt.fromString(e))}static fromName(e){return new Ee(lt.fromString(e).popFirst(5))}static empty(){return new Ee(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new lt(e.slice()))}}function Xb(n,e,t){if(!t)throw new fe(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RR(n,e,t,s){if(e===!0&&s===!0)throw new fe(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zE(n){if(!Ee.isDocumentKey(n))throw new fe(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function BE(n){if(Ee.isDocumentKey(n))throw new fe(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jb(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function tf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function vn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tf(n);throw new fe(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function CR(n,e){if(e<=0)throw new fe(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Bt(n,e){const t={typeString:n};return e&&(t.value=e),t}function ou(n,e){if(!Jb(n))throw new fe(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const d=n[s];if(o&&typeof d!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new fe(ae.INVALID_ARGUMENT,t);return!0}const FE=-62135596800,qE=1e6;class me{static now(){return me.fromMillis(Date.now())}static fromDate(e){return me.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*qE);return new me(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<FE)throw new fe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qE}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ou(e,me._jsonSchema))return new me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-FE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}me._jsonSchemaVersion="firestore/timestamp/1.0",me._jsonSchema={type:Bt("string",me._jsonSchemaVersion),seconds:Bt("number"),nanoseconds:Bt("number")};class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new me(0,0))}static max(){return new Ne(new me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Kc=-1;function jR(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Ne.fromTimestamp(s===1e9?new me(t+1,0):new me(t,s));return new Fs(o,Ee.empty(),e)}function DR(n){return new Fs(n.readTime,n.key,Kc)}class Fs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Fs(Ne.min(),Ee.empty(),Kc)}static max(){return new Fs(Ne.max(),Ee.empty(),Kc)}}function IR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}const OR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function hl(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==OR)throw n;pe("LocalStore","Unexpectedly lost primary lease")}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,s)=>{t(e)}))}static reject(e){return new ie(((t,s)=>{s(e)}))}static waitFor(e){return new ie(((t,s)=>{let o=0,c=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++c,d&&c===o&&t()}),(v=>s(v)))})),d=!0,c===o&&t()}))}static or(e){let t=ie.resolve(!1);for(const s of e)t=t.next((o=>o?ie.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,c)=>{s.push(t.call(this,o,c))})),this.waitFor(s)}static mapArray(e,t){return new ie(((s,o)=>{const c=e.length,d=new Array(c);let p=0;for(let v=0;v<c;v++){const g=v;t(e[g]).next((_=>{d[g]=_,++p,p===c&&s(d)}),(_=>o(_)))}}))}static doWhile(e,t){return new ie(((s,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):s()};c()}))}}function VR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function fl(n){return n.name==="IndexedDbTransactionError"}class nf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}nf.ce=-1;const Fg=-1;function af(n){return n==null}function Rh(n){return n===0&&1/n==-1/0}function MR(n){return typeof n=="number"&&Number.isInteger(n)&&!Rh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Wb="";function LR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=HE(e)),e=kR(n.get(t),e);return HE(e)}function kR(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const c=n.charAt(o);switch(c){case"\0":t+="";break;case Wb:t+="";break;default:t+=c}}return t}function HE(n){return n+Wb+""}function GE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Zb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class vt{constructor(e,t){this.comparator=e,this.root=t||an.EMPTY}insert(e,t){return new vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eh(this.root,e,this.comparator,!0)}}class eh{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,t,s,o,c){this.key=e,this.value=t,this.color=s??an.RED,this.left=o??an.EMPTY,this.right=c??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,c){return new an(e??this.key,t??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,s),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return an.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,s,o,c){return this}insert(e,t,s){return new an(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $t{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $E(this.data.getIterator())}getIteratorFrom(e){return new $E(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new $t(this.comparator);return t.data=e,t}}class $E{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class qn{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new qn([])}unionWith(e){let t=new $t(rn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new qn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return al(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class eT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new eT("Invalid base64 string: "+c):c}})(e);return new sn(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const UR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qs(n){if(Je(!!n,39018),typeof n=="string"){let e=0;const t=UR.exec(n);if(Je(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Hs(n){return typeof n=="string"?sn.fromBase64String(n):sn.fromUint8Array(n)}const tT="server_timestamp",nT="__type__",aT="__previous_value__",rT="__local_write_time__";function qg(n){return(n?.mapValue?.fields||{})[nT]?.stringValue===tT}function rf(n){const e=n.mapValue.fields[aT];return qg(e)?rf(e):e}function Xc(n){const e=qs(n.mapValue.fields[rT].timestampValue);return new me(e.seconds,e.nanos)}class zR{constructor(e,t,s,o,c,d,p,v,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=v,this.useFetchStreams=g,this.isUsingEmulator=_}}const Ch="(default)";class Jc{constructor(e,t){this.projectId=e,this.database=t||Ch}static empty(){return new Jc("","")}get isDefaultDatabase(){return this.database===Ch}isEqual(e){return e instanceof Jc&&e.projectId===this.projectId&&e.database===this.database}}const sT="__type__",BR="__max__",th={mapValue:{}},iT="__vector__",jh="value";function Gs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qg(n)?4:qR(n)?9007199254740991:FR(n)?10:11:Se(28295,{value:n})}function ir(n,e){if(n===e)return!0;const t=Gs(n);if(t!==Gs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xc(n).isEqual(Xc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=qs(o.timestampValue),p=qs(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,c){return Hs(o.bytesValue).isEqual(Hs(c.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,c){return At(o.geoPointValue.latitude)===At(c.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(c.geoPointValue.longitude)})(n,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return At(o.integerValue)===At(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=At(o.doubleValue),p=At(c.doubleValue);return d===p?Rh(d)===Rh(p):isNaN(d)&&isNaN(p)}return!1})(n,e);case 9:return al(n.arrayValue.values||[],e.arrayValue.values||[],ir);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},p=c.mapValue.fields||{};if(GE(d)!==GE(p))return!1;for(const v in d)if(d.hasOwnProperty(v)&&(p[v]===void 0||!ir(d[v],p[v])))return!1;return!0})(n,e);default:return Se(52216,{left:n})}}function Wc(n,e){return(n.values||[]).find((t=>ir(t,e)))!==void 0}function rl(n,e){if(n===e)return 0;const t=Gs(n),s=Gs(e);if(t!==s)return Be(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return(function(c,d){const p=At(c.integerValue||c.doubleValue),v=At(d.integerValue||d.doubleValue);return p<v?-1:p>v?1:p===v?0:isNaN(p)?isNaN(v)?0:-1:1})(n,e);case 3:return QE(n.timestampValue,e.timestampValue);case 4:return QE(Xc(n),Xc(e));case 5:return sg(n.stringValue,e.stringValue);case 6:return(function(c,d){const p=Hs(c),v=Hs(d);return p.compareTo(v)})(n.bytesValue,e.bytesValue);case 7:return(function(c,d){const p=c.split("/"),v=d.split("/");for(let g=0;g<p.length&&g<v.length;g++){const _=Be(p[g],v[g]);if(_!==0)return _}return Be(p.length,v.length)})(n.referenceValue,e.referenceValue);case 8:return(function(c,d){const p=Be(At(c.latitude),At(d.latitude));return p!==0?p:Be(At(c.longitude),At(d.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return YE(n.arrayValue,e.arrayValue);case 10:return(function(c,d){const p=c.fields||{},v=d.fields||{},g=p[jh]?.arrayValue,_=v[jh]?.arrayValue,T=Be(g?.values?.length||0,_?.values?.length||0);return T!==0?T:YE(g,_)})(n.mapValue,e.mapValue);case 11:return(function(c,d){if(c===th.mapValue&&d===th.mapValue)return 0;if(c===th.mapValue)return 1;if(d===th.mapValue)return-1;const p=c.fields||{},v=Object.keys(p),g=d.fields||{},_=Object.keys(g);v.sort(),_.sort();for(let T=0;T<v.length&&T<_.length;++T){const x=sg(v[T],_[T]);if(x!==0)return x;const w=rl(p[v[T]],g[_[T]]);if(w!==0)return w}return Be(v.length,_.length)})(n.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function QE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=qs(n),s=qs(e),o=Be(t.seconds,s.seconds);return o!==0?o:Be(t.nanos,s.nanos)}function YE(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const c=rl(t[o],s[o]);if(c)return c}return Be(t.length,s.length)}function sl(n){return ig(n)}function ig(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=qs(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Hs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const c of t.values||[])o?o=!1:s+=",",s+=ig(c);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const d of s)c?c=!1:o+=",",o+=`${d}:${ig(t.fields[d])}`;return o+"}"})(n.mapValue):Se(61005,{value:n})}function mh(n){switch(Gs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rf(n);return e?16+mh(e):16;case 5:return 2*n.stringValue.length;case 6:return Hs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+mh(c)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return Xs(s.fields,((c,d)=>{o+=c.length+mh(d)})),o})(n.mapValue);default:throw Se(13486,{value:n})}}function KE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function og(n){return!!n&&"integerValue"in n}function Hg(n){return!!n&&"arrayValue"in n}function XE(n){return!!n&&"nullValue"in n}function JE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ph(n){return!!n&&"mapValue"in n}function FR(n){return(n?.mapValue?.fields||{})[sT]?.stringValue===iT}function Bc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Xs(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Bc(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bc(n.arrayValue.values[t]);return e}return{...n}}function qR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===BR}class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ph(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bc(t)}setAll(e){let t=rn.emptyPath(),s={},o=[];e.forEach(((d,p)=>{if(!t.isImmediateParentOf(p)){const v=this.getFieldsMap(t);this.applyChanges(v,s,o),s={},o=[],t=p.popLast()}d?s[p.lastSegment()]=Bc(d):o.push(p.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,o)}delete(e){const t=this.field(e.popLast());ph(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ir(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];ph(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Xs(t,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new Cn(Bc(this.value))}}function oT(n){const e=[];return Xs(n.fields,((t,s)=>{const o=new rn([t]);if(ph(s)){const c=oT(s.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new qn(e)}class un{constructor(e,t,s,o,c,d,p){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(e){return new un(e,0,Ne.min(),Ne.min(),Ne.min(),Cn.empty(),0)}static newFoundDocument(e,t,s,o){return new un(e,1,t,Ne.min(),s,o,0)}static newNoDocument(e,t){return new un(e,2,t,Ne.min(),Ne.min(),Cn.empty(),0)}static newUnknownDocument(e,t){return new un(e,3,t,Ne.min(),Ne.min(),Cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Dh{constructor(e,t){this.position=e,this.inclusive=t}}function WE(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const c=e[o],d=n.position[o];if(c.field.isKeyField()?s=Ee.comparator(Ee.fromName(d.referenceValue),t.key):s=rl(d,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function ZE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ir(n.position[t],e.position[t]))return!1;return!0}class Zc{constructor(e,t="asc"){this.field=e,this.dir=t}}function HR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class lT{}class zt extends lT{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new $R(e,t,s):t==="array-contains"?new KR(e,s):t==="in"?new XR(e,s):t==="not-in"?new JR(e,s):t==="array-contains-any"?new WR(e,s):new zt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new QR(e,s):new YR(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(rl(t,this.value)):t!==null&&Gs(this.value)===Gs(t)&&this.matchesComparison(rl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xa extends lT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new xa(e,t)}matches(e){return cT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cT(n){return n.op==="and"}function uT(n){return GR(n)&&cT(n)}function GR(n){for(const e of n.filters)if(e instanceof xa)return!1;return!0}function lg(n){if(n instanceof zt)return n.field.canonicalString()+n.op.toString()+sl(n.value);if(uT(n))return n.filters.map((e=>lg(e))).join(",");{const e=n.filters.map((t=>lg(t))).join(",");return`${n.op}(${e})`}}function dT(n,e){return n instanceof zt?(function(s,o){return o instanceof zt&&s.op===o.op&&s.field.isEqual(o.field)&&ir(s.value,o.value)})(n,e):n instanceof xa?(function(s,o){return o instanceof xa&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,d,p)=>c&&dT(d,o.filters[p])),!0):!1})(n,e):void Se(19439)}function hT(n){return n instanceof zt?(function(t){return`${t.field.canonicalString()} ${t.op} ${sl(t.value)}`})(n):n instanceof xa?(function(t){return t.op.toString()+" {"+t.getFilters().map(hT).join(" ,")+"}"})(n):"Filter"}class $R extends zt{constructor(e,t,s){super(e,t,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class QR extends zt{constructor(e,t){super(e,"in",t),this.keys=fT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class YR extends zt{constructor(e,t){super(e,"not-in",t),this.keys=fT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function fT(n,e){return(e.arrayValue?.values||[]).map((t=>Ee.fromName(t.referenceValue)))}class KR extends zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hg(t)&&Wc(t.arrayValue,this.value)}}class XR extends zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Wc(this.value.arrayValue,t)}}class JR extends zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Wc(this.value.arrayValue,t)}}class WR extends zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Wc(this.value.arrayValue,s)))}}class ZR{constructor(e,t=null,s=[],o=[],c=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function e1(n,e=null,t=[],s=[],o=null,c=null,d=null){return new ZR(n,e,t,s,o,c,d)}function Gg(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>lg(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),af(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>sl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>sl(s))).join(",")),e.Te=t}return e.Te}function $g(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!HR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!dT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ZE(n.startAt,e.startAt)&&ZE(n.endAt,e.endAt)}function cg(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class ml{constructor(e,t=null,s=[],o=[],c=null,d="F",p=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function eC(n,e,t,s,o,c,d,p){return new ml(n,e,t,s,o,c,d,p)}function sf(n){return new ml(n)}function t1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function mT(n){return n.collectionGroup!==null}function Fc(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new $t(rn.comparator);return d.filters.forEach((v=>{v.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Zc(c,s))})),t.has(rn.keyField().canonicalString())||e.Ie.push(new Zc(rn.keyField(),s))}return e.Ie}function er(n){const e=Re(n);return e.Ee||(e.Ee=tC(e,Fc(n))),e.Ee}function tC(n,e){if(n.limitType==="F")return e1(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Zc(o.field,c)}));const t=n.endAt?new Dh(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Dh(n.startAt.position,n.startAt.inclusive):null;return e1(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function ug(n,e){const t=n.filters.concat([e]);return new ml(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ih(n,e,t){return new ml(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function of(n,e){return $g(er(n),er(e))&&n.limitType===e.limitType}function pT(n){return`${Gg(er(n))}|lt:${n.limitType}`}function $o(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>hT(o))).join(", ")}]`),af(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>sl(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>sl(o))).join(",")),`Target(${s})`})(er(n))}; limitType=${n.limitType})`}function lf(n,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ee.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(n,e)&&(function(s,o){for(const c of Fc(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(d,p,v){const g=WE(d,p,v);return d.inclusive?g<=0:g<0})(s.startAt,Fc(s),o)||s.endAt&&!(function(d,p,v){const g=WE(d,p,v);return d.inclusive?g>=0:g>0})(s.endAt,Fc(s),o))})(n,e)}function nC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gT(n){return(e,t)=>{let s=!1;for(const o of Fc(n)){const c=aC(o,e,t);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function aC(n,e,t){const s=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(c,d,p){const v=d.data.field(c),g=p.data.field(c);return v!==null&&g!==null?rl(v,g):Se(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Se(19790,{direction:n.dir})}}class Yi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Xs(this.inner,((t,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return Zb(this.inner)}size(){return this.innerSize}}const rC=new vt(Ee.comparator);function kr(){return rC}const vT=new vt(Ee.comparator);function Vc(...n){let e=vT;for(const t of n)e=e.insert(t.key,t);return e}function yT(n){let e=vT;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ii(){return qc()}function _T(){return qc()}function qc(){return new Yi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const sC=new vt(Ee.comparator),iC=new $t(Ee.comparator);function Fe(...n){let e=iC;for(const t of n)e=e.add(t);return e}const oC=new $t(Be);function lC(){return oC}function Qg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rh(e)?"-0":e}}function ET(n){return{integerValue:""+n}}function cC(n,e){return MR(e)?ET(e):Qg(n,e)}class cf{constructor(){this._=void 0}}function uC(n,e,t){return n instanceof Oh?(function(o,c){const d={fields:{[nT]:{stringValue:tT},[rT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&qg(c)&&(c=rf(c)),c&&(d.fields[aT]=c),{mapValue:d}})(t,e):n instanceof eu?TT(n,e):n instanceof tu?xT(n,e):(function(o,c){const d=bT(o,c),p=n1(d)+n1(o.Ae);return og(d)&&og(o.Ae)?ET(p):Qg(o.serializer,p)})(n,e)}function dC(n,e,t){return n instanceof eu?TT(n,e):n instanceof tu?xT(n,e):t}function bT(n,e){return n instanceof Ph?(function(s){return og(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Oh extends cf{}class eu extends cf{constructor(e){super(),this.elements=e}}function TT(n,e){const t=wT(e);for(const s of n.elements)t.some((o=>ir(o,s)))||t.push(s);return{arrayValue:{values:t}}}class tu extends cf{constructor(e){super(),this.elements=e}}function xT(n,e){let t=wT(e);for(const s of n.elements)t=t.filter((o=>!ir(o,s)));return{arrayValue:{values:t}}}class Ph extends cf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function n1(n){return At(n.integerValue||n.doubleValue)}function wT(n){return Hg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function hC(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof eu&&o instanceof eu||s instanceof tu&&o instanceof tu?al(s.elements,o.elements,ir):s instanceof Ph&&o instanceof Ph?ir(s.Ae,o.Ae):s instanceof Oh&&o instanceof Oh})(n.transform,e.transform)}class fC{constructor(e,t){this.version=e,this.transformResults=t}}class yn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class uf{}function ST(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new df(n.key,yn.none()):new lu(n.key,n.data,yn.none());{const t=n.data,s=Cn.empty();let o=new $t(rn.comparator);for(let c of e.fields)if(!o.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?s.delete(c):s.set(c,d),o=o.add(c)}return new Js(n.key,s,new qn(o.toArray()),yn.none())}}function mC(n,e,t){n instanceof lu?(function(o,c,d){const p=o.value.clone(),v=r1(o.fieldTransforms,c,d.transformResults);p.setAll(v),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(n,e,t):n instanceof Js?(function(o,c,d){if(!gh(o.precondition,c))return void c.convertToUnknownDocument(d.version);const p=r1(o.fieldTransforms,c,d.transformResults),v=c.data;v.setAll(NT(o)),v.setAll(p),c.convertToFoundDocument(d.version,v).setHasCommittedMutations()})(n,e,t):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Hc(n,e,t,s){return n instanceof lu?(function(c,d,p,v){if(!gh(c.precondition,d))return p;const g=c.value.clone(),_=s1(c.fieldTransforms,v,d);return g.setAll(_),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null})(n,e,t,s):n instanceof Js?(function(c,d,p,v){if(!gh(c.precondition,d))return p;const g=s1(c.fieldTransforms,v,d),_=d.data;return _.setAll(NT(c)),_.setAll(g),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((T=>T.field)))})(n,e,t,s):(function(c,d,p){return gh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(n,e,t)}function pC(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),c=bT(s.transform,o||null);c!=null&&(t===null&&(t=Cn.empty()),t.set(s.field,c))}return t||null}function a1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&al(s,o,((c,d)=>hC(c,d)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class lu extends uf{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Js extends uf{constructor(e,t,s,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function NT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function r1(n,e,t){const s=new Map;Je(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const c=n[o],d=c.transform,p=e.data.field(c.field);s.set(c.field,dC(d,p,t[o]))}return s}function s1(n,e,t){const s=new Map;for(const o of n){const c=o.transform,d=t.data.field(o.field);s.set(o.field,uC(c,d,e))}return s}class df extends uf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gC extends uf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vC{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&mC(c,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Hc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Hc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=_T();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=t.has(o.key)?null:p;const v=ST(d,p);v!==null&&s.set(o.key,v),d.isValidDocument()||d.convertToNoDocument(Ne.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&al(this.mutations,e.mutations,((t,s)=>a1(t,s)))&&al(this.baseMutations,e.baseMutations,((t,s)=>a1(t,s)))}}class Yg{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Je(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return sC})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,s[d].version);return new Yg(e,t,s,o)}}class yC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class _C{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ut,Ge;function EC(n){switch(n){case ae.OK:return Se(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function AT(n){if(n===void 0)return Lr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Ut.OK:return ae.OK;case Ut.CANCELLED:return ae.CANCELLED;case Ut.UNKNOWN:return ae.UNKNOWN;case Ut.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Ut.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Ut.INTERNAL:return ae.INTERNAL;case Ut.UNAVAILABLE:return ae.UNAVAILABLE;case Ut.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Ut.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Ut.NOT_FOUND:return ae.NOT_FOUND;case Ut.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Ut.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Ut.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Ut.ABORTED:return ae.ABORTED;case Ut.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Ut.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Ut.DATA_LOSS:return ae.DATA_LOSS;default:return Se(39323,{code:n})}}(Ge=Ut||(Ut={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";function bC(){return new TextEncoder}const TC=new ks([4294967295,4294967295],0);function i1(n){const e=bC().encode(n),t=new Fb;return t.update(e),new Uint8Array(t.digest())}function o1(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ks([t,s],0),new ks([o,c],0)]}class Kg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Mc(`Invalid padding: ${t}`);if(s<0)throw new Mc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Mc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Mc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ks.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(ks.fromNumber(s)));return o.compare(TC)===1&&(o=new ks([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=i1(e),[s,o]=o1(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);if(!this.we(d))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Kg(c,o,t);return s.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const t=i1(e),[s,o]=o1(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Mc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hf{constructor(e,t,s,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,cu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new hf(Ne.min(),o,new vt(Be),kr(),Fe())}}class cu{constructor(e,t,s,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new cu(s,t,Fe(),Fe(),Fe())}}class vh{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class RT{constructor(e,t){this.targetId=e,this.Ce=t}}class CT{constructor(e,t,s=sn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class l1{constructor(){this.ve=0,this.Fe=c1(),this.Me=sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),t=Fe(),s=Fe();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Se(38017,{changeType:c})}})),new cu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=c1()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class xC{constructor(e){this.Ge=e,this.ze=new Map,this.je=kr(),this.Je=nh(),this.He=nh(),this.Ye=new vt(Be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(cg(c))if(s===0){const d=new Ee(c.path);this.et(t,d,un.newNoDocument(d,Ne.min()))}else Je(s===1,20013,{expectedCount:s});else{const d=this._t(t);if(d!==s){const p=this.ut(e),v=p?this.ct(p,e,d):1;if(v!==0){this.it(t);const g=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=t;let d,p;try{d=Hs(s).toUint8Array()}catch(v){if(v instanceof eT)return nl("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{p=new Kg(d,o,c)}catch(v){return nl(v instanceof Mc?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return p.ge===0?null:p}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,d)=>{const p=this.ot(d);if(p){if(c.current&&cg(p.target)){const v=new Ee(p.target.path);this.It(v).has(d)||this.Et(d,v)||this.et(d,v,un.newNoDocument(v,e))}c.Be&&(t.set(d,c.ke()),c.qe())}}));let s=Fe();this.He.forEach(((c,d)=>{let p=!0;d.forEachWhile((v=>{const g=this.ot(v);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new hf(e,t,this.Ye,this.je,s);return this.je=kr(),this.Je=nh(),this.He=nh(),this.Ye=new vt(Be),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new l1,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new $t(Be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new $t(Be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new l1),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function nh(){return new vt(Ee.comparator)}function c1(){return new vt(Ee.comparator)}const wC={asc:"ASCENDING",desc:"DESCENDING"},SC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NC={and:"AND",or:"OR"};class AC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function dg(n,e){return n.useProto3Json||af(e)?e:{value:e}}function Vh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function RC(n,e){return Vh(n,e.toTimestamp())}function tr(n){return Je(!!n,49232),Ne.fromTimestamp((function(t){const s=qs(t);return new me(s.seconds,s.nanos)})(n))}function Xg(n,e){return hg(n,e).canonicalString()}function hg(n,e){const t=(function(o){return new lt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function DT(n){const e=lt.fromString(n);return Je(MT(e),10190,{key:e.toString()}),e}function fg(n,e){return Xg(n.databaseId,e.path)}function Lp(n,e){const t=DT(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(OT(t))}function IT(n,e){return Xg(n.databaseId,e)}function CC(n){const e=DT(n);return e.length===4?lt.emptyPath():OT(e)}function mg(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OT(n){return Je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function u1(n,e,t){return{name:fg(n,e),fields:t.value.mapValue.fields}}function jC(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Se(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(g,_){return g.useProto3Json?(Je(_===void 0||typeof _=="string",58123),sn.fromBase64String(_||"")):(Je(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),sn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(g){const _=g.code===void 0?ae.UNKNOWN:AT(g.code);return new fe(_,g.message||"")})(d);t=new CT(s,o,c,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Lp(n,s.document.name),c=tr(s.document.updateTime),d=s.document.createTime?tr(s.document.createTime):Ne.min(),p=new Cn({mapValue:{fields:s.document.fields}}),v=un.newFoundDocument(o,c,d,p),g=s.targetIds||[],_=s.removedTargetIds||[];t=new vh(g,_,v.key,v)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Lp(n,s.document),c=s.readTime?tr(s.readTime):Ne.min(),d=un.newNoDocument(o,c),p=s.removedTargetIds||[];t=new vh([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Lp(n,s.document),c=s.removedTargetIds||[];t=new vh([],c,o,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,d=new _C(o,c),p=s.targetId;t=new RT(p,d)}}return t}function DC(n,e){let t;if(e instanceof lu)t={update:u1(n,e.key,e.value)};else if(e instanceof df)t={delete:fg(n,e.key)};else if(e instanceof Js)t={update:u1(n,e.key,e.data),updateMask:zC(e.fieldMask)};else{if(!(e instanceof gC))return Se(16599,{Vt:e.type});t={verify:fg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const p=d.transform;if(p instanceof Oh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof eu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof tu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Ph)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw Se(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:RC(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Se(27497)})(n,e.precondition)),t}function IC(n,e){return n&&n.length>0?(Je(e!==void 0,14353),n.map((t=>(function(o,c){let d=o.updateTime?tr(o.updateTime):tr(c);return d.isEqual(Ne.min())&&(d=tr(c)),new fC(d,o.transformResults||[])})(t,e)))):[]}function OC(n,e){return{documents:[IT(n,e.path)]}}function PC(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=IT(n,o);const c=(function(g){if(g.length!==0)return VT(xa.create(g,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const d=(function(g){if(g.length!==0)return g.map((_=>(function(x){return{field:Qo(x.field),direction:LC(x.dir)}})(_)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const p=dg(n,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:o}}function VC(n){let e=CC(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Je(s===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let c=[];t.where&&(c=(function(T){const x=PT(T);return x instanceof xa&&uT(x)?x.getFilters():[x]})(t.where));let d=[];t.orderBy&&(d=(function(T){return T.map((x=>(function(I){return new Zc(Yo(I.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(x)))})(t.orderBy));let p=null;t.limit&&(p=(function(T){let x;return x=typeof T=="object"?T.value:T,af(x)?null:x})(t.limit));let v=null;t.startAt&&(v=(function(T){const x=!!T.before,w=T.values||[];return new Dh(w,x)})(t.startAt));let g=null;return t.endAt&&(g=(function(T){const x=!T.before,w=T.values||[];return new Dh(w,x)})(t.endAt)),eC(e,o,d,c,p,"F",v,g)}function MC(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function PT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Yo(t.unaryFilter.field);return zt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Yo(t.unaryFilter.field);return zt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Yo(t.unaryFilter.field);return zt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Yo(t.unaryFilter.field);return zt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(n):n.fieldFilter!==void 0?(function(t){return zt.create(Yo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return xa.create(t.compositeFilter.filters.map((s=>PT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(n):Se(30097,{filter:n})}function LC(n){return wC[n]}function kC(n){return SC[n]}function UC(n){return NC[n]}function Qo(n){return{fieldPath:n.canonicalString()}}function Yo(n){return rn.fromServerFormat(n.fieldPath)}function VT(n){return n instanceof zt?(function(t){if(t.op==="=="){if(JE(t.value))return{unaryFilter:{field:Qo(t.field),op:"IS_NAN"}};if(XE(t.value))return{unaryFilter:{field:Qo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(JE(t.value))return{unaryFilter:{field:Qo(t.field),op:"IS_NOT_NAN"}};if(XE(t.value))return{unaryFilter:{field:Qo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qo(t.field),op:kC(t.op),value:t.value}}})(n):n instanceof xa?(function(t){const s=t.getFilters().map((o=>VT(o)));return s.length===1?s[0]:{compositeFilter:{op:UC(t.op),filters:s}}})(n):Se(54877,{filter:n})}function zC(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function MT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Ps{constructor(e,t,s,o,c=Ne.min(),d=Ne.min(),p=sn.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=v}withSequenceNumber(e){return new Ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class BC{constructor(e){this.yt=e}}function FC(n){const e=VC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ih(e,e.limit,"L"):e}class qC{constructor(){this.Cn=new HC}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Fs.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Fs.min())}updateCollectionGroup(e,t,s){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class HC{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new $t(lt.comparator),c=!o.has(s);return this.index[t]=o.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new $t(lt.comparator)).toArray()}}const d1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LT=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(LT,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);class il{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new il(0)}static cr(){return new il(-1)}}const h1="LruGarbageCollector",GC=1048576;function f1([n,e],[t,s]){const o=Be(n,t);return o===0?Be(e,s):o}class $C{constructor(e){this.Ir=e,this.buffer=new $t(f1),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();f1(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class QC{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){pe(h1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){fl(t)?pe(h1,"Ignoring IndexedDB error during garbage collection: ",t):await hl(t)}await this.Vr(3e5)}))}}class YC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(nf.ce);const s=new $C(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(d1)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),d1):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,c,d,p,v,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,d=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,p=Date.now(),this.removeTargets(e,s,t)))).next((T=>(c=T,v=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(g=Date.now(),Go()<=ze.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${c} targets in `+(v-p)+`ms
	Removed ${T} documents in `+(g-v)+`ms
Total Duration: ${g-_}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:T}))))}}function KC(n,e){return new YC(n,e)}class XC{constructor(){this.changes=new Yi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ie.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class JC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class WC{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Hc(s.mutation,o,qn.empty(),me.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Fe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Fe()){const o=Ii();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((c=>{let d=Vc();return c.forEach(((p,v)=>{d=d.insert(p,v.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=Ii();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Fe())))}populateOverlays(e,t,s){const o=[];return s.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,p)=>{t.set(d,p)}))}))}computeViews(e,t,s,o){let c=kr();const d=qc(),p=(function(){return qc()})();return t.forEach(((v,g)=>{const _=s.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof Js)?c=c.insert(g.key,g):_!==void 0?(d.set(g.key,_.mutation.getFieldMask()),Hc(_.mutation,g,_.mutation.getFieldMask(),me.now())):d.set(g.key,qn.empty())})),this.recalculateAndSaveOverlays(e,c).next((v=>(v.forEach(((g,_)=>d.set(g,_))),t.forEach(((g,_)=>p.set(g,new JC(_,d.get(g)??null)))),p)))}recalculateAndSaveOverlays(e,t){const s=qc();let o=new vt(((d,p)=>d-p)),c=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const p of d)p.keys().forEach((v=>{const g=t.get(v);if(g===null)return;let _=s.get(v)||qn.empty();_=p.applyToLocalView(g,_),s.set(v,_);const T=(o.get(p.batchId)||Fe()).add(v);o=o.insert(p.batchId,T)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const v=p.getNext(),g=v.key,_=v.value,T=_T();_.forEach((x=>{if(!c.has(x)){const w=ST(t.get(x),s.get(x));w!==null&&T.set(x,w),c=c.add(x)}})),d.push(this.documentOverlayCache.saveOverlays(e,g,T))}return ie.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(d){return Ee.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):mT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-c.size):ie.resolve(Ii());let p=Kc,v=c;return d.next((g=>ie.forEach(g,((_,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),c.get(_)?ie.resolve():this.remoteDocumentCache.getEntry(e,_).next((x=>{v=v.insert(_,x)}))))).next((()=>this.populateOverlays(e,g,c))).next((()=>this.computeViews(e,v,g,Fe()))).next((_=>({batchId:p,changes:yT(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((s=>{let o=Vc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const c=t.collectionGroup;let d=Vc();return this.indexManager.getCollectionParents(e,c).next((p=>ie.forEach(p,(v=>{const g=(function(T,x){return new ml(x,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,v.child(c));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next((_=>{_.forEach(((T,x)=>{d=d.insert(T,x)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,o)))).next((d=>{c.forEach(((v,g)=>{const _=g.getKey();d.get(_)===null&&(d=d.insert(_,un.newInvalidDocument(_)))}));let p=Vc();return d.forEach(((v,g)=>{const _=c.get(v);_!==void 0&&Hc(_.mutation,g,qn.empty(),me.now()),lf(t,g)&&(p=p.insert(v,g))})),p}))}}class ZC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:tr(o.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:FC(o.bundledQuery),readTime:tr(o.readTime)}})(t)),ie.resolve()}}class e2{constructor(){this.overlays=new vt(Ee.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ii();return ie.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,c)=>{this.St(e,t,c)})),ie.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),ie.resolve()}getOverlaysForCollection(e,t,s){const o=Ii(),c=t.length+1,d=new Ee(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const v=p.getNext().value,g=v.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===c&&v.largestBatchId>s&&o.set(v.getKey(),v)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let c=new vt(((g,_)=>g-_));const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let _=c.get(g.largestBatchId);_===null&&(_=Ii(),c=c.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const p=Ii(),v=c.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((g,_)=>p.set(g,_))),!(p.size()>=o)););return ie.resolve(p)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new yC(t,s));let c=this.qr.get(t);c===void 0&&(c=Fe(),this.qr.set(t,c)),this.qr.set(t,c.add(s.key))}}class t2{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}class Jg{constructor(){this.Qr=new $t(Xt.$r),this.Ur=new $t(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Xt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Xt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ee(new lt([])),s=new Xt(t,e),o=new Xt(t,e+1),c=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new lt([])),s=new Xt(t,e),o=new Xt(t,e+1);let c=Fe();return this.Ur.forEachInRange([s,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const t=new Xt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Xt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||Be(e.Yr,t.Yr)}static Kr(e,t){return Be(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}class n2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new $t(Xt.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new vC(c,t,s,o);this.mutationQueue.push(d);for(const p of o)this.Zr=this.Zr.add(new Xt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ie.resolve(d)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),c=o<0?0:o;return ie.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Fg:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Xt(t,0),o=new Xt(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(d=>{const p=this.Xr(d.Yr);c.push(p)})),ie.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new $t(Be);return t.forEach((o=>{const c=new Xt(o,0),d=new Xt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(p=>{s=s.add(p.Yr)}))})),ie.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let c=s;Ee.isDocumentKey(c)||(c=c.child(""));const d=new Xt(new Ee(c),0);let p=new $t(Be);return this.Zr.forEachWhile((v=>{const g=v.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(p=p.add(v.Yr)),!0)}),d),ie.resolve(this.ti(p))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Je(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ie.forEach(t.mutations,(o=>{const c=new Xt(o.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Xt(t,0),o=this.Zr.firstAfterOrEqual(s);return ie.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class a2{constructor(e){this.ri=e,this.docs=(function(){return new vt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),c=o?o.size:0,d=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ie.resolve(s?s.document.mutableCopy():un.newInvalidDocument(t))}getEntries(e,t){let s=kr();return t.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():un.newInvalidDocument(o))})),ie.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let c=kr();const d=t.path,p=new Ee(d.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(p);for(;v.hasNext();){const{key:g,value:{document:_}}=v.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||IR(DR(_),s)<=0||(o.has(_.key)||lf(t,_))&&(c=c.insert(_.key,_.mutableCopy()))}return ie.resolve(c)}getAllFromCollectionGroup(e,t,s,o){Se(9500)}ii(e,t){return ie.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new r2(this)}getSize(e){return ie.resolve(this.size)}}class r2 extends XC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class s2{constructor(e){this.persistence=e,this.si=new Yi((t=>Gg(t)),$g),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new Jg,this.targetCount=0,this.ai=il.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new il(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,s){let o=0;const c=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=t&&s.get(p.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ie.waitFor(c).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ie.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ie.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),ie.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ie.resolve(s)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}class kT{constructor(e,t){this.ui={},this.overlays={},this.ci=new nf(0),this.li=!1,this.li=!0,this.hi=new t2,this.referenceDelegate=e(this),this.Pi=new s2(this),this.indexManager=new qC,this.remoteDocumentCache=(function(o){return new a2(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new BC(t),this.Ii=new ZC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new e2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new n2(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){pe("MemoryPersistence","Starting transaction:",e);const o=new i2(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,t){return ie.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class i2 extends PR{constructor(e){super(),this.currentSequenceNumber=e}}class Wg{constructor(e){this.persistence=e,this.Ri=new Jg,this.Vi=null}static mi(e){return new Wg(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ie.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(s=>{const o=Ee.fromPath(s);return this.gi(e,o).next((c=>{c||t.removeEntry(o,Ne.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Mh{constructor(e,t){this.persistence=e,this.pi=new Yi((s=>LR(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=KC(this,t)}static mi(e,t){return new Mh(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((s,o)=>this.br(e,s,o).next((c=>c?ie.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,t).next((p=>{p||(s++,c.removeEntry(d,Ne.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mh(e.data.value)),t}br(e,t,s){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ie.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Zg{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Fe(),o=Fe();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Zg(e,t.fromCache,s,o)}}class o2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class l2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return WN()?8:VR(hn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const c={result:null};return this.ys(e,t).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,t,o,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new o2;return this.Ss(e,t,d).next((p=>{if(c.result=p,this.Vs)return this.bs(e,t,d,p.size)}))})).next((()=>c.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(Go()<=ze.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",$o(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(Go()<=ze.DEBUG&&pe("QueryEngine","Query:",$o(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Go()<=ze.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",$o(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,er(t))):ie.resolve())}ys(e,t){if(t1(t))return ie.resolve(null);let s=er(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Ih(t,null,"F"),s=er(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=Fe(...c);return this.ps.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,s).next((v=>{const g=this.Ds(t,p);return this.Cs(t,g,d,v.readTime)?this.ys(e,Ih(t,null,"F")):this.vs(e,g,t,v)}))))})))))}ws(e,t,s,o){return t1(t)||o.isEqual(Ne.min())?ie.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(t,c);return this.Cs(t,d,s,o)?ie.resolve(null):(Go()<=ze.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),$o(t)),this.vs(e,d,t,jR(o,Kc)).next((p=>p)))}))}Ds(e,t){let s=new $t(gT(e));return t.forEach(((o,c)=>{lf(e,c)&&(s=s.add(c))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,s){return Go()<=ze.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",$o(t)),this.ps.getDocumentsMatchingQuery(e,t,Fs.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((c=>(t.forEach((d=>{c=c.insert(d.key,d)})),c)))}}const ev="LocalStore",c2=3e8;class u2{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new vt(Be),this.xs=new Yi((c=>Gg(c)),$g),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function d2(n,e,t,s){return new u2(n,e,t,s)}async function UT(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],p=[];let v=Fe();for(const g of o){d.push(g.batchId);for(const _ of g.mutations)v=v.add(_.key)}for(const g of c){p.push(g.batchId);for(const _ of g.mutations)v=v.add(_.key)}return t.localDocuments.getDocuments(s,v).next((g=>({Ls:g,removedBatchIds:d,addedBatchIds:p})))}))}))}function h2(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,v,g,_){const T=g.batch,x=T.keys();let w=ie.resolve();return x.forEach((I=>{w=w.next((()=>_.getEntry(v,I))).next((U=>{const L=g.docVersions.get(I);Je(L!==null,48541),U.version.compareTo(L)<0&&(T.applyToRemoteDocument(U,g),U.isValidDocument()&&(U.setReadTime(g.commitVersion),_.addEntry(U)))}))})),w.next((()=>p.mutationQueue.removeMutationBatch(v,T)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let v=Fe();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(v=v.add(p.batch.mutations[g].key));return v})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function zT(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function f2(n,e){const t=Re(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const p=[];e.targetChanges.forEach(((_,T)=>{const x=o.get(T);if(!x)return;p.push(t.Pi.removeMatchingKeys(c,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(c,_.addedDocuments,T))));let w=x.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(T)!==null?w=w.withResumeToken(sn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,s)),o=o.insert(T,w),(function(U,L,q){return U.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=c2?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(x,w,_)&&p.push(t.Pi.updateTargetData(c,w))}));let v=kr(),g=Fe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(c,_))})),p.push(m2(c,d,e.documentUpdates).next((_=>{v=_.ks,g=_.qs}))),!s.isEqual(Ne.min())){const _=t.Pi.getLastRemoteSnapshotVersion(c).next((T=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));p.push(_)}return ie.waitFor(p).next((()=>d.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,v,g))).next((()=>v))})).then((c=>(t.Ms=o,c)))}function m2(n,e,t){let s=Fe(),o=Fe();return t.forEach((c=>s=s.add(c))),e.getEntries(n,s).next((c=>{let d=kr();return t.forEach(((p,v)=>{const g=c.get(p);v.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(p)),v.isNoDocument()&&v.version.isEqual(Ne.min())?(e.removeEntry(p,v.readTime),d=d.insert(p,v)):!g.isValidDocument()||v.version.compareTo(g.version)>0||v.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(v),d=d.insert(p,v)):pe(ev,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",v.version)})),{ks:d,qs:o}}))}function p2(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Fg),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function g2(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((c=>c?(o=c,ie.resolve(o)):t.Pi.allocateTargetId(s).next((d=>(o=new Ps(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function pg(n,e,t){const s=Re(n),o=s.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!fl(d))throw d;pe(ev,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function m1(n,e,t){const s=Re(n);let o=Ne.min(),c=Fe();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(v,g,_){const T=Re(v),x=T.xs.get(_);return x!==void 0?ie.resolve(T.Ms.get(x)):T.Pi.getTargetData(g,_)})(s,d,er(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,p.targetId).next((v=>{c=v}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,t?o:Ne.min(),t?c:Fe()))).next((p=>(v2(s,nC(e),p),{documents:p,Qs:c})))))}function v2(n,e,t){let s=n.Os.get(e)||Ne.min();t.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),n.Os.set(e,s)}class p1{constructor(){this.activeTargetIds=lC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class y2{constructor(){this.Mo=new p1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new p1,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _2{Oo(e){}shutdown(){}}const g1="ConnectivityMonitor";class v1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pe(g1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){pe(g1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ah=null;function gg(){return ah===null?ah=(function(){return 268435456+Math.round(2147483648*Math.random())})():ah++,"0x"+ah.toString(16)}const kp="RestConnection",E2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class b2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Ch?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,c){const d=gg(),p=this.zo(e,t.toUriEncodedString());pe(kp,`Sending RPC '${e}' ${d}:`,p,s);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,o,c);const{host:g}=new URL(p),_=Ks(g);return this.Jo(e,p,v,s,_).then((T=>(pe(kp,`Received RPC '${e}' ${d}: `,T),T)),(T=>{throw nl(kp,`RPC '${e}' ${d} failed with error: `,T,"url: ",p,"request:",s),T}))}Ho(e,t,s,o,c,d){return this.Go(e,t,s,o,c)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+dl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}zo(e,t){const s=E2[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class T2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ln="WebChannelConnection";class x2 extends b2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,c){const d=gg();return new Promise(((p,v)=>{const g=new qb;g.setWithCredentials(!0),g.listenOnce(Hb.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case fh.NO_ERROR:const T=g.getResponseJson();pe(ln,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(T)),p(T);break;case fh.TIMEOUT:pe(ln,`RPC '${e}' ${d} timed out`),v(new fe(ae.DEADLINE_EXCEEDED,"Request time out"));break;case fh.HTTP_ERROR:const x=g.getStatus();if(pe(ln,`RPC '${e}' ${d} failed with status:`,x,"response text:",g.getResponseText()),x>0){let w=g.getResponseJson();Array.isArray(w)&&(w=w[0]);const I=w?.error;if(I&&I.status&&I.message){const U=(function(q){const X=q.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(X)>=0?X:ae.UNKNOWN})(I.status);v(new fe(U,I.message))}else v(new fe(ae.UNKNOWN,"Server responded with status "+g.getStatus()))}else v(new fe(ae.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:d,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{pe(ln,`RPC '${e}' ${d} completed.`)}}));const _=JSON.stringify(o);pe(ln,`RPC '${e}' ${d} sending request:`,o),g.send(t,"POST",_,s,15)}))}T_(e,t,s){const o=gg(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Qb(),p=$b(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(v.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,t,s),v.encodeInitMessageHeaders=!0;const _=c.join("");pe(ln,`Creating RPC '${e}' stream ${o}: ${_}`,v);const T=d.createWebChannel(_,v);this.I_(T);let x=!1,w=!1;const I=new T2({Yo:L=>{w?pe(ln,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(x||(pe(ln,`Opening RPC '${e}' stream ${o} transport.`),T.open(),x=!0),pe(ln,`RPC '${e}' stream ${o} sending:`,L),T.send(L))},Zo:()=>T.close()}),U=(L,q,X)=>{L.listen(q,(F=>{try{X(F)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return U(T,Pc.EventType.OPEN,(()=>{w||(pe(ln,`RPC '${e}' stream ${o} transport opened.`),I.o_())})),U(T,Pc.EventType.CLOSE,(()=>{w||(w=!0,pe(ln,`RPC '${e}' stream ${o} transport closed`),I.a_(),this.E_(T))})),U(T,Pc.EventType.ERROR,(L=>{w||(w=!0,nl(ln,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),I.a_(new fe(ae.UNAVAILABLE,"The operation could not be completed")))})),U(T,Pc.EventType.MESSAGE,(L=>{if(!w){const q=L.data[0];Je(!!q,16349);const X=q,F=X?.error||X[0]?.error;if(F){pe(ln,`RPC '${e}' stream ${o} received error:`,F);const oe=F.status;let ce=(function(D){const S=Ut[D];if(S!==void 0)return AT(S)})(oe),ue=F.message;ce===void 0&&(ce=ae.INTERNAL,ue="Unknown error status: "+oe+" with message "+F.message),w=!0,I.a_(new fe(ce,ue)),T.close()}else pe(ln,`RPC '${e}' stream ${o} received:`,q),I.u_(q)}})),U(p,Gb.STAT_EVENT,(L=>{L.stat===rg.PROXY?pe(ln,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===rg.NOPROXY&&pe(ln,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{I.__()}),0),I}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Up(){return typeof document<"u"?document:null}function ff(n){return new AC(n,!0)}class BT{constructor(e,t,s=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const y1="PersistentStream";class FT{constructor(e,t,s,o,c,d,p,v){this.Mi=e,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new BT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Lr(t.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new fe(ae.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(y1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(pe(y1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class w2 extends FT{constructor(e,t,s,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=jC(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Ne.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ne.min():d.readTime?tr(d.readTime):Ne.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=mg(this.serializer),t.addTarget=(function(c,d){let p;const v=d.target;if(p=cg(v)?{documents:OC(c,v)}:{query:PC(c,v).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=jT(c,d.resumeToken);const g=dg(c,d.expectedCount);g!==null&&(p.expectedCount=g)}else if(d.snapshotVersion.compareTo(Ne.min())>0){p.readTime=Vh(c,d.snapshotVersion.toTimestamp());const g=dg(c,d.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,e);const s=MC(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=mg(this.serializer),t.removeTarget=e,this.q_(t)}}class S2 extends FT{constructor(e,t,s,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=IC(e.writeResults,e.commitTime),s=tr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=mg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>DC(this.serializer,s)))};this.q_(t)}}class N2{}class A2 extends N2{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new fe(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,hg(t,s),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new fe(ae.UNKNOWN,c.toString())}))}Ho(e,t,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(e,hg(t,s),o,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new fe(ae.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class R2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Lr(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Bi="RemoteStore";class C2{constructor(e,t,s,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Ki(this)&&(pe(Bi,"Restarting streams for network reachability change."),await(async function(v){const g=Re(v);g.Ea.add(4),await uu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await mf(g)})(this))}))})),this.Ra=new R2(s,o)}}async function mf(n){if(Ki(n))for(const e of n.da)await e(!0)}async function uu(n){for(const e of n.da)await e(!1)}function qT(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),rv(t)?av(t):pl(t).O_()&&nv(t,e))}function tv(n,e){const t=Re(n),s=pl(t);t.Ia.delete(e),s.O_()&&HT(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ki(t)&&t.Ra.set("Unknown"))}function nv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}pl(n).Y_(e)}function HT(n,e){n.Va.Ue(e),pl(n).Z_(e)}function av(n){n.Va=new xC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),pl(n).start(),n.Ra.ua()}function rv(n){return Ki(n)&&!pl(n).x_()&&n.Ia.size>0}function Ki(n){return Re(n).Ea.size===0}function GT(n){n.Va=void 0}async function j2(n){n.Ra.set("Online")}async function D2(n){n.Ia.forEach(((e,t)=>{nv(n,e)}))}async function I2(n,e){GT(n),rv(n)?(n.Ra.ha(e),av(n)):n.Ra.set("Unknown")}async function O2(n,e,t){if(n.Ra.set("Online"),e instanceof CT&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const p of c.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ia.delete(p),o.Va.removeTarget(p))})(n,e)}catch(s){pe(Bi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Lh(n,s)}else if(e instanceof vh?n.Va.Ze(e):e instanceof RT?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ne.min()))try{const s=await zT(n.localStore);t.compareTo(s)>=0&&await(function(c,d){const p=c.Va.Tt(d);return p.targetChanges.forEach(((v,g)=>{if(v.resumeToken.approximateByteSize()>0){const _=c.Ia.get(g);_&&c.Ia.set(g,_.withResumeToken(v.resumeToken,d))}})),p.targetMismatches.forEach(((v,g)=>{const _=c.Ia.get(v);if(!_)return;c.Ia.set(v,_.withResumeToken(sn.EMPTY_BYTE_STRING,_.snapshotVersion)),HT(c,v);const T=new Ps(_.target,v,g,_.sequenceNumber);nv(c,T)})),c.remoteSyncer.applyRemoteEvent(p)})(n,t)}catch(s){pe(Bi,"Failed to raise snapshot:",s),await Lh(n,s)}}async function Lh(n,e,t){if(!fl(e))throw e;n.Ea.add(1),await uu(n),n.Ra.set("Offline"),t||(t=()=>zT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(Bi,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await mf(n)}))}function $T(n,e){return e().catch((t=>Lh(n,t,e)))}async function pf(n){const e=Re(n),t=$s(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Fg;for(;P2(e);)try{const o=await p2(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,V2(e,o)}catch(o){await Lh(e,o)}QT(e)&&YT(e)}function P2(n){return Ki(n)&&n.Ta.length<10}function V2(n,e){n.Ta.push(e);const t=$s(n);t.O_()&&t.X_&&t.ea(e.mutations)}function QT(n){return Ki(n)&&!$s(n).x_()&&n.Ta.length>0}function YT(n){$s(n).start()}async function M2(n){$s(n).ra()}async function L2(n){const e=$s(n);for(const t of n.Ta)e.ea(t.mutations)}async function k2(n,e,t){const s=n.Ta.shift(),o=Yg.from(s,e,t);await $T(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await pf(n)}async function U2(n,e){e&&$s(n).X_&&await(async function(s,o){if((function(d){return EC(d)&&d!==ae.ABORTED})(o.code)){const c=s.Ta.shift();$s(s).B_(),await $T(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await pf(s)}})(n,e),QT(n)&&YT(n)}async function _1(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),pe(Bi,"RemoteStore received new credentials");const s=Ki(t);t.Ea.add(3),await uu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await mf(t)}async function z2(n,e){const t=Re(n);e?(t.Ea.delete(2),await mf(t)):e||(t.Ea.add(2),await uu(t),t.Ra.set("Unknown"))}function pl(n){return n.ma||(n.ma=(function(t,s,o){const c=Re(t);return c.sa(),new w2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(n.datastore,n.asyncQueue,{Xo:j2.bind(null,n),t_:D2.bind(null,n),r_:I2.bind(null,n),H_:O2.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),rv(n)?av(n):n.Ra.set("Unknown")):(await n.ma.stop(),GT(n))}))),n.ma}function $s(n){return n.fa||(n.fa=(function(t,s,o){const c=Re(t);return c.sa(),new S2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:M2.bind(null,n),r_:U2.bind(null,n),ta:L2.bind(null,n),na:k2.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await pf(n)):(await n.fa.stop(),n.Ta.length>0&&(pe(Bi,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class sv{constructor(e,t,s,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,c){const d=Date.now()+s,p=new sv(e,t,d,o,c);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iv(n,e){if(Lr("AsyncQueue",`${e}: ${n}`),fl(n))return new fe(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class Xo{static emptySet(e){return new Xo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ee.comparator(t.key,s.key):(t,s)=>Ee.comparator(t.key,s.key),this.keyedMap=Vc(),this.sortedSet=new vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Xo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class E1{constructor(){this.ga=new vt(Ee.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ol{constructor(e,t,s,o,c,d,p,v,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=v,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,o,c){const d=[];return t.forEach((p=>{d.push({type:0,doc:p})})),new ol(e,t,Xo.emptySet(t),d,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class B2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class F2{constructor(){this.queries=b1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Re(t),c=o.queries;o.queries=b1(),c.forEach(((d,p)=>{for(const v of p.Sa)v.onError(s)}))})(this,new fe(ae.ABORTED,"Firestore shutting down"))}}function b1(){return new Yi((n=>pT(n)),of)}async function ov(n,e){const t=Re(n);let s=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(s=2):(c=new B2,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const p=iv(d,`Initialization of query '${$o(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&cv(t)}async function lv(n,e){const t=Re(n),s=e.query;let o=3;const c=t.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function q2(n,e){const t=Re(n);let s=!1;for(const o of e){const c=o.query,d=t.queries.get(c);if(d){for(const p of d.Sa)p.Fa(o)&&(s=!0);d.wa=o}}s&&cv(t)}function H2(n,e,t){const s=Re(n),o=s.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);s.queries.delete(e)}function cv(n){n.Ca.forEach((e=>{e.next()}))}var vg,T1;(T1=vg||(vg={})).Ma="default",T1.Cache="cache";class uv{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new ol(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vg.Cache}}class KT{constructor(e){this.key=e}}class XT{constructor(e){this.key=e}}class G2{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=gT(e),this.tu=new Xo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new E1,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=o,p=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const x=o.get(_),w=lf(this.query,T)?T:null,I=!!x&&this.mutatedKeys.has(x.key),U=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let L=!1;x&&w?x.data.isEqual(w.data)?I!==U&&(s.track({type:3,doc:w}),L=!0):this.su(x,w)||(s.track({type:2,doc:w}),L=!0,(v&&this.eu(w,v)>0||g&&this.eu(w,g)<0)&&(p=!0)):!x&&w?(s.track({type:0,doc:w}),L=!0):x&&!w&&(s.track({type:1,doc:x}),L=!0,(v||g)&&(p=!0)),L&&(w?(d=d.add(w),c=U?c.add(_):c.delete(_)):(d=d.delete(_),c=c.delete(_)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),c=c.delete(_.key),s.track({type:1,doc:_})}return{tu:d,iu:s,Cs:p,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((_,T)=>(function(w,I){const U=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:L})}};return U(w)-U(I)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(s),o=o??!1;const p=t&&!o?this._u():[],v=this.Xa.size===0&&this.current&&!o?1:0,g=v!==this.Za;return this.Za=v,d.length!==0||g?{snapshot:new ol(this.query,e.tu,c,d,e.mutatedKeys,v===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new E1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new XT(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new KT(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Fe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ol.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const dv="SyncEngine";class $2{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Q2{constructor(e){this.key=e,this.hu=!1}}class Y2{constructor(e,t,s,o,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Yi((p=>pT(p)),of),this.Iu=new Map,this.Eu=new Set,this.du=new vt(Ee.comparator),this.Au=new Map,this.Ru=new Jg,this.Vu={},this.mu=new Map,this.fu=il.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function K2(n,e,t=!0){const s=nx(n);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await JT(s,e,t,!0),o}async function X2(n,e){const t=nx(n);await JT(t,e,!0,!1)}async function JT(n,e,t,s){const o=await g2(n.localStore,er(e)),c=o.targetId,d=n.sharedClientState.addLocalQueryTarget(c,t);let p;return s&&(p=await J2(n,e,c,d==="current",o.resumeToken)),n.isPrimaryClient&&t&&qT(n.remoteStore,o),p}async function J2(n,e,t,s,o){n.pu=(T,x,w)=>(async function(U,L,q,X){let F=L.view.ru(q);F.Cs&&(F=await m1(U.localStore,L.query,!1).then((({documents:A})=>L.view.ru(A,F))));const oe=X&&X.targetChanges.get(L.targetId),ce=X&&X.targetMismatches.get(L.targetId)!=null,ue=L.view.applyChanges(F,U.isPrimaryClient,oe,ce);return w1(U,L.targetId,ue.au),ue.snapshot})(n,T,x,w);const c=await m1(n.localStore,e,!0),d=new G2(e,c.Qs),p=d.ru(c.documents),v=cu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),g=d.applyChanges(p,n.isPrimaryClient,v);w1(n,t,g.au);const _=new $2(e,t,d);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function W2(n,e,t){const s=Re(n),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((d=>!of(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await pg(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&tv(s.remoteStore,o.targetId),yg(s,o.targetId)})).catch(hl)):(yg(s,o.targetId),await pg(s.localStore,o.targetId,!0))}async function Z2(n,e){const t=Re(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),tv(t.remoteStore,s.targetId))}async function ej(n,e,t){const s=oj(n);try{const o=await(function(d,p){const v=Re(d),g=me.now(),_=p.reduce(((w,I)=>w.add(I.key)),Fe());let T,x;return v.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let I=kr(),U=Fe();return v.Ns.getEntries(w,_).next((L=>{I=L,I.forEach(((q,X)=>{X.isValidDocument()||(U=U.add(q))}))})).next((()=>v.localDocuments.getOverlayedDocuments(w,I))).next((L=>{T=L;const q=[];for(const X of p){const F=pC(X,T.get(X.key).overlayedDocument);F!=null&&q.push(new Js(X.key,F,oT(F.value.mapValue),yn.exists(!0)))}return v.mutationQueue.addMutationBatch(w,g,q,p)})).next((L=>{x=L;const q=L.applyToLocalDocumentSet(T,U);return v.documentOverlayCache.saveOverlays(w,L.batchId,q)}))})).then((()=>({batchId:x.batchId,changes:yT(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,p,v){let g=d.Vu[d.currentUser.toKey()];g||(g=new vt(Be)),g=g.insert(p,v),d.Vu[d.currentUser.toKey()]=g})(s,o.batchId,t),await du(s,o.changes),await pf(s.remoteStore)}catch(o){const c=iv(o,"Failed to persist write");t.reject(c)}}async function WT(n,e){const t=Re(n);try{const s=await f2(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=t.Au.get(c);d&&(Je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Je(d.hu,14607):o.removedDocuments.size>0&&(Je(d.hu,42227),d.hu=!1))})),await du(t,s,e)}catch(s){await hl(s)}}function x1(n,e,t){const s=Re(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((c,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const v=Re(d);v.onlineState=p;let g=!1;v.queries.forEach(((_,T)=>{for(const x of T.Sa)x.va(p)&&(g=!0)})),g&&cv(v)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function tj(n,e,t){const s=Re(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),c=o&&o.key;if(c){let d=new vt(Ee.comparator);d=d.insert(c,un.newNoDocument(c,Ne.min()));const p=Fe().add(c),v=new hf(Ne.min(),new Map,new vt(Be),d,p);await WT(s,v),s.du=s.du.remove(c),s.Au.delete(e),hv(s)}else await pg(s.localStore,e,!1).then((()=>yg(s,e,t))).catch(hl)}async function nj(n,e){const t=Re(n),s=e.batch.batchId;try{const o=await h2(t.localStore,e);ex(t,s,null),ZT(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await du(t,o)}catch(o){await hl(o)}}async function aj(n,e,t){const s=Re(n);try{const o=await(function(d,p){const v=Re(d);return v.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return v.mutationQueue.lookupMutationBatch(g,p).next((T=>(Je(T!==null,37113),_=T.keys(),v.mutationQueue.removeMutationBatch(g,T)))).next((()=>v.mutationQueue.performConsistencyCheck(g))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(g,_,p))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>v.localDocuments.getDocuments(g,_)))}))})(s.localStore,e);ex(s,e,t),ZT(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await du(s,o)}catch(o){await hl(o)}}function ZT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function ex(n,e,t){const s=Re(n);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function yg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||tx(n,s)}))}function tx(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(tv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),hv(n))}function w1(n,e,t){for(const s of t)s instanceof KT?(n.Ru.addReference(s.key,e),rj(n,s)):s instanceof XT?(pe(dv,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||tx(n,s.key)):Se(19791,{wu:s})}function rj(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(pe(dv,"New document in limbo: "+t),n.Eu.add(s),hv(n))}function hv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ee(lt.fromString(e)),s=n.fu.next();n.Au.set(s,new Q2(t)),n.du=n.du.insert(t,s),qT(n.remoteStore,new Ps(er(sf(t.path)),s,"TargetPurposeLimboResolution",nf.ce))}}async function du(n,e,t){const s=Re(n),o=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,v)=>{d.push(s.pu(v,e,t).then((g=>{if((g||t)&&s.isPrimaryClient){const _=g?!g.fromCache:t?.targetChanges.get(v.targetId)?.current;s.sharedClientState.updateQueryState(v.targetId,_?"current":"not-current")}if(g){o.push(g);const _=Zg.As(v.targetId,g);c.push(_)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(v,g){const _=Re(v);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ie.forEach(g,(x=>ie.forEach(x.Es,(w=>_.persistence.referenceDelegate.addReference(T,x.targetId,w))).next((()=>ie.forEach(x.ds,(w=>_.persistence.referenceDelegate.removeReference(T,x.targetId,w)))))))))}catch(T){if(!fl(T))throw T;pe(ev,"Failed to update sequence numbers: "+T)}for(const T of g){const x=T.targetId;if(!T.fromCache){const w=_.Ms.get(x),I=w.snapshotVersion,U=w.withLastLimboFreeSnapshotVersion(I);_.Ms=_.Ms.insert(x,U)}}})(s.localStore,c))}async function sj(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){pe(dv,"User change. New user:",e.toKey());const s=await UT(t.localStore,e);t.currentUser=e,(function(c,d){c.mu.forEach((p=>{p.forEach((v=>{v.reject(new fe(ae.CANCELLED,d))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await du(t,s.Ls)}}function ij(n,e){const t=Re(n),s=t.Au.get(e);if(s&&s.hu)return Fe().add(s.key);{let o=Fe();const c=t.Iu.get(e);if(!c)return o;for(const d of c){const p=t.Tu.get(d);o=o.unionWith(p.view.nu)}return o}}function nx(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=WT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ij.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tj.bind(null,e),e.Pu.H_=q2.bind(null,e.eventManager),e.Pu.yu=H2.bind(null,e.eventManager),e}function oj(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aj.bind(null,e),e}class kh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ff(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return d2(this.persistence,new l2,e.initialUser,this.serializer)}Cu(e){return new kT(Wg.mi,this.serializer)}Du(e){return new y2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kh.provider={build:()=>new kh};class lj extends kh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Je(this.persistence.referenceDelegate instanceof Mh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new QC(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new kT((s=>Mh.mi(s,t)),this.serializer)}}class _g{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>x1(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=sj.bind(null,this.syncEngine),await z2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new F2})()}createDatastore(e){const t=ff(e.databaseInfo.databaseId),s=(function(c){return new x2(c)})(e.databaseInfo);return(function(c,d,p,v){return new A2(c,d,p,v)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,c,d,p){return new C2(s,o,c,d,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>x1(this.syncEngine,t,0)),(function(){return v1.v()?new v1:new _2})())}createSyncEngine(e,t){return(function(o,c,d,p,v,g,_){const T=new Y2(o,c,d,p,v,g);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Re(t);pe(Bi,"RemoteStore shutting down."),s.Ea.add(5),await uu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}_g.provider={build:()=>new _g};class fv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Qs="FirestoreClient";class cj{constructor(e,t,s,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=cn.UNAUTHENTICATED,this.clientId=Bg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{pe(Qs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(pe(Qs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=iv(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function zp(n,e){n.asyncQueue.verifyOperationInProgress(),pe(Qs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await UT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function S1(n,e){n.asyncQueue.verifyOperationInProgress();const t=await uj(n);pe(Qs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>_1(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>_1(e.remoteStore,o))),n._onlineComponents=e}async function uj(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(Qs,"Using user provided OfflineComponentProvider");try{await zp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ae.FAILED_PRECONDITION||o.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;nl("Error using user provided cache. Falling back to memory cache: "+t),await zp(n,new kh)}}else pe(Qs,"Using default OfflineComponentProvider"),await zp(n,new lj(void 0));return n._offlineComponents}async function ax(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(Qs,"Using user provided OnlineComponentProvider"),await S1(n,n._uninitializedComponentsProvider._online)):(pe(Qs,"Using default OnlineComponentProvider"),await S1(n,new _g))),n._onlineComponents}function dj(n){return ax(n).then((e=>e.syncEngine))}async function Uh(n){const e=await ax(n),t=e.eventManager;return t.onListen=K2.bind(null,e.syncEngine),t.onUnlisten=W2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=X2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Z2.bind(null,e.syncEngine),t}function hj(n,e,t={}){const s=new Ir;return n.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,v,g){const _=new fv({next:x=>{_.Nu(),d.enqueueAndForget((()=>lv(c,T)));const w=x.docs.has(p);!w&&x.fromCache?g.reject(new fe(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&x.fromCache&&v&&v.source==="server"?g.reject(new fe(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(x)},error:x=>g.reject(x)}),T=new uv(sf(p.path),_,{includeMetadataChanges:!0,qa:!0});return ov(c,T)})(await Uh(n),n.asyncQueue,e,t,s))),s.promise}function fj(n,e,t={}){const s=new Ir;return n.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,v,g){const _=new fv({next:x=>{_.Nu(),d.enqueueAndForget((()=>lv(c,T))),x.fromCache&&v.source==="server"?g.reject(new fe(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(x)},error:x=>g.reject(x)}),T=new uv(p,_,{includeMetadataChanges:!0,qa:!0});return ov(c,T)})(await Uh(n),n.asyncQueue,e,t,s))),s.promise}function rx(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const N1=new Map;const sx="firestore.googleapis.com",A1=!0;class R1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sx,this.ssl=A1}else this.host=e.host,this.ssl=e.ssl??A1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GC)throw new fe(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rx(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new fe(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new fe(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new fe(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gf{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new R1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new R1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new yR;switch(s.type){case"firstParty":return new TR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new fe(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=N1.get(t);s&&(pe("ComponentProvider","Removing Datastore"),N1.delete(t),s.terminate())})(this),Promise.resolve()}}function mj(n,e,t,s={}){n=vn(n,gf);const o=Ks(e),c=n._getSettings(),d={...c,emulatorOptions:n._getEmulatorOptions()},p=`${e}:${t}`;o&&(Vg(`https://${p}`),Mg("Firestore",!0)),c.host!==sx&&c.host!==p&&nl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...c,host:p,ssl:o,emulatorOptions:s};if(!ki(v,d)&&(n._setSettings(v),s.mockUserToken)){let g,_;if(typeof s.mockUserToken=="string")g=s.mockUserToken,_=cn.MOCK_USER;else{g=Mb(s.mockUserToken,n._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new fe(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new cn(T)}n._authCredentials=new _R(new Kb(g,_))}}class Fr{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Fr(this.firestore,e,this._query)}}class Et{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}toJSON(){return{type:Et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(ou(t,Et._jsonSchema))return new Et(e,s||null,new Ee(lt.fromString(t.referencePath)))}}Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:Bt("string",Et._jsonSchemaVersion),referencePath:Bt("string")};class Us extends Fr{constructor(e,t,s){super(e,t,sf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new Ee(e))}withConverter(e){return new Us(this.firestore,e,this._path)}}function Rt(n,e,...t){if(n=ct(n),Xb("collection","path",e),n instanceof gf){const s=lt.fromString(e,...t);return BE(s),new Us(n,null,s)}{if(!(n instanceof Et||n instanceof Us))throw new fe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(lt.fromString(e,...t));return BE(s),new Us(n.firestore,null,s)}}function Xe(n,e,...t){if(n=ct(n),arguments.length===1&&(e=Bg.newId()),Xb("doc","path",e),n instanceof gf){const s=lt.fromString(e,...t);return zE(s),new Et(n,null,new Ee(s))}{if(!(n instanceof Et||n instanceof Us))throw new fe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(lt.fromString(e,...t));return zE(s),new Et(n.firestore,n instanceof Us?n.converter:null,new Ee(s))}}const C1="AsyncQueue";class j1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new BT(this,"async_queue_retry"),this._c=()=>{const s=Up();s&&pe(C1,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Up();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Up();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ir;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!fl(e))throw e;pe(C1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Lr("INTERNAL UNHANDLED ERROR: ",D1(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=sv.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Se(47125,{Pc:D1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function D1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function I1(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of s)if(c in o&&typeof o[c]=="function")return!0;return!1})(n,["next","error","complete"])}class or extends gf{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new j1,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new j1(e),this._firestoreClient=void 0,await e}}}function pj(n,e){const t=typeof n=="object"?n:Ug(),s=typeof n=="string"?n:Ch,o=ef(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=Ob("firestore");c&&mj(o,...c)}return o}function hu(n){if(n._terminated)throw new fe(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||gj(n),n._firestoreClient}function gj(n){const e=n._freezeSettings(),t=(function(o,c,d,p){return new zR(o,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,rx(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new cj(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(n._componentsProvider))}class ra{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ra(sn.fromBase64String(e))}catch(t){throw new fe(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ra(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ra._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ou(e,ra._jsonSchema))return ra.fromBase64String(e.bytes)}}ra._jsonSchemaVersion="firestore/bytes/1.0",ra._jsonSchema={type:Bt("string",ra._jsonSchemaVersion),bytes:Bt("string")};class fu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class mv{constructor(e){this._methodName=e}}class nr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:nr._jsonSchemaVersion}}static fromJSON(e){if(ou(e,nr._jsonSchema))return new nr(e.latitude,e.longitude)}}nr._jsonSchemaVersion="firestore/geoPoint/1.0",nr._jsonSchema={type:Bt("string",nr._jsonSchemaVersion),latitude:Bt("number"),longitude:Bt("number")};class ar{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ar._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ou(e,ar._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ar(e.vectorValues);throw new fe(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ar._jsonSchemaVersion="firestore/vectorValue/1.0",ar._jsonSchema={type:Bt("string",ar._jsonSchemaVersion),vectorValues:Bt("object")};const vj=/^__.*__$/;class yj{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Js(e,this.data,this.fieldMask,t,this.fieldTransforms):new lu(e,this.data,t,this.fieldTransforms)}}class ix{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Js(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ox(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:n})}}class pv{constructor(e,t,s,o,c,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new pv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ox(this.Ac)&&vj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _j{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||ff(e)}Cc(e,t,s,o=!1){return new pv({Ac:e,methodName:t,Dc:s,path:rn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mu(n){const e=n._freezeSettings(),t=ff(n._databaseId);return new _j(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gv(n,e,t,s,o,c={}){const d=n.Cc(c.merge||c.mergeFields?2:0,e,t,o);vv("Data must be an object, but it was:",d,s);const p=ux(s,d);let v,g;if(c.merge)v=new qn(d.fieldMask),g=d.fieldTransforms;else if(c.mergeFields){const _=[];for(const T of c.mergeFields){const x=Eg(e,T,t);if(!d.contains(x))throw new fe(ae.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);hx(_,x)||_.push(x)}v=new qn(_),g=d.fieldTransforms.filter((T=>v.covers(T.field)))}else v=null,g=d.fieldTransforms;return new yj(new Cn(p),v,g)}class vf extends mv{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vf}}function lx(n,e,t,s){const o=n.Cc(1,e,t);vv("Data must be an object, but it was:",o,s);const c=[],d=Cn.empty();Xs(s,((v,g)=>{const _=yv(e,v,t);g=ct(g);const T=o.yc(_);if(g instanceof vf)c.push(_);else{const x=pu(g,T);x!=null&&(c.push(_),d.set(_,x))}}));const p=new qn(c);return new ix(d,p,o.fieldTransforms)}function cx(n,e,t,s,o,c){const d=n.Cc(1,e,t),p=[Eg(e,s,t)],v=[o];if(c.length%2!=0)throw new fe(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<c.length;x+=2)p.push(Eg(e,c[x])),v.push(c[x+1]);const g=[],_=Cn.empty();for(let x=p.length-1;x>=0;--x)if(!hx(g,p[x])){const w=p[x];let I=v[x];I=ct(I);const U=d.yc(w);if(I instanceof vf)g.push(w);else{const L=pu(I,U);L!=null&&(g.push(w),_.set(w,L))}}const T=new qn(g);return new ix(_,T,d.fieldTransforms)}function Ej(n,e,t,s=!1){return pu(t,n.Cc(s?4:3,e))}function pu(n,e){if(dx(n=ct(n)))return vv("Unsupported field value:",e,n),ux(n,e);if(n instanceof mv)return(function(s,o){if(!ox(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let d=0;for(const p of s){let v=pu(p,o.wc(d));v==null&&(v={nullValue:"NULL_VALUE"}),c.push(v),d++}return{arrayValue:{values:c}}})(n,e)}return(function(s,o){if((s=ct(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return cC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=me.fromDate(s);return{timestampValue:Vh(o.serializer,c)}}if(s instanceof me){const c=new me(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Vh(o.serializer,c)}}if(s instanceof nr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ra)return{bytesValue:jT(o.serializer,s._byteString)};if(s instanceof Et){const c=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Xg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ar)return(function(d,p){return{mapValue:{fields:{[sT]:{stringValue:iT},[jh]:{arrayValue:{values:d.toArray().map((g=>{if(typeof g!="number")throw p.Sc("VectorValues must only contain numeric values.");return Qg(p.serializer,g)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${tf(s)}`)})(n,e)}function ux(n,e){const t={};return Zb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xs(n,((s,o)=>{const c=pu(o,e.mc(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function dx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof me||n instanceof nr||n instanceof ra||n instanceof Et||n instanceof mv||n instanceof ar)}function vv(n,e,t){if(!dx(t)||!Jb(t)){const s=tf(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Eg(n,e,t){if((e=ct(e))instanceof fu)return e._internalPath;if(typeof e=="string")return yv(n,e);throw zh("Field path arguments must be of type string or ",n,!1,void 0,t)}const bj=new RegExp("[~\\*/\\[\\]]");function yv(n,e,t){if(e.search(bj)>=0)throw zh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fu(...e.split("."))._internalPath}catch{throw zh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zh(n,e,t,s,o){const c=s&&!s.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let v="";return(c||d)&&(v+=" (found",c&&(v+=` in field ${s}`),d&&(v+=` in document ${o}`),v+=")"),new fe(ae.INVALID_ARGUMENT,p+n+v)}function hx(n,e){return n.some((t=>t.isEqual(e)))}class fx{constructor(e,t,s,o,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Tj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Tj extends fx{data(){return super.data()}}function yf(n,e){return typeof e=="string"?yv(n,e):e instanceof fu?e._internalPath:e._delegate._internalPath}function mx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _v{}class Ev extends _v{}function tt(n,e,...t){let s=[];e instanceof _v&&s.push(e),s=s.concat(t),(function(c){const d=c.filter((v=>v instanceof bv)).length,p=c.filter((v=>v instanceof _f)).length;if(d>1||d>0&&p>0)throw new fe(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)n=o._apply(n);return n}class _f extends Ev{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new _f(e,t,s)}_apply(e){const t=this._parse(e);return px(e._query,t),new Fr(e.firestore,e.converter,ug(e._query,t))}_parse(e){const t=mu(e.firestore);return(function(c,d,p,v,g,_,T){let x;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new fe(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){V1(T,_);const I=[];for(const U of T)I.push(P1(v,c,U));x={arrayValue:{values:I}}}else x=P1(v,c,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||V1(T,_),x=Ej(p,d,T,_==="in"||_==="not-in");return zt.create(g,_,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Te(n,e,t){const s=e,o=yf("where",n);return _f._create(o,s,t)}class bv extends _v{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bv(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:xa.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let d=o;const p=c.getFlattenedFilters();for(const v of p)px(d,v),d=ug(d,v)})(e._query,t),new Fr(e.firestore,e.converter,ug(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Tv extends Ev{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Tv(e,t)}_apply(e){const t=(function(o,c,d){if(o.startAt!==null)throw new fe(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new fe(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zc(c,d)})(e._query,this._field,this._direction);return new Fr(e.firestore,e.converter,(function(o,c){const d=o.explicitOrderBy.concat([c]);return new ml(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function jn(n,e="asc"){const t=e,s=yf("orderBy",n);return Tv._create(s,t)}class xv extends Ev{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new xv(e,t,s)}_apply(e){return new Fr(e.firestore,e.converter,Ih(e._query,this._limit,this._limitType))}}function O1(n){return CR("limit",n),xv._create("limit",n,"F")}function P1(n,e,t){if(typeof(t=ct(t))=="string"){if(t==="")throw new fe(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mT(e)&&t.indexOf("/")!==-1)throw new fe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(lt.fromString(t));if(!Ee.isDocumentKey(s))throw new fe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return KE(n,new Ee(s))}if(t instanceof Et)return KE(n,t._key);throw new fe(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tf(t)}.`)}function V1(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function px(n,e){const t=(function(o,c){for(const d of o)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new fe(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class xj{convertValue(e,t="none"){switch(Gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Xs(e,((o,c)=>{s[o]=this.convertValue(c,t)})),s}convertVectorValue(e){const t=e.fields?.[jh].arrayValue?.values?.map((s=>At(s.doubleValue)));return new ar(t)}convertGeoPoint(e){return new nr(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=rf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Xc(e));default:return null}}convertTimestamp(e){const t=qs(e);return new me(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=lt.fromString(e);Je(MT(s),9688,{name:e});const o=new Jc(s.get(1),s.get(3)),c=new Ee(s.popFirst(5));return o.isEqual(t)||Lr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function wv(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class Lc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vi extends fx{constructor(e,t,s,o,c,d){super(e,t,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(yf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Vi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Vi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vi._jsonSchema={type:Bt("string",Vi._jsonSchemaVersion),bundleSource:Bt("string","DocumentSnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class yh extends Vi{data(e={}){return super.data(e)}}class Mi{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Lc(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new yh(this._firestore,this._userDataWriter,s.key,s,new Lc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const v=new yh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Lc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:v,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const v=new yh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Lc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return p.type!==0&&(g=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),_=d.indexOf(p.doc.key)),{type:wj(p.type),doc:v,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Mi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}function Fi(n){n=vn(n,Et);const e=vn(n.firestore,or);return hj(hu(e),n._key).then((t=>gx(e,n,t)))}Mi._jsonSchemaVersion="firestore/querySnapshot/1.0",Mi._jsonSchema={type:Bt("string",Mi._jsonSchemaVersion),bundleSource:Bt("string","QuerySnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class Sv extends xj{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,t)}}function Ct(n){n=vn(n,Fr);const e=vn(n.firestore,or),t=hu(e),s=new Sv(e);return mx(n._query),fj(t,n._query).then((o=>new Mi(e,s,n,o)))}function M1(n,e,t){n=vn(n,Et);const s=vn(n.firestore,or),o=wv(n.converter,e,t);return gu(s,[gv(mu(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,yn.none())])}function Dn(n,e,t,...s){n=vn(n,Et);const o=vn(n.firestore,or),c=mu(o);let d;return d=typeof(e=ct(e))=="string"||e instanceof fu?cx(c,"updateDoc",n._key,e,t,s):lx(c,"updateDoc",n._key,e),gu(o,[d.toMutation(n._key,yn.exists(!0))])}function Ys(n){return gu(vn(n.firestore,or),[new df(n._key,yn.none())])}function Ur(n,e){const t=vn(n.firestore,or),s=Xe(n),o=wv(n.converter,e);return gu(t,[gv(mu(n.firestore),"addDoc",s._key,o,n.converter!==null,{}).toMutation(s._key,yn.exists(!1))]).then((()=>s))}function L1(n,...e){n=ct(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||I1(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(I1(e[s])){const v=e[s];e[s]=v.next?.bind(v),e[s+1]=v.error?.bind(v),e[s+2]=v.complete?.bind(v)}let c,d,p;if(n instanceof Et)d=vn(n.firestore,or),p=sf(n._key.path),c={next:v=>{e[s]&&e[s](gx(d,n,v))},error:e[s+1],complete:e[s+2]};else{const v=vn(n,Fr);d=vn(v.firestore,or),p=v._query;const g=new Sv(d);c={next:_=>{e[s]&&e[s](new Mi(d,g,v,_))},error:e[s+1],complete:e[s+2]},mx(n._query)}return(function(g,_,T,x){const w=new fv(x),I=new uv(_,w,T);return g.asyncQueue.enqueueAndForget((async()=>ov(await Uh(g),I))),()=>{w.Nu(),g.asyncQueue.enqueueAndForget((async()=>lv(await Uh(g),I)))}})(hu(d),p,o,c)}function gu(n,e){return(function(s,o){const c=new Ir;return s.asyncQueue.enqueueAndForget((async()=>ej(await dj(s),o,c))),c.promise})(hu(n),e)}function gx(n,e,t){const s=t.docs.get(e._key),o=new Sv(n);return new Vi(n,o,e._key,s,new Lc(t.hasPendingWrites,t.fromCache),e.converter)}class Sj{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mu(e)}set(e,t,s){this._verifyNotCommitted();const o=Bp(e,this._firestore),c=wv(o.converter,t,s),d=gv(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,s);return this._mutations.push(d.toMutation(o._key,yn.none())),this}update(e,t,s,...o){this._verifyNotCommitted();const c=Bp(e,this._firestore);let d;return d=typeof(t=ct(t))=="string"||t instanceof fu?cx(this._dataReader,"WriteBatch.update",c._key,t,s,o):lx(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(d.toMutation(c._key,yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Bp(e,this._firestore);return this._mutations=this._mutations.concat(new df(t._key,yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bp(n,e){if((n=ct(n)).firestore!==e)throw new fe(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Fp(n){return hu(n=vn(n,or)),new Sj(n,(e=>gu(n,e)))}(function(e,t=!0){(function(o){dl=o})(Qi),Ui(new Bs("firestore",((s,{instanceIdentifier:o,options:c})=>{const d=s.getProvider("app").getImmediate(),p=new or(new ER(s.getProvider("auth-internal")),new xR(d,s.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new fe(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jc(g.options.projectId,_)})(d,o),d);return c={useFetchStreams:t,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Za(ME,LE,e),Za(ME,LE,"esm2020")})();function vx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Nj=vx,yx=new su("auth","Firebase",vx());const Bh=new Lg("@firebase/auth");function Aj(n,...e){Bh.logLevel<=ze.WARN&&Bh.warn(`Auth (${Qi}): ${n}`,...e)}function _h(n,...e){Bh.logLevel<=ze.ERROR&&Bh.error(`Auth (${Qi}): ${n}`,...e)}function wa(n,...e){throw Nv(n,...e)}function rr(n,...e){return Nv(n,...e)}function _x(n,e,t){const s={...Nj(),[e]:t};return new su("auth","Firebase",s).create(e,{appName:n.name})}function Or(n){return _x(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nv(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return yx.create(n,...e)}function we(n,e,...t){if(!n)throw Nv(e,...t)}function jr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _h(e),new Error(e)}function zr(n,e){n||jr(e)}function bg(){return typeof self<"u"&&self.location?.href||""}function Rj(){return k1()==="http:"||k1()==="https:"}function k1(){return typeof self<"u"&&self.location?.protocol||null}function Cj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Rj()||KN()||"connection"in navigator)?navigator.onLine:!0}function jj(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class vu{constructor(e,t){this.shortDelay=e,this.longDelay=t,zr(t>e,"Short delay should be less than long delay!"),this.isMobile=$N()||XN()}get(){return Cj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Av(n,e){zr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Ex{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Dj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Ij=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Oj=new vu(3e4,6e4);function qr(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Hr(n,e,t,s,o={}){return bx(n,o,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const p=iu({key:n.config.apiKey,...d}).slice(1),v=await n._getAdditionalHeaders();v["Content-Type"]="application/json",n.languageCode&&(v["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:v,...c};return YN()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Ks(n.emulatorConfig.host)&&(g.credentials="include"),Ex.fetch()(await Tx(n,n.config.apiHost,t,p),g)})}async function bx(n,e,t){n._canInitEmulator=!1;const s={...Dj,...e};try{const o=new Vj(n),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw rh(n,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[v,g]=p.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw rh(n,"credential-already-in-use",d);if(v==="EMAIL_EXISTS")throw rh(n,"email-already-in-use",d);if(v==="USER_DISABLED")throw rh(n,"user-disabled",d);const _=s[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw _x(n,_,g);wa(n,_)}}catch(o){if(o instanceof lr)throw o;wa(n,"network-request-failed",{message:String(o)})}}async function yu(n,e,t,s,o={}){const c=await Hr(n,e,t,s,o);return"mfaPendingCredential"in c&&wa(n,"multi-factor-auth-required",{_serverResponse:c}),c}async function Tx(n,e,t,s){const o=`${e}${t}?${s}`,c=n,d=c.config.emulator?Av(n.config,o):`${n.config.apiScheme}://${o}`;return Ij.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function Pj(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Vj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(rr(this.auth,"network-request-failed")),Oj.get())})}}function rh(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=rr(n,e,s);return o.customData._tokenResponse=t,o}function U1(n){return n!==void 0&&n.enterprise!==void 0}class Mj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Pj(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Lj(n,e){return Hr(n,"GET","/v2/recaptchaConfig",qr(n,e))}async function kj(n,e){return Hr(n,"POST","/v1/accounts:delete",e)}async function Fh(n,e){return Hr(n,"POST","/v1/accounts:lookup",e)}function Gc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Uj(n,e=!1){const t=ct(n),s=await t.getIdToken(e),o=Rv(s);we(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c?.sign_in_provider;return{claims:o,token:s,authTime:Gc(qp(o.auth_time)),issuedAtTime:Gc(qp(o.iat)),expirationTime:Gc(qp(o.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function qp(n){return Number(n)*1e3}function Rv(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return _h("JWT malformed, contained fewer than 3 sections"),null;try{const o=Db(t);return o?JSON.parse(o):(_h("Failed to decode base64 JWT payload"),null)}catch(o){return _h("Caught error parsing JWT payload as JSON",o?.toString()),null}}function z1(n){const e=Rv(n);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function nu(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof lr&&zj(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function zj({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class Bj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Tg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gc(this.lastLoginAt),this.creationTime=Gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function qh(n){const e=n.auth,t=await n.getIdToken(),s=await nu(n,Fh(e,{idToken:t}));we(s?.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const c=o.providerUserInfo?.length?xx(o.providerUserInfo):[],d=qj(n.providerData,c),p=n.isAnonymous,v=!(n.email&&o.passwordHash)&&!d?.length,g=p?v:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Tg(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,_)}async function Fj(n){const e=ct(n);await qh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qj(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function xx(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Hj(n,e){const t=await bx(n,{},async()=>{const s=iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=n.config,d=await Tx(n,o,"/v1/token",`key=${c}`),p=await n._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:p,body:s};return n.emulatorConfig&&Ks(n.emulatorConfig.host)&&(v.credentials="include"),Ex.fetch()(d,v)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Gj(n,e){return Hr(n,"POST","/v2/accounts:revokeToken",qr(n,e))}class Jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):z1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=z1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:c}=await Hj(e,t);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:c}=t,d=new Jo;return s&&(we(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(we(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(we(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jo,this.toJSON())}_performRefresh(){return jr("not implemented")}}function Ns(n,e){we(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ta{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new Bj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Tg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await nu(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Uj(this,e)}reload(){return Fj(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ta({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await qh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fn(this.auth.app))return Promise.reject(Or(this.auth));const e=await this.getIdToken();return await nu(this,kj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,d=t.photoURL??void 0,p=t.tenantId??void 0,v=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:x,isAnonymous:w,providerData:I,stsTokenManager:U}=t;we(T&&U,e,"internal-error");const L=Jo.fromJSON(this.name,U);we(typeof T=="string",e,"internal-error"),Ns(s,e.name),Ns(o,e.name),we(typeof x=="boolean",e,"internal-error"),we(typeof w=="boolean",e,"internal-error"),Ns(c,e.name),Ns(d,e.name),Ns(p,e.name),Ns(v,e.name),Ns(g,e.name),Ns(_,e.name);const q=new Ta({uid:T,auth:e,email:o,emailVerified:x,displayName:s,isAnonymous:w,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:L,createdAt:g,lastLoginAt:_});return I&&Array.isArray(I)&&(q.providerData=I.map(X=>({...X}))),v&&(q._redirectEventId=v),q}static async _fromIdTokenResponse(e,t,s=!1){const o=new Jo;o.updateFromServerResponse(t);const c=new Ta({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await qh(c),c}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];we(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?xx(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!c?.length,p=new Jo;p.updateFromIdToken(s);const v=new Ta({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Tg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(v,g),v}}const B1=new Map;function Dr(n){zr(n instanceof Function,"Expected a class definition");let e=B1.get(n);return e?(zr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,B1.set(n,e),e)}class wx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}wx.type="NONE";const F1=wx;function Eh(n,e,t){return`firebase:${n}:${e}:${t}`}class Wo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=Eh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Eh("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Fh(this.auth,{idToken:e}).catch(()=>{});return t?Ta._fromGetAccountInfoResponse(this.auth,t,e):null}return Ta._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Wo(Dr(F1),e,s);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=o[0]||Dr(F1);const d=Eh(s,e.config.apiKey,e.name);let p=null;for(const g of t)try{const _=await g._get(d);if(_){let T;if(typeof _=="string"){const x=await Fh(e,{idToken:_}).catch(()=>{});if(!x)break;T=await Ta._fromGetAccountInfoResponse(e,x,_)}else T=Ta._fromJSON(e,_);g!==c&&(p=T),c=g;break}}catch{}const v=o.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!v.length?new Wo(c,e,s):(c=v[0],p&&await c._set(d,p.toJSON()),await Promise.all(t.map(async g=>{if(g!==c)try{await g._remove(d)}catch{}})),new Wo(c,e,s))}}function q1(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jx(e))return"Blackberry";if(Dx(e))return"Webos";if(Nx(e))return"Safari";if((e.includes("chrome/")||Ax(e))&&!e.includes("edge/"))return"Chrome";if(Cx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function Sx(n=hn()){return/firefox\//i.test(n)}function Nx(n=hn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ax(n=hn()){return/crios\//i.test(n)}function Rx(n=hn()){return/iemobile/i.test(n)}function Cx(n=hn()){return/android/i.test(n)}function jx(n=hn()){return/blackberry/i.test(n)}function Dx(n=hn()){return/webos/i.test(n)}function Cv(n=hn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $j(n=hn()){return Cv(n)&&!!window.navigator?.standalone}function Qj(){return JN()&&document.documentMode===10}function Ix(n=hn()){return Cv(n)||Cx(n)||Dx(n)||jx(n)||/windows phone/i.test(n)||Rx(n)}function Ox(n,e=[]){let t;switch(n){case"Browser":t=q1(hn());break;case"Worker":t=`${q1(hn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qi}/${s}`}class Yj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((d,p)=>{try{const v=e(c);d(v)}catch(v){p(v)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function Kj(n,e={}){return Hr(n,"GET","/v2/passwordPolicy",qr(n,e))}const Xj=6;class Jj{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Xj,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class Wj{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H1(this),this.idTokenSubscription=new H1(this),this.beforeStateQueue=new Yj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Dr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Wo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Fh(this,{idToken:e}),s=await Ta._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Fn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&p?.user&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await qh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fn(this.app))return Promise.reject(Or(this));const t=e?ct(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fn(this.app)?Promise.reject(Or(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fn(this.app)?Promise.reject(Or(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Kj(this),t=new Jj(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new su("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Gj(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Dr(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await Wo.create(this,[Dr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const v=e.addObserver(t,s,o);return()=>{d=!0,v()}}else{const v=e.addObserver(t);return()=>{d=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ox(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Aj(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ws(n){return ct(n)}class H1{constructor(e){this.auth=e,this.observer=null,this.addObserver=sA(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ef={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Zj(n){Ef=n}function Px(n){return Ef.loadJS(n)}function eD(){return Ef.recaptchaEnterpriseScript}function tD(){return Ef.gapiScript}function nD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class aD{constructor(){this.enterprise=new rD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class rD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const sD="recaptcha-enterprise",Vx="NO_RECAPTCHA";class iD{constructor(e){this.type=sD,this.auth=Ws(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,p)=>{Lj(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const g=new Mj(v);return c.tenantId==null?c._agentRecaptchaConfig=g:c._tenantRecaptchaConfigs[c.tenantId]=g,d(g.siteKey)}}).catch(v=>{p(v)})})}function o(c,d,p){const v=window.grecaptcha;U1(v)?v.enterprise.ready(()=>{v.enterprise.execute(c,{action:e}).then(g=>{d(g)}).catch(()=>{d(Vx)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new aD().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(p=>{if(!t&&U1(window.grecaptcha))o(p,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let v=eD();v.length!==0&&(v+=p),Px(v).then(()=>{o(p,c,d)}).catch(g=>{d(g)})}}).catch(p=>{d(p)})})}}async function G1(n,e,t,s=!1,o=!1){const c=new iD(n);let d;if(o)d=Vx;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const v=p.phoneEnrollmentInfo.phoneNumber,g=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:v,recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const v=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Hh(n,e,t,s,o){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await G1(n,e,t,t==="getOobCode");return s(n,c)}else return s(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await G1(n,e,t,t==="getOobCode");return s(n,d)}else return Promise.reject(c)})}function oD(n,e){const t=ef(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(ki(c,e??{}))return o;wa(o,"already-initialized")}return t.initialize({options:e})}function lD(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Dr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function cD(n,e,t){const s=Ws(n);we(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=Mx(e),{host:d,port:p}=uD(e),v=p===null?"":`:${p}`,g={url:`${c}//${d}${v}/`},_=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){we(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),we(ki(g,s.config.emulator)&&ki(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,Ks(d)?(Vg(`${c}//${d}${v}`),Mg("Auth",!0)):dD()}function Mx(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function uD(n){const e=Mx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:$1(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:$1(d)}}}function $1(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function dD(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class jv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return jr("not implemented")}_getIdTokenResponse(e){return jr("not implemented")}_linkToIdToken(e,t){return jr("not implemented")}_getReauthenticationResolver(e){return jr("not implemented")}}async function hD(n,e){return Hr(n,"POST","/v1/accounts:signUp",e)}async function fD(n,e){return yu(n,"POST","/v1/accounts:signInWithPassword",qr(n,e))}async function mD(n,e){return Hr(n,"POST","/v1/accounts:sendOobCode",qr(n,e))}async function pD(n,e){return mD(n,e)}async function gD(n,e){return yu(n,"POST","/v1/accounts:signInWithEmailLink",qr(n,e))}async function vD(n,e){return yu(n,"POST","/v1/accounts:signInWithEmailLink",qr(n,e))}class au extends jv{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new au(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new au(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hh(e,t,"signInWithPassword",fD);case"emailLink":return gD(e,{email:this._email,oobCode:this._password});default:wa(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hh(e,s,"signUpPassword",hD);case"emailLink":return vD(e,{idToken:t,email:this._email,oobCode:this._password});default:wa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Zo(n,e){return yu(n,"POST","/v1/accounts:signInWithIdp",qr(n,e))}const yD="http://localhost";class qi extends jv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wa("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=t;if(!s||!o)return null;const d=new qi(s,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Zo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Zo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zo(e,t)}buildRequest(){const e={requestUri:yD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=iu(t)}return e}}function _D(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ED(n){const e=Ic(Oc(n)).link,t=e?Ic(Oc(e)).deep_link_id:null,s=Ic(Oc(n)).deep_link_id;return(s?Ic(Oc(s)).link:null)||s||t||e||n}class Dv{constructor(e){const t=Ic(Oc(e)),s=t.apiKey??null,o=t.oobCode??null,c=_D(t.mode??null);we(s&&o&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=ED(e);try{return new Dv(t)}catch{return null}}}class gl{constructor(){this.providerId=gl.PROVIDER_ID}static credential(e,t){return au._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Dv.parseLink(t);return we(s,"argument-error"),au._fromEmailAndCode(e,s.code,s.tenantId)}}gl.PROVIDER_ID="password";gl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";gl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Lx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _u extends Lx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Cs extends _u{constructor(){super("facebook.com")}static credential(e){return qi._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cs.credential(e.oauthAccessToken)}catch{return null}}}Cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cs.PROVIDER_ID="facebook.com";class js extends _u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qi._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return js.credential(t,s)}catch{return null}}}js.GOOGLE_SIGN_IN_METHOD="google.com";js.PROVIDER_ID="google.com";class Ds extends _u{constructor(){super("github.com")}static credential(e){return qi._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ds.credential(e.oauthAccessToken)}catch{return null}}}Ds.GITHUB_SIGN_IN_METHOD="github.com";Ds.PROVIDER_ID="github.com";class Is extends _u{constructor(){super("twitter.com")}static credential(e,t){return qi._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Is.credential(t,s)}catch{return null}}}Is.TWITTER_SIGN_IN_METHOD="twitter.com";Is.PROVIDER_ID="twitter.com";async function bD(n,e){return yu(n,"POST","/v1/accounts:signUp",qr(n,e))}class Hi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const c=await Ta._fromIdTokenResponse(e,s,o),d=Q1(s);return new Hi({user:c,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Q1(s);return new Hi({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Q1(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Gh extends lr{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Gh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Gh(e,t,s,o)}}function kx(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Gh._fromErrorAndOperation(n,c,e,s):c})}async function TD(n,e,t=!1){const s=await nu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Hi._forOperation(n,"link",s)}async function xD(n,e,t=!1){const{auth:s}=n;if(Fn(s.app))return Promise.reject(Or(s));const o="reauthenticate";try{const c=await nu(n,kx(s,o,e,n),t);we(c.idToken,s,"internal-error");const d=Rv(c.idToken);we(d,s,"internal-error");const{sub:p}=d;return we(n.uid===p,s,"user-mismatch"),Hi._forOperation(n,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&wa(s,"user-mismatch"),c}}async function Ux(n,e,t=!1){if(Fn(n.app))return Promise.reject(Or(n));const s="signIn",o=await kx(n,s,e),c=await Hi._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(c.user),c}async function wD(n,e){return Ux(Ws(n),e)}async function zx(n){const e=Ws(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function SD(n,e,t){const s=Ws(n);await Hh(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",pD)}async function ND(n,e,t){if(Fn(n.app))return Promise.reject(Or(n));const s=Ws(n),d=await Hh(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bD).catch(v=>{throw v.code==="auth/password-does-not-meet-requirements"&&zx(n),v}),p=await Hi._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(p.user),p}function AD(n,e,t){return Fn(n.app)?Promise.reject(Or(n)):wD(ct(n),gl.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&zx(n),s})}function RD(n,e,t,s){return ct(n).onIdTokenChanged(e,t,s)}function CD(n,e,t){return ct(n).beforeAuthStateChanged(e,t)}function jD(n,e,t,s){return ct(n).onAuthStateChanged(e,t,s)}function DD(n){return ct(n).signOut()}const $h="__sak";class Bx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem($h,"1"),this.storage.removeItem($h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const ID=1e3,OD=10;class Fx extends Bx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ix(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,p,v)=>{this.notifyListeners(d,v)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);Qj()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,OD):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},ID)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fx.type="LOCAL";const PD=Fx;class qx extends Bx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qx.type="SESSION";const Hx=qx;function VD(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class bf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new bf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:c}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const p=Array.from(d).map(async g=>g(t.origin,c)),v=await VD(p);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:v})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bf.receivers=[];function Iv(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}class MD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((p,v)=>{const g=Iv("",20);o.port1.start();const _=setTimeout(()=>{v(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(T){const x=T;if(x.data.eventId===g)switch(x.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(x.data.response);break;default:clearTimeout(_),clearTimeout(c),v(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function sr(){return window}function LD(n){sr().location.href=n}function Gx(){return typeof sr().WorkerGlobalScope<"u"&&typeof sr().importScripts=="function"}async function kD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UD(){return navigator?.serviceWorker?.controller||null}function zD(){return Gx()?self:null}const $x="firebaseLocalStorageDb",BD=1,Qh="firebaseLocalStorage",Qx="fbase_key";class Eu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Tf(n,e){return n.transaction([Qh],e?"readwrite":"readonly").objectStore(Qh)}function FD(){const n=indexedDB.deleteDatabase($x);return new Eu(n).toPromise()}function xg(){const n=indexedDB.open($x,BD);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Qh,{keyPath:Qx})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Qh)?e(s):(s.close(),await FD(),e(await xg()))})})}async function Y1(n,e,t){const s=Tf(n,!0).put({[Qx]:e,value:t});return new Eu(s).toPromise()}async function qD(n,e){const t=Tf(n,!1).get(e),s=await new Eu(t).toPromise();return s===void 0?null:s.value}function K1(n,e){const t=Tf(n,!0).delete(e);return new Eu(t).toPromise()}const HD=800,GD=3;class Yx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>GD)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bf._getInstance(zD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await kD(),!this.activeServiceWorker)return;this.sender=new MD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||UD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xg();return await Y1(e,$h,"1"),await K1(e,$h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Y1(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>qD(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>K1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Tf(o,!1).getAll();return new Eu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Yx.type="LOCAL";const $D=Yx;new vu(3e4,6e4);function QD(n,e){return e?Dr(e):(we(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Ov extends jv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function YD(n){return Ux(n.auth,new Ov(n),n.bypassAuthState)}function KD(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),xD(t,new Ov(n),n.bypassAuthState)}async function XD(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),TD(t,new Ov(n),n.bypassAuthState)}class Kx{constructor(e,t,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:c,error:d,type:p}=e;if(d){this.reject(d);return}const v={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(v))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YD;case"linkViaPopup":case"linkViaRedirect":return XD;case"reauthViaPopup":case"reauthViaRedirect":return KD;default:wa(this.auth,"internal-error")}}resolve(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const JD=new vu(2e3,1e4);class Ko extends Kx{constructor(e,t,s,o,c){super(e,t,o,c),this.provider=s,this.authWindow=null,this.pollId=null,Ko.currentPopupAction&&Ko.currentPopupAction.cancel(),Ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){zr(this.filter.length===1,"Popup operations only handle one event");const e=Iv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JD.get())};e()}}Ko.currentPopupAction=null;const WD="pendingRedirect",bh=new Map;class ZD extends Kx{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=bh.get(this.auth._key());if(!e){try{const s=await eI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}bh.set(this.auth._key(),e)}return this.bypassAuthState||bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eI(n,e){const t=aI(e),s=nI(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function tI(n,e){bh.set(n._key(),e)}function nI(n){return Dr(n._redirectPersistence)}function aI(n){return Eh(WD,n.config.apiKey,n.name)}async function rI(n,e,t=!1){if(Fn(n.app))return Promise.reject(Or(n));const s=Ws(n),o=QD(s,e),d=await new ZD(s,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const sI=600*1e3;class iI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Xx(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(rr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sI&&this.cachedEventUids.clear(),this.cachedEventUids.has(X1(e))}saveEventToCache(e){this.cachedEventUids.add(X1(e)),this.lastProcessedEventTime=Date.now()}}function X1(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Xx({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function oI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xx(n);default:return!1}}async function lI(n,e={}){return Hr(n,"GET","/v1/projects",e)}const cI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uI=/^https?/;async function dI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await lI(n);for(const t of e)try{if(hI(t))return}catch{}wa(n,"unauthorized-domain")}function hI(n){const e=bg(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return d.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!uI.test(t))return!1;if(cI.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const fI=new vu(3e4,6e4);function J1(){const n=sr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function mI(n){return new Promise((e,t)=>{function s(){J1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{J1(),t(rr(n,"network-request-failed"))},timeout:fI.get()})}if(sr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(sr().gapi?.load)s();else{const o=nD("iframefcb");return sr()[o]=()=>{gapi.load?s():t(rr(n,"network-request-failed"))},Px(`${tD()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw Th=null,e})}let Th=null;function pI(n){return Th=Th||mI(n),Th}const gI=new vu(5e3,15e3),vI="__/auth/iframe",yI="emulator/auth/iframe",_I={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bI(n){const e=n.config;we(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Av(e,yI):`https://${n.config.authDomain}/${vI}`,s={apiKey:e.apiKey,appName:n.name,v:Qi},o=EI.get(n.config.apiHost);o&&(s.eid=o);const c=n._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${iu(s).slice(1)}`}async function TI(n){const e=await pI(n),t=sr().gapi;return we(t,n,"internal-error"),e.open({where:document.body,url:bI(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_I,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const d=rr(n,"network-request-failed"),p=sr().setTimeout(()=>{c(d)},gI.get());function v(){sr().clearTimeout(p),o(s)}s.ping(v).then(v,()=>{c(d)})}))}const xI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wI=500,SI=600,NI="_blank",AI="http://localhost";class W1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RI(n,e,t,s=wI,o=SI){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const v={...xI,width:s.toString(),height:o.toString(),top:c,left:d},g=hn().toLowerCase();t&&(p=Ax(g)?NI:t),Sx(g)&&(e=e||AI,v.scrollbars="yes");const _=Object.entries(v).reduce((x,[w,I])=>`${x}${w}=${I},`,"");if($j(g)&&p!=="_self")return CI(e||"",p),new W1(null);const T=window.open(e||"",p,_);we(T,n,"popup-blocked");try{T.focus()}catch{}return new W1(T)}function CI(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const jI="__/auth/handler",DI="emulator/auth/handler",II=encodeURIComponent("fac");async function Z1(n,e,t,s,o,c){we(n.config.authDomain,n,"auth-domain-config-required"),we(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Qi,eventId:o};if(e instanceof Lx){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",rA(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))d[_]=T}if(e instanceof _u){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(d.scopes=_.join(","))}n.tenantId&&(d.tid=n.tenantId);const p=d;for(const _ of Object.keys(p))p[_]===void 0&&delete p[_];const v=await n._getAppCheckToken(),g=v?`#${II}=${encodeURIComponent(v)}`:"";return`${OI(n)}?${iu(p).slice(1)}${g}`}function OI({config:n}){return n.emulator?Av(n,DI):`https://${n.authDomain}/${jI}`}const Hp="webStorageSupport";class PI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hx,this._completeRedirectFn=rI,this._overrideRedirectResult=tI}async _openPopup(e,t,s,o){zr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Z1(e,t,s,bg(),o);return RI(e,c,Iv())}async _openRedirect(e,t,s,o){await this._originValidation(e);const c=await Z1(e,t,s,bg(),o);return LD(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(zr(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await TI(e),s=new iI(e);return t.register("authEvent",o=>(we(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Hp,{type:Hp},o=>{const c=o?.[0]?.[Hp];c!==void 0&&t(!!c),wa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ix()||Nx()||Cv()}}const VI=PI;var eb="@firebase/auth",tb="1.11.1";class MI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function LI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kI(n){Ui(new Bs("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=s.options;we(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const v={apiKey:d,authDomain:p,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ox(n)},g=new Wj(s,o,c,v);return lD(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Ui(new Bs("auth-internal",e=>{const t=Ws(e.getProvider("auth").getImmediate());return(s=>new MI(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Za(eb,tb,LI(n)),Za(eb,tb,"esm2020")}const UI=300,zI=Vb("authIdTokenMaxAge")||UI;let nb=null;const BI=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>zI)return;const o=t?.token;nb!==o&&(nb=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function FI(n=Ug()){const e=ef(n,"auth");if(e.isInitialized())return e.getImmediate();const t=oD(n,{popupRedirectResolver:VI,persistence:[$D,PD,Hx]}),s=Vb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=BI(c.toString());CD(t,d,()=>d(t.currentUser)),RD(t,p=>d(p))}}const o=Ib("auth");return o&&cD(t,`http://${o}`),t}function qI(){return document.getElementsByTagName("head")?.[0]??document}Zj({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const c=rr("internal-error");c.customData=o,t(c)},s.type="text/javascript",s.charset="UTF-8",qI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kI("Browser");const HI={apiKey:"AIzaSyMockKey123456789012345678901234567890",authDomain:"mock-project-id.firebaseapp.com",projectId:"mock-project-idr",storageBucket:"mock-project-id.appspot.com",messagingSenderId:"123456789012",appId:"1:123456789012:web:abcdef1234567890abcdef"},Jx=Ub(HI),Pe=pj(Jx),Nc=FI(Jx);function Oi(n){if(typeof n=="string")return n;switch(n?.code||""){case"auth/user-not-found":return"Usurio no encontrado. Verifique seu email.";case"auth/wrong-password":return"Senha incorreta. Tente novamente.";case"auth/invalid-email":return"Email invlido. Verifique o formato.";case"auth/too-many-requests":return"Muitas tentativas. Tente novamente em alguns minutos.";case"auth/user-disabled":return"Conta desabilitada. Entre em contato com o suporte.";case"auth/network-request-failed":return"Erro de conexo. Verifique sua internet.";case"auth/invalid-api-key":return"Erro de configurao. Entre em contato com o suporte.";default:return"Erro inesperado. Tente novamente."}}const kc={async logOut(){try{await DD(Nc)}catch(n){const e=Oi(n);throw new Error(e)}},async login(n){try{const t=(await AD(Nc,n.email,n.password)).user,s=await Fi(Xe(Pe,"users",t.uid));if(!s.exists())throw new Error("Usurio no encontrado");const c={...s.data(),lastLogin:new Date};return await M1(Xe(Pe,"users",t.uid),c),c}catch(e){const t=Oi(e);throw new Error(t)}},async register(n){try{if(!n.email||!n.password||!n.name)throw new Error("Todos os campos so obrigatrios");if(n.password.length<6)throw new Error("A senha deve ter pelo menos 6 caracteres");const t=(await ND(Nc,n.email,n.password)).user,s={uid:t.uid,name:n.name,email:n.email,createdAt:new Date,updatedAt:new Date,role:n.role||"user"};return await M1(Xe(Pe,"users",t.uid),s),s}catch(e){const t=Oi(e);throw new Error(t)}},observeAuthState(n){try{return jD(Nc,async e=>{if(console.log(" Auth state changed:",e?e.uid:"null"),e)try{const t=await Fi(Xe(Pe,"users",e.uid));if(t.exists()){const s=t.data();console.log(" Usurio autenticado:",s),n(s)}else console.log(" Usurio no encontrado no Firestore"),n(null)}catch(t){console.error(" Erro ao buscar dados do usurio:",t),n(null)}else console.log(" Usurio deslogado"),n(null)})}catch(e){throw new Error("Erro ao observar estado de autenticao: "+e)}},async resetPassword(n){try{if(!n)throw new Error("Email  obrigatrio");if(!/\S+@\S+\.\S+/.test(n))throw new Error("E-mail invlido");await SD(Nc,n)}catch(e){const t=Oi(e);throw new Error(t)}}},Wx=O.createContext(void 0);function GI({children:n}){const[e,t]=O.useState(null),[s,o]=O.useState(!0),[c,d]=O.useState(null);O.useEffect(()=>{const x=kc.observeAuthState(w=>{t(w),o(!1)});return()=>x()},[]);const T={user:e,loading:s,error:c,login:async x=>{try{o(!0),d(null);const w=await kc.login(x);t(w),o(!1)}catch(w){const I=Oi(w);throw d(I),o(!1),t(null),new Error(I)}},register:async x=>{try{o(!0),d(null),await kc.register(x),t(null),o(!1)}catch(w){const I=Oi(w);d(I),o(!1),t(null)}},logOut:async()=>{try{o(!0),d(null),await kc.logOut(),t(null),o(!1)}catch(x){const w=Oi(x);throw d(w),o(!1),new Error(w)}},clearError:()=>{d(null)}};return l.jsx(Wx.Provider,{value:T,children:n})}const Sa=()=>{const n=O.useContext(Wx);if(!n)throw new Error("useAuth deve ser usado dentro de um AuthProvider");return n},Ea="notificacoes",Gp="configuracoes_notificacoes";function sh(n){if(!n)return n;const e={...n};return Object.keys(e).forEach(t=>{e[t]instanceof me?e[t]=e[t].toDate():e[t]?.metadata&&Object.keys(e[t].metadata).forEach(s=>{e[t].metadata[s]instanceof me&&(e[t].metadata[s]=e[t].metadata[s].toDate())})}),e}const ht={async criar(n){try{const e={...n,lida:!1,emailEnviado:!1,criadoEm:new Date};return{id:(await Ur(Rt(Pe,Ea),e)).id,...e}}catch(e){throw console.error("Erro ao criar notificao:",e),new Error("Erro ao criar notificao")}},async criarEmLote(n){try{const e=Fp(Pe);n.forEach(t=>{const s=Xe(Rt(Pe,Ea));e.set(s,{...t,lida:!1,emailEnviado:!1,criadoEm:new Date})}),await e.commit()}catch(e){throw console.error("Erro ao criar notificaes em lote:",e),new Error("Erro ao criar notificaes em lote")}},async buscarPorId(n){try{const e=Xe(Pe,Ea,n),t=await Fi(e);if(!t.exists())return null;const s=sh(t.data());return{id:t.id,...s}}catch(e){throw console.error("Erro ao buscar notificao:",e),new Error("Erro ao buscar notificao")}},async listarPorUsuario(n,e,t){try{let s=tt(Rt(Pe,Ea),Te("userId","==",n),jn("criadoEm","desc"));e?.tipo&&(s=tt(s,Te("tipo","==",e.tipo))),e?.prioridade&&(s=tt(s,Te("prioridade","==",e.prioridade))),e?.lida!==void 0&&(s=tt(s,Te("lida","==",e.lida))),t&&(s=tt(s,O1(t)));let d=(await Ct(s)).docs.map(p=>{const v=sh(p.data());return{id:p.id,...v}});return e?.dataInicio&&(d=d.filter(p=>p.criadoEm>=e.dataInicio)),e?.dataFim&&(d=d.filter(p=>p.criadoEm<=e.dataFim)),d}catch(s){throw console.error("Erro ao listar notificaes:",s),new Error("Erro ao listar notificaes")}},async marcarComoLida(n){try{const e=Xe(Pe,Ea,n);await Dn(e,{lida:!0,lidoEm:new Date})}catch(e){throw console.error("Erro ao marcar notificao como lida:",e),new Error("Erro ao marcar notificao como lida")}},async marcarTodasComoLidas(n){try{const e=tt(Rt(Pe,Ea),Te("userId","==",n),Te("lida","==",!1)),t=await Ct(e),s=Fp(Pe);t.docs.forEach(o=>{s.update(o.ref,{lida:!0,lidoEm:new Date})}),await s.commit()}catch(e){throw console.error("Erro ao marcar todas notificaes como lidas:",e),new Error("Erro ao marcar todas notificaes como lidas")}},async marcarEmailEnviado(n){try{const e=Xe(Pe,Ea,n);await Dn(e,{emailEnviado:!0,dataEmailEnviado:new Date})}catch(e){throw console.error("Erro ao marcar email como enviado:",e),new Error("Erro ao marcar email como enviado")}},async deletar(n){try{const e=Xe(Pe,Ea,n);await Ys(e)}catch(e){throw console.error("Erro ao deletar notificao:",e),new Error("Erro ao deletar notificao")}},async deletarTodasLidas(n){try{const e=tt(Rt(Pe,Ea),Te("userId","==",n),Te("lida","==",!0)),t=await Ct(e),s=Fp(Pe);t.docs.forEach(o=>{s.delete(o.ref)}),await s.commit()}catch(e){throw console.error("Erro ao deletar notificaes lidas:",e),new Error("Erro ao deletar notificaes lidas")}},async obterEstatisticas(n){try{const e=await this.listarPorUsuario(n),t={total:e.length,naoLidas:e.filter(s=>!s.lida).length,porTipo:{documento_vencendo:0,documento_vencido:0,premio_lancado:0,boletim_pendente:0,boletim_vencendo:0,sistema:0,outro:0},porPrioridade:{baixa:0,media:0,alta:0,urgente:0}};return e.forEach(s=>{t.porTipo[s.tipo]++,t.porPrioridade[s.prioridade]++}),t}catch(e){throw console.error("Erro ao obter estatsticas:",e),new Error("Erro ao obter estatsticas")}},observarNotificacoes(n,e){const t=tt(Rt(Pe,Ea),Te("userId","==",n),jn("criadoEm","desc"),O1(50));return L1(t,s=>{const o=s.docs.map(c=>{const d=sh(c.data());return{id:c.id,...d}});e(o)})},observarNotificacoesNaoLidas(n,e){const t=tt(Rt(Pe,Ea),Te("userId","==",n),Te("lida","==",!1));return L1(t,s=>{e(s.size)})},async obterConfiguracoes(n){try{const e=Xe(Pe,Gp,n),t=await Fi(e);if(!t.exists()){const o={id:n,userId:n,emailNotificacoes:!0,emailDocumentoVencendo:!0,emailDocumentoVencido:!0,emailPremioLancado:!0,emailBoletimPendente:!0,diasAntesVencimento:7,horaVerificacao:"09:00",atualizadoEm:new Date};return await this.atualizarConfiguracoes(n,{emailNotificacoes:o.emailNotificacoes,emailDocumentoVencendo:o.emailDocumentoVencendo,emailDocumentoVencido:o.emailDocumentoVencido,emailPremioLancado:o.emailPremioLancado,emailBoletimPendente:o.emailBoletimPendente,diasAntesVencimento:o.diasAntesVencimento,horaVerificacao:o.horaVerificacao}),o}const s=sh(t.data());return{id:t.id,...s}}catch(e){throw console.error("Erro ao obter configuraes:",e),new Error("Erro ao obter configuraes")}},async atualizarConfiguracoes(n,e){try{const t=Xe(Pe,Gp,n);await Dn(t,{...e,atualizadoEm:new Date}).catch(async()=>{await Ur(Rt(Pe,Gp),{userId:n,...e,atualizadoEm:new Date})})}catch(t){throw console.error("Erro ao atualizar configuraes:",t),new Error("Erro ao atualizar configuraes")}},async notificarDocumentoVencendo(n,e,t,s,o){const c=Math.ceil((o.getTime()-new Date().getTime())/864e5);await this.criar({userId:n,tipo:"documento_vencendo",prioridade:c<=3?"urgente":c<=7?"alta":"media",titulo:"Documento prestes a vencer",mensagem:`O documento ${s} de ${t} vence em ${c} dia(s).`,link:"/documentacoes",metadata:{documentoId:e,colaboradorNome:t,tipoDocumento:s,dataVencimento:o,diasRestantes:c}})},async notificarDocumentoVencido(n,e,t,s,o){await this.criar({userId:n,tipo:"documento_vencido",prioridade:"urgente",titulo:"Documento vencido!",mensagem:`O documento ${s} de ${t} est vencido desde ${o.toLocaleDateString()}.`,link:"/documentacoes",metadata:{documentoId:e,colaboradorNome:t,tipoDocumento:s,dataVencimento:o}})},async notificarPremioLancado(n,e,t,s,o){await this.criar({userId:n,tipo:"premio_lancado",prioridade:"media",titulo:"Novo prmio lanado",mensagem:`Prmio de R$ ${s.toFixed(2)} lanado para ${t}: ${o}`,link:"/premios-produtividade",metadata:{premioId:e,colaboradorNome:t,valor:s,motivo:o}})},async notificarBoletimPendente(n,e,t,s,o){await this.criar({userId:n,tipo:"boletim_pendente",prioridade:"alta",titulo:"Boletim pendente",mensagem:`Boletim ${s} do cliente ${t} est pendente (R$ ${o.toFixed(2)}).`,link:"/boletins-medicao",metadata:{boletimId:e,cliente:t,numero:s,valor:o}})},async notificarBoletimVencendo(n,e,t,s,o){const c=Math.ceil((o.getTime()-new Date().getTime())/864e5);await this.criar({userId:n,tipo:"boletim_vencendo",prioridade:c<=2?"urgente":"alta",titulo:"Boletim vencendo",mensagem:`Boletim ${s} do cliente ${t} vence em ${c} dia(s).`,link:"/boletins-medicao",metadata:{boletimId:e,cliente:t,numero:s,dataVencimento:o,diasRestantes:c}})}};function $I(n,e,t=!0){const[s,o]=O.useState([]),[c,d]=O.useState(0),[p,v]=O.useState(null),[g,_]=O.useState(!0),[T,x]=O.useState(null),w=async()=>{if(!n){_(!1);return}try{_(!0),x(null);const[F,oe]=await Promise.all([ht.listarPorUsuario(n,e),ht.obterEstatisticas(n)]);o(F),v(oe),d(oe.naoLidas)}catch(F){console.error("Erro ao carregar notificaes:",F),x("Erro ao carregar notificaes")}finally{_(!1)}};return O.useEffect(()=>{if(!n){_(!1);return}if(t){const F=ht.observarNotificacoes(n,ce=>{o(ce),ht.obterEstatisticas(n).then(v)}),oe=ht.observarNotificacoesNaoLidas(n,d);return _(!1),()=>{F(),oe()}}else w()},[n,t,JSON.stringify(e)]),{notificacoes:s,naoLidas:c,stats:p,loading:g,error:T,marcarComoLida:async F=>{try{x(null),await ht.marcarComoLida(F),o(oe=>oe.map(ce=>ce.id===F?{...ce,lida:!0,lidoEm:new Date}:ce)),d(oe=>Math.max(0,oe-1))}catch(oe){throw console.error("Erro ao marcar como lida:",oe),x("Erro ao marcar como lida"),oe}},marcarTodasComoLidas:async()=>{if(n)try{x(null),await ht.marcarTodasComoLidas(n),o(F=>F.map(oe=>({...oe,lida:!0,lidoEm:new Date}))),d(0)}catch(F){throw console.error("Erro ao marcar todas como lidas:",F),x("Erro ao marcar todas como lidas"),F}},deletar:async F=>{try{x(null),await ht.deletar(F);const oe=s.find(ce=>ce.id===F);o(ce=>ce.filter(ue=>ue.id!==F)),oe&&!oe.lida&&d(ce=>Math.max(0,ce-1))}catch(oe){throw console.error("Erro ao deletar notificao:",oe),x("Erro ao deletar notificao"),oe}},deletarTodasLidas:async()=>{if(n)try{x(null),await ht.deletarTodasLidas(n),o(F=>F.filter(oe=>!oe.lida))}catch(F){throw console.error("Erro ao deletar notificaes lidas:",F),x("Erro ao deletar notificaes lidas"),F}},recarregar:async()=>{await w()}}}const Zx=O.createContext(void 0);function QI({children:n}){const{user:e}=Sa(),{notificacoes:t,naoLidas:s,stats:o,loading:c,error:d,marcarComoLida:p,marcarTodasComoLidas:v,deletar:g,deletarTodasLidas:_,recarregar:T}=$I(e?.uid,void 0,!0),x={notificacoes:t,naoLidas:s,stats:o,loading:c,error:d,marcarComoLida:p,marcarTodasComoLidas:v,deletar:g,deletarTodasLidas:_,recarregar:T};return l.jsx(Zx.Provider,{value:x,children:n})}function ew(){const n=O.useContext(Zx);if(n===void 0)throw new Error("useNotificationContext deve ser usado dentro de um NotificationProvider");return n}var ab="popstate";function YI(n={}){function e(s,o){let{pathname:c,search:d,hash:p}=s.location;return wg("",{pathname:c,search:d,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:ru(o)}return XI(e,t,null,n)}function gt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function oa(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KI(){return Math.random().toString(36).substring(2,10)}function rb(n,e){return{usr:n.state,key:n.key,idx:e}}function wg(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?vl(e):e,state:t,key:e&&e.key||s||KI()}}function ru({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function vl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function XI(n,e,t,s={}){let{window:o=document.defaultView,v5Compat:c=!1}=s,d=o.history,p="POP",v=null,g=_();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function _(){return(d.state||{idx:null}).idx}function T(){p="POP";let L=_(),q=L==null?null:L-g;g=L,v&&v({action:p,location:U.location,delta:q})}function x(L,q){p="PUSH";let X=wg(U.location,L,q);g=_()+1;let F=rb(X,g),oe=U.createHref(X);try{d.pushState(F,"",oe)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;o.location.assign(oe)}c&&v&&v({action:p,location:U.location,delta:1})}function w(L,q){p="REPLACE";let X=wg(U.location,L,q);g=_();let F=rb(X,g),oe=U.createHref(X);d.replaceState(F,"",oe),c&&v&&v({action:p,location:U.location,delta:0})}function I(L){return JI(L)}let U={get action(){return p},get location(){return n(o,d)},listen(L){if(v)throw new Error("A history only accepts one active listener");return o.addEventListener(ab,T),v=L,()=>{o.removeEventListener(ab,T),v=null}},createHref(L){return e(o,L)},createURL:I,encodeLocation(L){let q=I(L);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:x,replace:w,go(L){return d.go(L)}};return U}function JI(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),gt(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:ru(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function tw(n,e,t="/"){return WI(n,e,t,!1)}function WI(n,e,t,s){let o=typeof e=="string"?vl(e):e,c=Br(o.pathname||"/",t);if(c==null)return null;let d=nw(n);ZI(d);let p=null;for(let v=0;p==null&&v<d.length;++v){let g=u4(c);p=l4(d[v],g,s)}return p}function nw(n,e=[],t=[],s="",o=!1){let c=(d,p,v=o,g)=>{let _={relativePath:g===void 0?d.path||"":g,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(s)&&v)return;gt(_.relativePath.startsWith(s),`Absolute route path "${_.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(s.length)}let T=Pr([s,_.relativePath]),x=t.concat(_);d.children&&d.children.length>0&&(gt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),nw(d.children,e,x,T,v)),!(d.path==null&&!d.index)&&e.push({path:T,score:i4(T,d.index),routesMeta:x})};return n.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))c(d,p);else for(let v of aw(d.path))c(d,p,!0,v)}),e}function aw(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),c=t.replace(/\?$/,"");if(s.length===0)return o?[c,""]:[c];let d=aw(s.join("/")),p=[];return p.push(...d.map(v=>v===""?c:[c,v].join("/"))),o&&p.push(...d),p.map(v=>n.startsWith("/")&&v===""?"/":v)}function ZI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:o4(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var e4=/^:[\w-]+$/,t4=3,n4=2,a4=1,r4=10,s4=-2,sb=n=>n==="*";function i4(n,e){let t=n.split("/"),s=t.length;return t.some(sb)&&(s+=s4),e&&(s+=n4),t.filter(o=>!sb(o)).reduce((o,c)=>o+(e4.test(c)?t4:c===""?a4:r4),s)}function o4(n,e){return n.length===e.length&&n.slice(0,-1).every((s,o)=>s===e[o])?n[n.length-1]-e[e.length-1]:0}function l4(n,e,t=!1){let{routesMeta:s}=n,o={},c="/",d=[];for(let p=0;p<s.length;++p){let v=s[p],g=p===s.length-1,_=c==="/"?e:e.slice(c.length)||"/",T=Yh({path:v.relativePath,caseSensitive:v.caseSensitive,end:g},_),x=v.route;if(!T&&g&&t&&!s[s.length-1].route.index&&(T=Yh({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},_)),!T)return null;Object.assign(o,T.params),d.push({params:o,pathname:Pr([c,T.pathname]),pathnameBase:p4(Pr([c,T.pathnameBase])),route:x}),T.pathnameBase!=="/"&&(c=Pr([c,T.pathnameBase]))}return d}function Yh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=c4(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:s.reduce((g,{paramName:_,isOptional:T},x)=>{if(_==="*"){let I=p[x]||"";d=c.slice(0,c.length-I.length).replace(/(.)\/+$/,"$1")}const w=p[x];return T&&!w?g[_]=void 0:g[_]=(w||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:d,pattern:n}}function c4(n,e=!1,t=!0){oa(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,v)=>(s.push({paramName:p,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function u4(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return oa(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Br(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var d4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,h4=n=>d4.test(n);function f4(n,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof n=="string"?vl(n):n,c;if(t)if(h4(t))c=t;else{if(t.includes("//")){let d=t;t=t.replace(/\/\/+/g,"/"),oa(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${t}`)}t.startsWith("/")?c=ib(t.substring(1),"/"):c=ib(t,e)}else c=e;return{pathname:c,search:g4(s),hash:v4(o)}}function ib(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function $p(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function m4(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Pv(n){let e=m4(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Vv(n,e,t,s=!1){let o;typeof n=="string"?o=vl(n):(o={...n},gt(!o.pathname||!o.pathname.includes("?"),$p("?","pathname","search",o)),gt(!o.pathname||!o.pathname.includes("#"),$p("#","pathname","hash",o)),gt(!o.search||!o.search.includes("#"),$p("#","search","hash",o)));let c=n===""||o.pathname==="",d=c?"/":o.pathname,p;if(d==null)p=t;else{let T=e.length-1;if(!s&&d.startsWith("..")){let x=d.split("/");for(;x[0]==="..";)x.shift(),T-=1;o.pathname=x.join("/")}p=T>=0?e[T]:"/"}let v=f4(o,p),g=d&&d!=="/"&&d.endsWith("/"),_=(c||d===".")&&t.endsWith("/");return!v.pathname.endsWith("/")&&(g||_)&&(v.pathname+="/"),v}var Pr=n=>n.join("/").replace(/\/\/+/g,"/"),p4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),g4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,v4=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function y4(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rw=["POST","PUT","PATCH","DELETE"];new Set(rw);var _4=["GET",...rw];new Set(_4);var yl=O.createContext(null);yl.displayName="DataRouter";var xf=O.createContext(null);xf.displayName="DataRouterState";O.createContext(!1);var sw=O.createContext({isTransitioning:!1});sw.displayName="ViewTransition";var E4=O.createContext(new Map);E4.displayName="Fetchers";var b4=O.createContext(null);b4.displayName="Await";var Na=O.createContext(null);Na.displayName="Navigation";var bu=O.createContext(null);bu.displayName="Location";var cr=O.createContext({outlet:null,matches:[],isDataRoute:!1});cr.displayName="Route";var Mv=O.createContext(null);Mv.displayName="RouteError";function T4(n,{relative:e}={}){gt(_l(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=O.useContext(Na),{hash:o,pathname:c,search:d}=Tu(n,{relative:e}),p=c;return t!=="/"&&(p=c==="/"?t:Pr([t,c])),s.createHref({pathname:p,search:d,hash:o})}function _l(){return O.useContext(bu)!=null}function Gr(){return gt(_l(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(bu).location}var iw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ow(n){O.useContext(Na).static||O.useLayoutEffect(n)}function Xi(){let{isDataRoute:n}=O.useContext(cr);return n?V4():x4()}function x4(){gt(_l(),"useNavigate() may be used only in the context of a <Router> component.");let n=O.useContext(yl),{basename:e,navigator:t}=O.useContext(Na),{matches:s}=O.useContext(cr),{pathname:o}=Gr(),c=JSON.stringify(Pv(s)),d=O.useRef(!1);return ow(()=>{d.current=!0}),O.useCallback((v,g={})=>{if(oa(d.current,iw),!d.current)return;if(typeof v=="number"){t.go(v);return}let _=Vv(v,JSON.parse(c),o,g.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Pr([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,c,o,n])}O.createContext(null);function Tu(n,{relative:e}={}){let{matches:t}=O.useContext(cr),{pathname:s}=Gr(),o=JSON.stringify(Pv(t));return O.useMemo(()=>Vv(n,JSON.parse(o),s,e==="path"),[n,o,s,e])}function w4(n,e){return lw(n,e)}function lw(n,e,t,s,o){gt(_l(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=O.useContext(Na),{matches:d}=O.useContext(cr),p=d[d.length-1],v=p?p.params:{},g=p?p.pathname:"/",_=p?p.pathnameBase:"/",T=p&&p.route;{let X=T&&T.path||"";cw(g,!T||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let x=Gr(),w;if(e){let X=typeof e=="string"?vl(e):e;gt(_==="/"||X.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${X.pathname}" was given in the \`location\` prop.`),w=X}else w=x;let I=w.pathname||"/",U=I;if(_!=="/"){let X=_.replace(/^\//,"").split("/");U="/"+I.replace(/^\//,"").split("/").slice(X.length).join("/")}let L=tw(n,{pathname:U});oa(T||L!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),oa(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=C4(L&&L.map(X=>Object.assign({},X,{params:Object.assign({},v,X.params),pathname:Pr([_,c.encodeLocation?c.encodeLocation(X.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?_:Pr([_,c.encodeLocation?c.encodeLocation(X.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathnameBase])})),d,t,s,o);return e&&q?O.createElement(bu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},q):q}function S4(){let n=P4(),e=y4(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",n),d=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:c},"ErrorBoundary")," or"," ",O.createElement("code",{style:c},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),t?O.createElement("pre",{style:o},t):null,d)}var N4=O.createElement(S4,null),A4=class extends O.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?O.createElement(cr.Provider,{value:this.props.routeContext},O.createElement(Mv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function R4({routeContext:n,match:e,children:t}){let s=O.useContext(yl);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(cr.Provider,{value:n},t)}function C4(n,e=[],t=null,s=null,o=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,d=t?.errors;if(d!=null){let _=c.findIndex(T=>T.route.id&&d?.[T.route.id]!==void 0);gt(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,_+1))}let p=!1,v=-1;if(t)for(let _=0;_<c.length;_++){let T=c[_];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(v=_),T.route.id){let{loaderData:x,errors:w}=t,I=T.route.loader&&!x.hasOwnProperty(T.route.id)&&(!w||w[T.route.id]===void 0);if(T.route.lazy||I){p=!0,v>=0?c=c.slice(0,v+1):c=[c[0]];break}}}let g=t&&s?(_,T)=>{s(_,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:T})}:void 0;return c.reduceRight((_,T,x)=>{let w,I=!1,U=null,L=null;t&&(w=d&&T.route.id?d[T.route.id]:void 0,U=T.route.errorElement||N4,p&&(v<0&&x===0?(cw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,L=null):v===x&&(I=!0,L=T.route.hydrateFallbackElement||null)));let q=e.concat(c.slice(0,x+1)),X=()=>{let F;return w?F=U:I?F=L:T.route.Component?F=O.createElement(T.route.Component,null):T.route.element?F=T.route.element:F=_,O.createElement(R4,{match:T,routeContext:{outlet:_,matches:q,isDataRoute:t!=null},children:F})};return t&&(T.route.ErrorBoundary||T.route.errorElement||x===0)?O.createElement(A4,{location:t.location,revalidation:t.revalidation,component:U,error:w,children:X(),routeContext:{outlet:null,matches:q,isDataRoute:!0},onError:g}):X()},null)}function Lv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function j4(n){let e=O.useContext(yl);return gt(e,Lv(n)),e}function D4(n){let e=O.useContext(xf);return gt(e,Lv(n)),e}function I4(n){let e=O.useContext(cr);return gt(e,Lv(n)),e}function kv(n){let e=I4(n),t=e.matches[e.matches.length-1];return gt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function O4(){return kv("useRouteId")}function P4(){let n=O.useContext(Mv),e=D4("useRouteError"),t=kv("useRouteError");return n!==void 0?n:e.errors?.[t]}function V4(){let{router:n}=j4("useNavigate"),e=kv("useNavigate"),t=O.useRef(!1);return ow(()=>{t.current=!0}),O.useCallback(async(o,c={})=>{oa(t.current,iw),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...c}))},[n,e])}var ob={};function cw(n,e,t){!e&&!ob[n]&&(ob[n]=!0,oa(!1,t))}O.memo(M4);function M4({routes:n,future:e,state:t,unstable_onError:s}){return lw(n,void 0,t,s,e)}function L4({to:n,replace:e,state:t,relative:s}){gt(_l(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=O.useContext(Na);oa(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=O.useContext(cr),{pathname:d}=Gr(),p=Xi(),v=Vv(n,Pv(c),d,s==="path"),g=JSON.stringify(v);return O.useEffect(()=>{p(JSON.parse(g),{replace:e,state:t,relative:s})},[p,g,s,e,t]),null}function Nn(n){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function k4({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:c=!1}){gt(!_l(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),p=O.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof t=="string"&&(t=vl(t));let{pathname:v="/",search:g="",hash:_="",state:T=null,key:x="default"}=t,w=O.useMemo(()=>{let I=Br(v,d);return I==null?null:{location:{pathname:I,search:g,hash:_,state:T,key:x},navigationType:s}},[d,v,g,_,T,x,s]);return oa(w!=null,`<Router basename="${d}"> is not able to match the URL "${v}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:O.createElement(Na.Provider,{value:p},O.createElement(bu.Provider,{children:e,value:w}))}function U4({children:n,location:e}){return w4(Sg(n),e)}function Sg(n,e=[]){let t=[];return O.Children.forEach(n,(s,o)=>{if(!O.isValidElement(s))return;let c=[...e,o];if(s.type===O.Fragment){t.push.apply(t,Sg(s.props.children,c));return}gt(s.type===Nn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=Sg(s.props.children,c)),t.push(d)}),t}var xh="get",wh="application/x-www-form-urlencoded";function wf(n){return n!=null&&typeof n.tagName=="string"}function z4(n){return wf(n)&&n.tagName.toLowerCase()==="button"}function B4(n){return wf(n)&&n.tagName.toLowerCase()==="form"}function F4(n){return wf(n)&&n.tagName.toLowerCase()==="input"}function q4(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function H4(n,e){return n.button===0&&(!e||e==="_self")&&!q4(n)}var ih=null;function G4(){if(ih===null)try{new FormData(document.createElement("form"),0),ih=!1}catch{ih=!0}return ih}var $4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qp(n){return n!=null&&!$4.has(n)?(oa(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wh}"`),null):n}function Q4(n,e){let t,s,o,c,d;if(B4(n)){let p=n.getAttribute("action");s=p?Br(p,e):null,t=n.getAttribute("method")||xh,o=Qp(n.getAttribute("enctype"))||wh,c=new FormData(n)}else if(z4(n)||F4(n)&&(n.type==="submit"||n.type==="image")){let p=n.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=n.getAttribute("formaction")||p.getAttribute("action");if(s=v?Br(v,e):null,t=n.getAttribute("formmethod")||p.getAttribute("method")||xh,o=Qp(n.getAttribute("formenctype"))||Qp(p.getAttribute("enctype"))||wh,c=new FormData(p,n),!G4()){let{name:g,type:_,value:T}=n;if(_==="image"){let x=g?`${g}.`:"";c.append(`${x}x`,"0"),c.append(`${x}y`,"0")}else g&&c.append(g,T)}}else{if(wf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=xh,s=null,o=wh,d=n}return c&&o==="text/plain"&&(d=c,c=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Uv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Y4(n,e,t){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&Br(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function K4(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function X4(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function J4(n,e,t){let s=await Promise.all(n.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await K4(c,t);return d.links?d.links():[]}return[]}));return tO(s.flat(1).filter(X4).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function lb(n,e,t,s,o,c){let d=(v,g)=>t[g]?v.route.id!==t[g].route.id:!0,p=(v,g)=>t[g].pathname!==v.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==v.params["*"];return c==="assets"?e.filter((v,g)=>d(v,g)||p(v,g)):c==="data"?e.filter((v,g)=>{let _=s.routes[v.route.id];if(!_||!_.hasLoader)return!1;if(d(v,g)||p(v,g))return!0;if(v.route.shouldRevalidate){let T=v.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function W4(n,e,{includeHydrateFallback:t}={}){return Z4(n.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function Z4(n){return[...new Set(n)]}function eO(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function tO(n,e){let t=new Set;return new Set(e),n.reduce((s,o)=>{let c=JSON.stringify(eO(o));return t.has(c)||(t.add(c),s.push({key:c,link:o})),s},[])}function uw(){let n=O.useContext(yl);return Uv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function nO(){let n=O.useContext(xf);return Uv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var zv=O.createContext(void 0);zv.displayName="FrameworkContext";function dw(){let n=O.useContext(zv);return Uv(n,"You must render this element inside a <HydratedRouter> element"),n}function aO(n,e){let t=O.useContext(zv),[s,o]=O.useState(!1),[c,d]=O.useState(!1),{onFocus:p,onBlur:v,onMouseEnter:g,onMouseLeave:_,onTouchStart:T}=e,x=O.useRef(null);O.useEffect(()=>{if(n==="render"&&d(!0),n==="viewport"){let U=q=>{q.forEach(X=>{d(X.isIntersecting)})},L=new IntersectionObserver(U,{threshold:.5});return x.current&&L.observe(x.current),()=>{L.disconnect()}}},[n]),O.useEffect(()=>{if(s){let U=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(U)}}},[s]);let w=()=>{o(!0)},I=()=>{o(!1),d(!1)};return t?n!=="intent"?[c,x,{}]:[c,x,{onFocus:Ac(p,w),onBlur:Ac(v,I),onMouseEnter:Ac(g,w),onMouseLeave:Ac(_,I),onTouchStart:Ac(T,w)}]:[!1,x,{}]}function Ac(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function rO({page:n,...e}){let{router:t}=uw(),s=O.useMemo(()=>tw(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?O.createElement(iO,{page:n,matches:s,...e}):null}function sO(n){let{manifest:e,routeModules:t}=dw(),[s,o]=O.useState([]);return O.useEffect(()=>{let c=!1;return J4(n,e,t).then(d=>{c||o(d)}),()=>{c=!0}},[n,e,t]),s}function iO({page:n,matches:e,...t}){let s=Gr(),{manifest:o,routeModules:c}=dw(),{basename:d}=uw(),{loaderData:p,matches:v}=nO(),g=O.useMemo(()=>lb(n,e,v,o,s,"data"),[n,e,v,o,s]),_=O.useMemo(()=>lb(n,e,v,o,s,"assets"),[n,e,v,o,s]),T=O.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let I=new Set,U=!1;if(e.forEach(q=>{let X=o.routes[q.route.id];!X||!X.hasLoader||(!g.some(F=>F.route.id===q.route.id)&&q.route.id in p&&c[q.route.id]?.shouldRevalidate||X.hasClientLoader?U=!0:I.add(q.route.id))}),I.size===0)return[];let L=Y4(n,d,"data");return U&&I.size>0&&L.searchParams.set("_routes",e.filter(q=>I.has(q.route.id)).map(q=>q.route.id).join(",")),[L.pathname+L.search]},[d,p,s,o,g,e,n,c]),x=O.useMemo(()=>W4(_,o),[_,o]),w=sO(_);return O.createElement(O.Fragment,null,T.map(I=>O.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...t})),x.map(I=>O.createElement("link",{key:I,rel:"modulepreload",href:I,...t})),w.map(({key:I,link:U})=>O.createElement("link",{key:I,nonce:t.nonce,...U})))}function oO(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var hw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hw&&(window.__reactRouterVersion="7.9.6")}catch{}function lO({basename:n,children:e,window:t}){let s=O.useRef();s.current==null&&(s.current=YI({window:t,v5Compat:!0}));let o=s.current,[c,d]=O.useState({action:o.action,location:o.location}),p=O.useCallback(v=>{O.startTransition(()=>d(v))},[d]);return O.useLayoutEffect(()=>o.listen(p),[o,p]),O.createElement(k4,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:o})}var fw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mw=O.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:c,replace:d,state:p,target:v,to:g,preventScrollReset:_,viewTransition:T,...x},w){let{basename:I}=O.useContext(Na),U=typeof g=="string"&&fw.test(g),L,q=!1;if(typeof g=="string"&&U&&(L=g,hw))try{let S=new URL(window.location.href),j=g.startsWith("//")?new URL(S.protocol+g):new URL(g),M=Br(j.pathname,I);j.origin===S.origin&&M!=null?g=M+j.search+j.hash:q=!0}catch{oa(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let X=T4(g,{relative:o}),[F,oe,ce]=aO(s,x),ue=dO(g,{replace:d,state:p,target:v,preventScrollReset:_,relative:o,viewTransition:T});function A(S){e&&e(S),S.defaultPrevented||ue(S)}let D=O.createElement("a",{...x,...ce,href:L||X,onClick:q||c?e:A,ref:oO(w,oe),target:v,"data-discover":!U&&t==="render"?"true":void 0});return F&&!U?O.createElement(O.Fragment,null,D,O.createElement(rO,{page:X})):D});mw.displayName="Link";var pw=O.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:c,to:d,viewTransition:p,children:v,...g},_){let T=Tu(d,{relative:g.relative}),x=Gr(),w=O.useContext(xf),{navigator:I,basename:U}=O.useContext(Na),L=w!=null&&gO(T)&&p===!0,q=I.encodeLocation?I.encodeLocation(T).pathname:T.pathname,X=x.pathname,F=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(X=X.toLowerCase(),F=F?F.toLowerCase():null,q=q.toLowerCase()),F&&U&&(F=Br(F,U)||F);const oe=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let ce=X===q||!o&&X.startsWith(q)&&X.charAt(oe)==="/",ue=F!=null&&(F===q||!o&&F.startsWith(q)&&F.charAt(q.length)==="/"),A={isActive:ce,isPending:ue,isTransitioning:L},D=ce?e:void 0,S;typeof s=="function"?S=s(A):S=[s,ce?"active":null,ue?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let j=typeof c=="function"?c(A):c;return O.createElement(mw,{...g,"aria-current":D,className:S,ref:_,style:j,to:d,viewTransition:p},typeof v=="function"?v(A):v)});pw.displayName="NavLink";var cO=O.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:c,method:d=xh,action:p,onSubmit:v,relative:g,preventScrollReset:_,viewTransition:T,...x},w)=>{let I=mO(),U=pO(p,{relative:g}),L=d.toLowerCase()==="get"?"get":"post",q=typeof p=="string"&&fw.test(p),X=F=>{if(v&&v(F),F.defaultPrevented)return;F.preventDefault();let oe=F.nativeEvent.submitter,ce=oe?.getAttribute("formmethod")||d;I(oe||F.currentTarget,{fetcherKey:e,method:ce,navigate:t,replace:o,state:c,relative:g,preventScrollReset:_,viewTransition:T})};return O.createElement("form",{ref:w,method:L,action:U,onSubmit:s?v:X,...x,"data-discover":!q&&n==="render"?"true":void 0})});cO.displayName="Form";function uO(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gw(n){let e=O.useContext(yl);return gt(e,uO(n)),e}function dO(n,{target:e,replace:t,state:s,preventScrollReset:o,relative:c,viewTransition:d}={}){let p=Xi(),v=Gr(),g=Tu(n,{relative:c});return O.useCallback(_=>{if(H4(_,e)){_.preventDefault();let T=t!==void 0?t:ru(v)===ru(g);p(n,{replace:T,state:s,preventScrollReset:o,relative:c,viewTransition:d})}},[v,p,g,t,s,e,n,o,c,d])}var hO=0,fO=()=>`__${String(++hO)}__`;function mO(){let{router:n}=gw("useSubmit"),{basename:e}=O.useContext(Na),t=O4();return O.useCallback(async(s,o={})=>{let{action:c,method:d,encType:p,formData:v,body:g}=Q4(s,e);if(o.navigate===!1){let _=o.fetcherKey||fO();await n.fetch(_,t,o.action||c,{preventScrollReset:o.preventScrollReset,formData:v,body:g,formMethod:o.method||d,formEncType:o.encType||p,flushSync:o.flushSync})}else await n.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:v,body:g,formMethod:o.method||d,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function pO(n,{relative:e}={}){let{basename:t}=O.useContext(Na),s=O.useContext(cr);gt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),c={...Tu(n||".",{relative:e})},d=Gr();if(n==null){c.search=d.search;let p=new URLSearchParams(c.search),v=p.getAll("index");if(v.some(_=>_==="")){p.delete("index"),v.filter(T=>T).forEach(T=>p.append("index",T));let _=p.toString();c.search=_?`?${_}`:""}}return(!n||n===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:Pr([t,c.pathname])),ru(c)}function gO(n,{relative:e}={}){let t=O.useContext(sw);gt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=gw("useViewTransitionState"),o=Tu(n,{relative:e});if(!t.isTransitioning)return!1;let c=Br(t.currentLocation.pathname,s)||t.currentLocation.pathname,d=Br(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Yh(o.pathname,d)!=null||Yh(o.pathname,c)!=null}const An={home:"/",login:"/login",register:"/register",forgotPassword:"/forgot-password",dashboard:"/dashboard",premiosProdutividade:"/premios-produtividade",boletinsMedicao:"/boletins-medicao",documentacoes:"/documentacoes",cadernoVirtual:"/caderno-virtual",relatorios:"/relatorios",financeiro:"/financeiro",notificacoes:"/notificacoes",documentosFinanceiros:"/documentos-financeiros"};function vO({children:n}){const{user:e,loading:t}=Sa();return t?l.jsx("div",{children:"Carregando..."}):e?l.jsx(l.Fragment,{children:n}):l.jsx(L4,{to:An.login,replace:!0})}var vw={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},cb=Vs.createContext&&Vs.createContext(vw),yO=["attr","size","title"];function _O(n,e){if(n==null)return{};var t=EO(n,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function EO(n,e){if(n==null)return{};var t={};for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}function Kh(){return Kh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Kh.apply(this,arguments)}function ub(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,s)}return t}function Xh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ub(Object(t),!0).forEach(function(s){bO(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ub(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function bO(n,e,t){return e=TO(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function TO(n){var e=xO(n,"string");return typeof e=="symbol"?e:e+""}function xO(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function yw(n){return n&&n.map((e,t)=>Vs.createElement(e.tag,Xh({key:t},e.attr),yw(e.child)))}function Ve(n){return e=>Vs.createElement(wO,Kh({attr:Xh({},n.attr)},e),yw(n.child))}function wO(n){var e=t=>{var{attr:s,size:o,title:c}=n,d=_O(n,yO),p=o||t.size||"1em",v;return t.className&&(v=t.className),n.className&&(v=(v?v+" ":"")+n.className),Vs.createElement("svg",Kh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,d,{className:v,style:Xh(Xh({color:n.color||t.color},t.style),n.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),c&&Vs.createElement("title",null,c),n.children)};return cb!==void 0?Vs.createElement(cb.Consumer,null,t=>e(t)):e(vw)}function Yp(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(n)}function SO(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"},child:[]}]})(n)}function Pi(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"},child:[]}]})(n)}function NO(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"},child:[]}]})(n)}function Ng(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"},child:[]}]})(n)}function Sh(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"},child:[]}]})(n)}function dn(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},child:[]}]})(n)}function AO(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(n)}function RO(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(n)}function CO(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},child:[]}]})(n)}function db(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"},child:[]}]})(n)}function ia(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"},child:[]}]})(n)}function _w(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"},child:[]}]})(n)}function Ag(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z",clipRule:"evenodd"},child:[]}]})(n)}function hb(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm2 10a1 1 0 10-2 0v3a1 1 0 102 0v-3zm2-3a1 1 0 011 1v5a1 1 0 11-2 0v-5a1 1 0 011-1zm4-1a1 1 0 10-2 0v7a1 1 0 102 0V8z",clipRule:"evenodd"},child:[]}]})(n)}function Gt(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"},child:[]}]})(n)}function ll(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(n)}function Vr(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"},child:[]}]})(n)}function jO(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z",clipRule:"evenodd"},child:[]},{tag:"path",attr:{d:"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"},child:[]}]})(n)}function Rg(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"},child:[]}]})(n)}function Ji(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z",clipRule:"evenodd"},child:[]}]})(n)}function Ew(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"},child:[]}]})(n)}function DO(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"},child:[]}]})(n)}function Cg(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"},child:[]}]})(n)}function fb(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z",clipRule:"evenodd"},child:[]}]})(n)}function jg(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"},child:[]}]})(n)}function IO(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z",clipRule:"evenodd"},child:[]}]})(n)}function Jh(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"},child:[]},{tag:"path",attr:{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"},child:[]}]})(n)}function OO(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"},child:[]}]})(n)}function Sf(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z",clipRule:"evenodd"},child:[]}]})(n)}function cl(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"},child:[]}]})(n)}function ul(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"},child:[]}]})(n)}function xu(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"},child:[]}]})(n)}function Gi(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"},child:[]}]})(n)}function mb(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 13a1 1 0 100 2h5a1 1 0 001-1V9a1 1 0 10-2 0v2.586l-4.293-4.293a1 1 0 00-1.414 0L8 9.586 3.707 5.293a1 1 0 00-1.414 1.414l5 5a1 1 0 001.414 0L11 9.414 14.586 13H12z",clipRule:"evenodd"},child:[]}]})(n)}function Wh(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"},child:[]}]})(n)}function PO(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(n)}function zs(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"},child:[]}]})(n)}function VO(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"},child:[]}]})(n)}function bw(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"},child:[]}]})(n)}function In(n){return Ve({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(n)}const MO=()=>{const n=Xi(),[e,t]=O.useState({email:"",password:""}),[s,o]=O.useState(!1),[c,d]=O.useState({}),{login:p,loading:v}=Sa(),g=w=>{const{name:I,value:U}=w.target;t(L=>({...L,[I]:U})),c[I]&&d(L=>({...L,[I]:void 0}))},_=()=>{const w={};return e.email?/\S+@\S+\.\S+/.test(e.email)||(w.email="E-mail invlido"):w.email="E-mail  obrigatrio",e.password?e.password.length<6&&(w.password="Senha deve ter no mnimo 6 caracteres"):w.password="Senha  obrigatria",d(w),Object.keys(w).length===0},T=()=>{t({email:"",password:""}),o(!1),d({email:void 0,password:void 0})},x=async w=>{if(w.preventDefault(),!!_())try{await p({email:e.email,password:e.password}),n("/dashboard"),T()}catch(I){console.error("Erro ao fazer login:",I),d({email:"Erro ao fazer login",password:"Erro ao fazer login"})}};return l.jsxs("div",{className:"login-container",children:[l.jsxs("div",{className:"login-background",children:[l.jsx("div",{className:"shape-1"}),l.jsx("div",{className:"shape-2"})]}),l.jsxs("div",{className:"login-card",children:[l.jsxs("div",{className:"login-header",children:[l.jsx("div",{className:"logo-container",children:l.jsx("div",{className:"logo-icon",children:l.jsx(zs,{})})}),l.jsx("h1",{children:"Bem-vindo de volta!"}),l.jsx("p",{children:"Acesse sua conta para continuar"})]}),l.jsxs("form",{className:"login-form",onSubmit:x,children:[l.jsxs("div",{className:"login-form-group",children:[l.jsx("label",{htmlFor:"email",children:"E-mail"}),l.jsxs("div",{className:"login-input-wrapper",children:[l.jsx(Jh,{className:"login-input-icon"}),l.jsx("input",{type:"email",id:"email",name:"email",required:!0,placeholder:"seu.email@empresa.com",value:e.email,onChange:g,className:c.email?"error":""})]}),c.email&&l.jsx("span",{className:"login-error-message",children:c.email})]}),l.jsxs("div",{className:"login-form-group",children:[l.jsx("label",{htmlFor:"password",children:"Senha"}),l.jsxs("div",{className:"login-input-wrapper",children:[l.jsx(jg,{className:"login-input-icon"}),l.jsx("input",{type:"password",id:"password",name:"password",required:!0,placeholder:"",value:e.password,onChange:g,className:c.password?"error":""})]}),c.password&&l.jsx("span",{className:"login-error-message",children:c.password})]}),l.jsxs("div",{className:"login-form-options",children:[l.jsxs("label",{className:"login-checkbox-container",children:[l.jsx("input",{type:"checkbox",checked:s,onChange:w=>o(w.target.checked)}),l.jsx("span",{className:"login-checkmark"}),"Lembrar-me"]}),l.jsx("a",{href:"#",className:"login-forgot-password",onClick:w=>{w.preventDefault(),n("/forgot-password")},children:"Esqueceu a senha?"})]}),l.jsx("button",{type:"submit",className:"login-btn-primary",disabled:v,children:v?"Entrando...":"Entrar"}),l.jsx("div",{className:"login-divider"}),l.jsx("button",{type:"button",className:"login-btn-secondary",onClick:()=>n("/register"),children:"Criar nova conta"}),l.jsx("div",{className:"login-footer",children:l.jsx("p",{children:" 2025 Sistema de Gesto RH. Todos os direitos reservados."})})]})]})]})},LO=()=>{const n=Xi(),{register:e,loading:t}=Sa(),[s,o]=O.useState({name:"",email:"",password:"",confirmPassword:""}),[c,d]=O.useState({}),[p,v]=O.useState(!1),g=w=>{const{name:I,value:U,type:L}=w.target,q=L==="checkbox"?w.target.checked:!1;o(X=>({...X,[I]:L==="checkbox"?q:U})),c[I]&&d(X=>({...X,[I]:void 0}))},_=()=>{const w={};return s.name.trim()?s.name.trim().length<3&&(w.name="Nome deve ter no mnimo 3 caracteres"):w.name="Nome completo  obrigatrio",s.email?/\S+@\S+\.\S+/.test(s.email)||(w.email="E-mail invlido"):w.email="E-mail  obrigatrio",s.password?s.password.length<8?w.password="Senha deve ter no mnimo 8 caracteres":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(s.password)||(w.password="Senha deve conter maisculas, minsculas e nmeros"):w.password="Senha  obrigatria",s.confirmPassword?s.password!==s.confirmPassword&&(w.confirmPassword="As senhas no coincidem"):w.confirmPassword="Confirmao de senha  obrigatria",d(w),Object.keys(w).length===0},T=()=>{o({name:"",email:"",password:"",confirmPassword:""}),d({})},x=async w=>{if(w.preventDefault(),!!_())try{await e({name:s.name,email:s.email,password:s.password,confirmPassword:s.confirmPassword}),n("/dashboard"),T()}catch(I){console.error("Erro ao registrar usurio:",I),d({name:"Erro ao registrar usurio",email:"Erro ao registrar usurio",password:"Erro ao registrar usurio",confirmPassword:"Erro ao registrar usurio"})}};return l.jsxs("div",{className:"register-container",children:[l.jsxs("div",{className:"register-background",children:[l.jsx("div",{className:"shape-1"}),l.jsx("div",{className:"shape-2"}),l.jsx("div",{className:"shape-3"})]}),l.jsxs("div",{className:"register-card",children:[l.jsxs("div",{className:"register-header",children:[l.jsx("div",{className:"logo-container",children:l.jsx("div",{className:"logo-icon",children:l.jsx(zs,{})})}),l.jsx("h1",{children:"Criar Nova Conta"}),l.jsx("p",{children:"Preencha seus dados para acessar a plataforma de gesto"})]}),l.jsxs("form",{className:"register-form",onSubmit:x,children:[l.jsxs("div",{className:"register-form-group",children:[l.jsx("label",{htmlFor:"name",children:"Nome Completo"}),l.jsxs("div",{className:"register-input-wrapper",children:[l.jsx(zs,{className:"register-input-icon"}),l.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:g,placeholder:"Joo Silva",className:c.name?"error":""})]}),c.name&&l.jsx("span",{className:"register-error-message",children:c.name})]}),l.jsxs("div",{className:"register-form-group",children:[l.jsx("label",{htmlFor:"email",children:"E-mail Corporativo"}),l.jsxs("div",{className:"register-input-wrapper",children:[l.jsx(Jh,{className:"register-input-icon"}),l.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:g,placeholder:"joao.silva@empresa.com",className:c.email?"error":""})]}),c.email&&l.jsx("span",{className:"register-error-message",children:c.email})]}),l.jsxs("div",{className:"register-form-group",children:[l.jsx("label",{htmlFor:"password",children:"Senha"}),l.jsxs("div",{className:"register-input-wrapper",children:[l.jsx(jg,{className:"register-input-icon"}),l.jsx("input",{type:p?"text":"password",id:"password",name:"password",value:s.password,onChange:g,placeholder:"Mnimo 8 caracteres",className:c.password?"error":""}),l.jsx("button",{type:"button",className:"register-toggle-password",onClick:()=>v(!p),children:p?l.jsx(jO,{}):l.jsx(Rg,{})})]}),c.password&&l.jsx("span",{className:"register-error-message",children:c.password})]}),l.jsxs("div",{className:"register-form-group",children:[l.jsx("label",{htmlFor:"confirmPassword",children:"Confirmar Senha"}),l.jsxs("div",{className:"register-input-wrapper",children:[l.jsx(jg,{className:"register-input-icon"}),l.jsx("input",{type:p?"text":"password",id:"confirmPassword",name:"confirmPassword",value:s.confirmPassword,onChange:g,placeholder:"Digite a senha novamente",className:c.confirmPassword?"error":""})]}),c.confirmPassword&&l.jsx("span",{className:"register-error-message",children:c.confirmPassword})]}),l.jsx("div",{className:"register-form-group register-checkbox-group",children:l.jsxs("label",{className:"register-checkbox-container",children:[l.jsx("input",{type:"checkbox",name:"termsAccepted",onChange:g}),l.jsx("span",{className:"register-checkmark"}),l.jsx("span",{className:"register-checkbox-label",children:"Eu aceito os termos de uso e a poltica de privacidade"})]})}),l.jsx("button",{type:"submit",className:"register-btn-primary",disabled:t,children:t?"Criando conta...":"Criar Conta"}),l.jsx("div",{className:"register-divider",children:l.jsx("span",{children:"ou"})}),l.jsx("button",{type:"button",className:"register-btn-secondary",onClick:()=>n("/login"),children:"J tenho uma conta"})]}),l.jsx("div",{className:"register-footer",children:l.jsx("p",{children:" 2025 Sistema de Gesto RH. Todos os direitos reservados."})})]})]})},kO=()=>{const n=Xi(),[e,t]=O.useState(""),[s,o]=O.useState(null),[c,d]=O.useState(!1),[p,v]=O.useState(!1),g=x=>{t(x.target.value),s&&o("")},_=()=>e?/\S+@\S+\.\S+/.test(e)?!0:(o("E-mail invlido"),!1):(o("Email  obrigatrio"),!1),T=async x=>{if(x.preventDefault(),!!_()){d(!0),o("");try{await kc.resetPassword(e),v(!0)}catch(w){o(w instanceof Error?w.message:"Erro ao enviar e-mail de recuperao")}finally{d(!1)}}};return l.jsxs("div",{className:"forgot-password-container",children:[l.jsxs("div",{className:"forgot-password-background",children:[l.jsx("div",{className:"shape-1"}),l.jsx("div",{className:"shape-2"})]}),l.jsxs("div",{className:"forgot-password-card",children:[l.jsxs("div",{className:"forgot-password-header",children:[l.jsx("div",{className:"logo-container",children:l.jsx("div",{className:"logo-icon",children:l.jsx(Jh,{})})}),p?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"success-icon",children:l.jsx(dn,{})}),l.jsx("h1",{children:"E-mail Enviado!"}),l.jsx("p",{children:"Verifique sua caixa de entrada para continuar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("h1",{children:"Recuperar Senha"}),l.jsx("p",{children:"Digite seu e-mail para receber o link de recuperao"})]})]}),p?l.jsxs("div",{className:"forgot-password-success",children:[l.jsxs("div",{className:"success-message",children:[l.jsxs("p",{children:["Enviamos um e-mail para ",l.jsx("strong",{children:e})," com instrues para redefinir sua senha."]}),l.jsx("p",{className:"success-hint",children:"Se voc no receber o e-mail, verifique sua caixa de spam ou tente novamente."})]}),l.jsxs("div",{className:"forgot-password-success-actions",children:[l.jsxs("button",{className:"forgot-password-btn-secondary",onClick:()=>{v(!1),t(""),o("")},children:[" ",l.jsx(Yp,{})," Enviar novamente"]}),l.jsxs("button",{className:"forgot-password-btn-primary",onClick:()=>n("/login"),children:[" ",l.jsx(Yp,{})," Voltar para Login"]})]})]}):l.jsxs("form",{className:"forgot-password-form",onSubmit:T,children:[l.jsxs("div",{className:"forgot-password-form-group",children:[l.jsx("label",{htmlFor:"email",children:"E-mail"}),l.jsxs("div",{className:"forgot-password-input-wrapper",children:[l.jsx(Jh,{className:"forgot-password-input-icon"}),l.jsx("input",{type:"email",id:"email",name:"email",value:e,required:!0,placeholder:"seu.email@empresa.com",onChange:g,className:s?"error":""})]}),s&&l.jsx("span",{className:"forgot-password-error-message",children:s})]}),l.jsx("button",{type:"submit",className:"forgot-password-btn-primary",disabled:c,children:c?"Enviando...":"Enviar Link de Recuperao"}),l.jsx("div",{className:"forgot-password-divider"}),l.jsxs("button",{type:"button",className:"forgot-password-btn-secondary",onClick:()=>n("/login"),disabled:c,children:[" ",l.jsx(Yp,{})," Voltar para Login"]})]})]})]})},UO=({collapsed:n,onToggle:e})=>{const t=[{path:"/dashboard",icon:DO,label:"Dashboard"},{path:"/notificacoes",icon:Pi,label:"Notificaes"},{path:"/premios-produtividade",icon:Wh,label:"Prmio de Produtividade"},{path:"/boletins-medicao",icon:Gt,label:"Boletins de Medio"},{path:"/documentacoes",icon:Ew,label:"Documentaes e Integraes"},{path:"/caderno-virtual",icon:NO,label:"Caderno Virtual"},{path:"/financeiro",icon:Ag,label:"Gesto Financeira"},{path:"/relatorios",icon:Sh,label:"Relatrios"},{path:"/documentos-financeiros",icon:Gt,label:"Documentos Financeiros"}];return l.jsxs("aside",{className:`sidebar ${n?"collapsed":""}`,children:[l.jsx("div",{className:"sidebar-header",children:l.jsxs("div",{className:"sidebar-logo",children:[l.jsx("div",{className:"logo-icon",children:"RH"}),!n&&l.jsx("span",{className:"logo-text",children:"Sistema RH"})]})}),l.jsx("nav",{className:"sidebar-nav",children:l.jsx("ul",{className:"nav-list",children:t.map(s=>{const o=s.icon;return l.jsx("li",{className:"nav-item",children:l.jsxs(pw,{to:s.path,className:({isActive:c})=>`nav-link ${c?"active":""}`,children:[l.jsx(o,{className:"nav-icon"}),!n&&l.jsx("span",{className:"nav-label",children:s.label})]})},s.path)})})}),l.jsx("button",{className:"sidebar-toggle",onClick:e,"aria-label":"Toggle sidebar",children:n?l.jsx(RO,{}):l.jsx(AO,{})})]})},zO=({onMenuClick:n,collapsed:e=!1})=>{const{user:t,logOut:s}=Sa(),o=Xi(),[c,d]=O.useState(!1),[p,v]=O.useState(!1),{notificacoes:g,naoLidas:_,marcarComoLida:T,marcarTodasComoLidas:x,deletar:w}=ew(),I=g.slice(0,5),U=async()=>{try{await s(),o("/login")}catch(ue){console.error("Erro ao fazer logout:",ue)}},L=async(ue,A)=>{await T(ue),v(!1),A&&o(A)},q=async()=>{await x()},X=async(ue,A)=>{ue.stopPropagation(),await w(A)},F=ue=>{const D=new Date().getTime()-ue.getTime(),S=Math.floor(D/6e4),j=Math.floor(S/60),M=Math.floor(j/24);return S<1?"Agora":S<60?`H ${S} min`:j<24?`H ${j} h`:M===1?"Ontem":M<7?`H ${M} dias`:ue.toLocaleDateString()},oe=ue=>{switch(ue){case"documento_vencido":case"documento_vencendo":return"";case"premio_lancado":return"";case"boletim_pendente":case"boletim_vencendo":return"";default:return""}},ce=ue=>{switch(ue){case"urgente":return"priority-urgent";case"alta":return"priority-high";case"media":return"priority-medium";default:return"priority-low"}};return l.jsxs("header",{className:`header ${e?"sidebar-collapsed":""}`,children:[l.jsxs("div",{className:"header-left",children:[l.jsx("button",{className:"menu-toggle",onClick:n,"aria-label":"Toggle menu",children:l.jsx(OO,{})}),l.jsx("h1",{className:"header-title",children:"Sistema de Gesto RH"})]}),l.jsx("div",{className:"header-right",children:l.jsxs("div",{className:"header-actions",children:[l.jsxs("div",{className:"notification-container",children:[l.jsxs("button",{className:"icon-button",onClick:()=>v(!p),"aria-label":"Notificaes",children:[l.jsx(Pi,{}),_>0&&l.jsx("span",{className:"notification-badge",children:_>99?"99+":_})]}),p&&l.jsxs("div",{className:"dropdown-menu notifications-menu",children:[l.jsxs("div",{className:"dropdown-header",children:[l.jsx("h3",{children:"Notificaes"}),_>0&&l.jsx("button",{className:"mark-read",onClick:q,children:"Marcar todas como lidas"})]}),I.length===0?l.jsxs("div",{className:"notification-empty",children:[l.jsx(Cg,{}),l.jsx("p",{children:"Nenhuma notificao"})]}):l.jsx("ul",{className:"notification-list",children:I.map(ue=>l.jsxs("li",{className:`notification-item ${ue.lida?"":"unread"} ${ce(ue.prioridade)}`,onClick:()=>L(ue.id,ue.link),children:[l.jsx("div",{className:"notification-icon",children:oe(ue.tipo)}),l.jsxs("div",{className:"notification-content",children:[l.jsx("p",{className:"notification-title",children:ue.titulo}),l.jsx("p",{className:"notification-text",children:ue.mensagem}),l.jsx("span",{className:"notification-time",children:F(ue.criadoEm)})]}),l.jsx("button",{className:"notification-delete",onClick:A=>X(A,ue.id),"aria-label":"Deletar notificao",children:l.jsx(In,{})})]},ue.id))}),l.jsx("div",{className:"dropdown-footer",children:l.jsx("button",{className:"view-all",onClick:()=>{o("/notificacoes"),v(!1)},children:"Ver todas as notificaes"})})]})]}),l.jsxs("div",{className:"user-container",children:[l.jsxs("button",{className:"user-button",onClick:()=>d(!c),"aria-label":"Menu do usurio",children:[l.jsx("div",{className:"user-avatar",children:l.jsx(zs,{})}),l.jsxs("div",{className:"user-info",children:[l.jsx("span",{className:"user-name",children:t?.name||"Usurio"}),l.jsx("span",{className:"user-role",children:t?.role==="admin"?"Administrador":"Colaborador"})]})]}),c&&l.jsxs("div",{className:"dropdown-menu user-menu",children:[l.jsxs("div",{className:"user-menu-header",children:[l.jsx("div",{className:"user-avatar-large",children:l.jsx(zs,{})}),l.jsxs("div",{className:"user-details",children:[l.jsx("p",{className:"user-name-large",children:t?.name||"Usurio"}),l.jsx("p",{className:"user-email",children:t?.email||"email@empresa.com"})]})]}),l.jsxs("ul",{className:"menu-list",children:[l.jsx("li",{children:l.jsxs("button",{className:"menu-item",onClick:()=>o("/perfil"),children:[l.jsx(zs,{}),l.jsx("span",{children:"Meu Perfil"})]})}),l.jsx("li",{children:l.jsxs("button",{className:"menu-item",onClick:()=>o("/configuracoes"),children:[l.jsx(_w,{}),l.jsx("span",{children:"Configuraes"})]})}),l.jsx("li",{className:"menu-divider"}),l.jsx("li",{children:l.jsxs("button",{className:"menu-item logout",onClick:U,children:[l.jsx(IO,{}),l.jsx("span",{children:"Sair"})]})})]})]})]})]})}),(c||p)&&l.jsx("div",{className:"overlay",onClick:()=>{d(!1),v(!1)}})]})},Rs=Rt(Pe,"documentacoes"),Rc=Rt(Pe,"treinamentos"),Dg=n=>{const e=new Date;e.setHours(0,0,0,0);const t=new Date(n);t.setHours(0,0,0,0);const s=t.getTime()-e.getTime(),o=Math.ceil(s/(1e3*60*60*24));return o<0?"Vencido":o<=7?"Vencendo":"Vlido"},oh=n=>{const e=n.data(),t=e.dataValidade?e.dataValidade.toDate():new Date,s=Dg(t);return{id:n.id,colaboradorId:e.colaboradorId,colaboradorNome:e.colaboradorNome,cpf:e.cpf,cargo:e.cargo,setor:e.setor,tipoDocumento:e.tipoDocumento,numeroDocumento:e.numeroDocumento,orgaoEmissor:e.orgaoEmissor,dataEmissao:e.dataEmissao?e.dataEmissao.toDate():void 0,dataValidade:t,status:s,observacoes:e.observacoes,anexos:e.anexos||[],alertaEnviado:e.alertaEnviado||!1,dataAlerta:e.dataAlerta?e.dataAlerta.toDate():void 0,criadoPor:e.criadoPor,criadoEm:e.criadoEm?e.criadoEm.toDate():new Date,atualizadoEm:e.atualizadoEm?e.atualizadoEm.toDate():new Date}},BO=n=>{const e=[];return n?.colaboradorNome&&e.push(Te("colaboradorNomeSearch","array-contains",n.colaboradorNome.toLowerCase())),n?.tipoDocumento&&e.push(Te("tipoDocumento","==",n.tipoDocumento)),n?.dataVencimentoInicio&&e.push(Te("dataValidade",">=",me.fromDate(n.dataVencimentoInicio))),n?.dataVencimentoFim&&e.push(Te("dataValidade","<=",me.fromDate(n.dataVencimentoFim))),e.push(jn("dataValidade","asc")),tt(Rs,...e)},ba={async list(n){const e=BO(n);let s=(await Ct(e)).docs.map(oh);if(n?.status&&(s=s.filter(o=>o.status===n.status)),n?.vencidos&&(s=s.filter(o=>o.status==="Vencido")),n?.vencendoEm7Dias&&(s=s.filter(o=>o.status==="Vencendo")),n?.vencendoEm30Dias){const o=new Date,c=new Date(o);c.setDate(c.getDate()+30),s=s.filter(d=>d.dataValidade>=o&&d.dataValidade<=c&&d.status!=="Vencido")}return s},async create(n,e){const t=Dg(n.dataValidade),s={...n,dataEmissao:n.dataEmissao?me.fromDate(n.dataEmissao):null,dataValidade:me.fromDate(n.dataValidade),status:t,colaboradorNomeSearch:n.colaboradorNome.toLowerCase().split(" ").filter(c=>c.length>0),anexos:[],alertaEnviado:!1,criadoPor:e,criadoEm:me.now(),atualizadoEm:me.now()};return(await Ur(Rs,s)).id},async update(n,e){const t={atualizadoEm:me.now()};e.tipoDocumento&&(t.tipoDocumento=e.tipoDocumento),e.numeroDocumento!==void 0&&(t.numeroDocumento=e.numeroDocumento),e.orgaoEmissor!==void 0&&(t.orgaoEmissor=e.orgaoEmissor),e.dataEmissao!==void 0&&(t.dataEmissao=e.dataEmissao?me.fromDate(e.dataEmissao):null),e.dataValidade&&(t.dataValidade=me.fromDate(e.dataValidade),t.status=Dg(e.dataValidade)),e.observacoes!==void 0&&(t.observacoes=e.observacoes),e.colaboradorNome&&(t.colaboradorNome=e.colaboradorNome,t.colaboradorNomeSearch=e.colaboradorNome.toLowerCase().split(" ").filter(s=>s.length>0)),e.cpf&&(t.cpf=e.cpf),e.cargo&&(t.cargo=e.cargo),e.setor&&(t.setor=e.setor),await Dn(Xe(Rs,n),t)},async delete(n){await Ys(Xe(Rs,n))},async getStats(){const e=(await Ct(Rs)).docs.map(oh),t=new Date;t.setHours(0,0,0,0);const s=new Date(t);s.setDate(s.getDate()+7);const o=new Date(t);return o.setDate(o.getDate()+30),{total:e.length,validos:e.filter(c=>c.status==="Vlido"&&c.dataValidade>o).length,vencidos:e.filter(c=>c.status==="Vencido").length,vencendoEm7Dias:e.filter(c=>c.status==="Vencendo"&&c.dataValidade>=t&&c.dataValidade<=s).length,vencendoEm30Dias:e.filter(c=>c.dataValidade>=t&&c.dataValidade<=o&&c.status!=="Vencido").length,pendentes:e.filter(c=>c.status==="Pendente").length}},async getDocumentosVencidos(){return(await Ct(Rs)).docs.map(oh).filter(t=>t.status==="Vencido")},async getDocumentosVencendo(){return(await Ct(Rs)).docs.map(oh).filter(t=>t.status==="Vencendo")},async marcarAlertaEnviado(n){await Dn(Xe(Rs,n),{alertaEnviado:!0,dataAlerta:me.now(),atualizadoEm:me.now()})},async listTreinamentos(){const n=tt(Rc,jn("dataInicio","desc"));return(await Ct(n)).docs.map(t=>{const s=t.data();return{id:t.id,titulo:s.titulo,descricao:s.descricao,dataInicio:s.dataInicio.toDate(),dataFim:s.dataFim.toDate(),colaboradores:s.colaboradores||[],tipoDocumento:s.tipoDocumento,status:s.status,criadoEm:s.criadoEm.toDate(),atualizadoEm:s.atualizadoEm.toDate()}})},async createTreinamento(n){const e=new Date;let t="Agendado";n.dataInicio<=e&&n.dataFim>=e?t="Em andamento":n.dataFim<e&&(t="Concludo");const s={...n,dataInicio:me.fromDate(n.dataInicio),dataFim:me.fromDate(n.dataFim),status:t,criadoEm:me.now(),atualizadoEm:me.now()};return(await Ur(Rc,s)).id},async updateTreinamento(n,e){const t={atualizadoEm:me.now()};e.titulo&&(t.titulo=e.titulo),e.descricao&&(t.descricao=e.descricao),e.dataInicio&&(t.dataInicio=me.fromDate(e.dataInicio)),e.dataFim&&(t.dataFim=me.fromDate(e.dataFim)),e.colaboradores&&(t.colaboradores=e.colaboradores),e.tipoDocumento&&(t.tipoDocumento=e.tipoDocumento);const s=Xe(Rc,n),o=await Fi(s);if(o.exists()){const c=o.data(),d=e.dataInicio?e.dataInicio:c.dataInicio.toDate(),p=e.dataFim?e.dataFim:c.dataFim.toDate(),v=new Date;d<=v&&p>=v?t.status="Em andamento":p<v?t.status="Concludo":t.status="Agendado"}await Dn(Xe(Rc,n),t)},async deleteTreinamento(n){await Ys(Xe(Rc,n))}},Ka=[{id:"1",numero:"BM-2024-001",cliente:"Construtora ABC Ltda",mesReferencia:"Outubro",anoReferencia:2024,tipoServico:"Instalao",status:"Emitido",valor:45e3,dataEmissao:new Date("2024-10-15"),dataVencimento:new Date("2024-11-15"),observacoes:"Instalao completa do sistema eltrico",anexos:[],criadoPor:"user1",criadoEm:new Date("2024-10-15"),atualizadoEm:new Date("2024-10-15")},{id:"2",numero:"BM-2024-002",cliente:"Empresa XYZ S.A.",mesReferencia:"Outubro",anoReferencia:2024,tipoServico:"Manuteno",status:"Pendente",valor:12500,dataEmissao:new Date("2024-10-20"),dataVencimento:new Date("2024-11-20"),observacoes:"Manuteno preventiva mensal",anexos:[],criadoPor:"user1",criadoEm:new Date("2024-10-20"),atualizadoEm:new Date("2024-10-20")},{id:"3",numero:"BM-2024-003",cliente:"Construtora ABC Ltda",mesReferencia:"Setembro",anoReferencia:2024,tipoServico:"Vistoria",status:"Aguardando assinatura",valor:8500,dataEmissao:new Date("2024-09-28"),dataVencimento:new Date("2024-10-28"),observacoes:"Vistoria tcnica completa",anexos:[],criadoPor:"user1",criadoEm:new Date("2024-09-28"),atualizadoEm:new Date("2024-09-28")},{id:"4",numero:"BM-2024-004",cliente:"Construtora DEF",mesReferencia:"Outubro",anoReferencia:2024,tipoServico:"Instalao",status:"Emitido",valor:32e3,dataEmissao:new Date("2024-10-10"),dataVencimento:new Date("2024-11-10"),observacoes:"",anexos:[],criadoPor:"user1",criadoEm:new Date("2024-10-10"),atualizadoEm:new Date("2024-10-10")},{id:"5",numero:"BM-2024-005",cliente:"Empresa XYZ S.A.",mesReferencia:"Outubro",anoReferencia:2024,tipoServico:"Manuteno",status:"Aguardando assinatura",valor:15e3,dataEmissao:new Date("2024-10-25"),dataVencimento:new Date("2024-11-25"),observacoes:"Manuteno corretiva",anexos:[],criadoPor:"user1",criadoEm:new Date("2024-10-25"),atualizadoEm:new Date("2024-10-25")}],el={async getAll(n){await new Promise(t=>setTimeout(t,300));let e=[...Ka];return n&&(n.mes&&(e=e.filter(t=>t.mesReferencia===n.mes)),n.ano&&(e=e.filter(t=>t.anoReferencia===n.ano)),n.cliente&&(e=e.filter(t=>t.cliente.toLowerCase().includes(n.cliente.toLowerCase()))),n.tipoServico&&(e=e.filter(t=>t.tipoServico===n.tipoServico)),n.status&&(e=e.filter(t=>t.status===n.status))),e.sort((t,s)=>s.criadoEm.getTime()-t.criadoEm.getTime())},async getById(n){return await new Promise(e=>setTimeout(e,200)),Ka.find(e=>e.id===n)||null},async create(n){await new Promise(t=>setTimeout(t,500));const e={id:Date.now().toString(),numero:`BM-${n.anoReferencia}-${String(Ka.length+1).padStart(3,"0")}`,cliente:n.cliente,mesReferencia:n.mesReferencia,anoReferencia:n.anoReferencia,tipoServico:n.tipoServico,status:n.status,valor:n.valor,dataEmissao:n.dataEmissao,dataVencimento:n.dataVencimento,observacoes:n.observacoes,anexos:[],criadoPor:"current-user",criadoEm:new Date,atualizadoEm:new Date};return Ka.push(e),e},async update(n,e){await new Promise(d=>setTimeout(d,500));const t=Ka.findIndex(d=>d.id===n);if(t===-1)throw new Error("Boletim no encontrado");const{anexos:s,...o}=e,c={...Ka[t],...o,atualizadoEm:new Date};return Ka[t]=c,c},async delete(n){await new Promise(t=>setTimeout(t,300));const e=Ka.findIndex(t=>t.id===n);e!==-1&&Ka.splice(e,1)},async getStats(n,e){await new Promise(d=>setTimeout(d,200));let t=[...Ka];n&&(t=t.filter(d=>d.anoReferencia===n)),e&&(t=t.filter(d=>d.mesReferencia===e));const s=t.filter(d=>d.status==="Emitido").reduce((d,p)=>d+p.valor,0),o=t.filter(d=>d.status==="Pendente"||d.status==="Aguardando assinatura").reduce((d,p)=>d+p.valor,0),c=t.filter(d=>d.status==="Aguardando assinatura").length;return{totalEmitidoMes:s,saldoPendente:o,totalBoletins:t.length,aguardandoAssinatura:c}}},Cr=Rt(Pe,"premiosProdutividade"),Cc=n=>{const e=n.data();return{id:n.id,colaboradorId:e.colaboradorId,colaboradorNome:e.colaboradorNome,cpf:e.cpf,cargo:e.cargo,setor:e.setor,valor:e.valor,dataPremio:e.dataPremio?e.dataPremio.toDate():new Date(e.criadoEm?.toDate?.()??Date.now()),motivo:e.motivo,status:e.status,mesReferencia:e.mesReferencia,anoReferencia:e.anoReferencia,criadoEm:e.criadoEm?e.criadoEm.toDate():new Date,atualizadoEm:e.atualizadoEm?e.atualizadoEm.toDate():new Date,aprovadoPor:e.aprovadoPor,observacoes:e.observacoes}},FO=n=>{const e=[];return n?.ano&&e.push(Te("anoReferencia","==",n.ano)),n?.mes&&e.push(Te("mesReferencia","==",n.mes)),n?.status&&e.push(Te("status","==",n.status)),n?.colaboradorNome&&e.push(Te("colaboradorNomeSearch","array-contains",n.colaboradorNome.toLowerCase())),e.push(jn("dataPremio","desc")),tt(Cr,...e)},Ja={async list(n){const e=FO(n);return(await Ct(e)).docs.map(Cc)},async create(n){const e={...n,valor:Number(n.valor),mesReferencia:n.dataPremio.getMonth()+1,anoReferencia:n.dataPremio.getFullYear(),dataPremio:me.fromDate(n.dataPremio),status:n.status,colaboradorNomeSearch:n.colaboradorNome.toLowerCase().split(" ").filter(Boolean),criadoEm:me.now(),atualizadoEm:me.now()};return(await Ur(Cr,e)).id},async update(n,e){const t=Xe(Cr,n),s={...e,atualizadoEm:me.now()};e.dataPremio&&(s.dataPremio=me.fromDate(e.dataPremio),s.mesReferencia=e.dataPremio.getMonth()+1,s.anoReferencia=e.dataPremio.getFullYear()),e.colaboradorNome&&(s.colaboradorNomeSearch=e.colaboradorNome.toLowerCase().split(" ").filter(Boolean)),await Dn(t,s)},async updateStatus(n,e,t){const s=Xe(Cr,n);await Dn(s,{status:e,aprovadoPor:t||null,atualizadoEm:me.now()})},async delete(n){const e=Xe(Cr,n);await Ys(e)},async getHistoricoByColaborador(n){const e=tt(Cr,Te("colaboradorId","==",n),jn("dataPremio","desc"));return(await Ct(e)).docs.map(Cc)},async getStats(n,e){const t=tt(Cr,Te("anoReferencia","==",n),Te("mesReferencia","==",e)),o=(await Ct(t)).docs.map(Cc),c=o.reduce((g,_)=>g+_.valor,0),d=o.filter(g=>g.status==="Pendente").reduce((g,_)=>g+_.valor,0),p=o.filter(g=>g.status==="Em reviso").reduce((g,_)=>g+_.valor,0),v=o.filter(g=>g.status==="Aprovado").reduce((g,_)=>g+_.valor,0);return{totalPremiado:c,pendente:d,emRevisao:p,aprovados:v}},async gerarRelatorioMensal(n,e){const t=tt(Cr,Te("anoReferencia","==",n),Te("mesReferencia","==",e)),o=(await Ct(t)).docs.map(Cc),c=o.filter(v=>v.status==="Aprovado").reduce((v,g)=>v+g.valor,0),d=o.filter(v=>v.status==="Pendente").reduce((v,g)=>v+g.valor,0),p=o.filter(v=>v.status==="Em reviso").reduce((v,g)=>v+g.valor,0);return{mes:e,ano:n,totalRegistros:o.length,totalPago:c,totalPendente:d,totalEmRevisao:p}},async exportarRelatorioCSV(n,e){const t=tt(Cr,Te("anoReferencia","==",n),Te("mesReferencia","==",e),jn("dataPremio","desc")),o=(await Ct(t)).docs.map(Cc),c=["Colaborador","CPF","Cargo","Setor","Valor","Data","Motivo","Status"],d=o.map(v=>[v.colaboradorNome,v.cpf,v.cargo,v.setor,v.valor.toFixed(2).replace(".",","),v.dataPremio.toLocaleDateString("pt-BR"),v.motivo.replace(/(\r\n|\n|\r)/gm," "),v.status]),p=[c,...d].map(v=>v.map(g=>`"${String(g).replace(/"/g,'""')}"`).join(";")).join(`
`);return new Blob([p],{type:"text/csv;charset=utf-8;"})}},pb={async verificarDocumentos(n){try{const t=(await ht.obterConfiguracoes(n)).diasAntesVencimento||7,s=await ba.list(),o=new Date,c=new Date;c.setDate(c.getDate()+t);for(const d of s){const p=new Date(d.dataValidade);p<o&&d.status==="Vencido"?(!d.dataAlerta||new Date().getTime()-new Date(d.dataAlerta).getTime()>1440*60*1e3)&&await ht.notificarDocumentoVencido(n,d.id,d.colaboradorNome,d.tipoDocumento,p):p>o&&p<=c&&(d.status==="Vencendo"||d.status==="Vlido")&&(!d.dataAlerta||new Date().getTime()-new Date(d.dataAlerta).getTime()>1440*60*1e3)&&await ht.notificarDocumentoVencendo(n,d.id,d.colaboradorNome,d.tipoDocumento,p)}}catch(e){console.error("Erro ao verificar documentos:",e)}},async verificarBoletins(n){try{const e=await el.getAll(),t=new Date,s=new Date;s.setDate(s.getDate()+7);for(const o of e)if(o.status==="Pendente"&&await ht.notificarBoletimPendente(n,o.id,o.cliente,o.numero,o.valor),o.dataVencimento){const c=new Date(o.dataVencimento);c>t&&c<=s&&o.status!=="Emitido"&&await ht.notificarBoletimVencendo(n,o.id,o.cliente,o.numero,c)}}catch(e){console.error("Erro ao verificar boletins:",e)}},async verificarPremios(n){try{const e=await Ja.list(),t=new Date;t.setDate(t.getDate()-7);for(const s of e)new Date(s.criadoEm)>=t&&((await ht.listarPorUsuario(n,{tipo:"premio_lancado"})).some(p=>p.metadata?.premioId===s.id)||await ht.notificarPremioLancado(n,s.id,s.colaboradorNome,s.valor,s.motivo))}catch(e){console.error("Erro ao verificar prmios:",e)}},async executarVerificacaoCompleta(n){console.log("Iniciando verificao automtica de notificaes...");try{await Promise.all([this.verificarDocumentos(n),this.verificarBoletins(n),this.verificarPremios(n)]),console.log("Verificao automtica concluda com sucesso")}catch(e){console.error("Erro na verificao automtica:",e)}},iniciarVerificacaoPeriodica(n,e=60){console.log(`Iniciando verificao peridica a cada ${e} minutos`),this.executarVerificacaoCompleta(n);const t=setInterval(()=>{this.executarVerificacaoCompleta(n)},e*60*1e3);return()=>{console.log("Cancelando verificao peridica"),clearInterval(t)}},async verificarDocumentosColaborador(n,e){try{const s=(await ht.obterConfiguracoes(n)).diasAntesVencimento||7,c=(await ba.list({colaboradorNome:void 0})).filter(v=>v.colaboradorId===e),d=new Date,p=new Date;p.setDate(p.getDate()+s);for(const v of c){const g=new Date(v.dataValidade);g<d&&v.status==="Vencido"?await ht.notificarDocumentoVencido(n,v.id,v.colaboradorNome,v.tipoDocumento,g):g>d&&g<=p&&await ht.notificarDocumentoVencendo(n,v.id,v.colaboradorNome,v.tipoDocumento,g)}}catch(t){console.error("Erro ao verificar documentos do colaborador:",t)}},async limparNotificacoesAntigas(n){try{const e=await ht.listarPorUsuario(n),t=new Date;t.setDate(t.getDate()-30);const s=e.filter(o=>o.lida&&new Date(o.criadoEm)<t);for(const o of s)await ht.deletar(o.id);console.log(`${s.length} notificaes antigas foram removidas`)}catch(e){console.error("Erro ao limpar notificaes antigas:",e)}},async gerarRelatorio(n){try{const e=await ht.obterEstatisticas(n),t=await ht.listarPorUsuario(n,void 0,10);return{totalNotificacoes:e.total,naoLidas:e.naoLidas,porTipo:e.porTipo,porPrioridade:e.porPrioridade,ultimasNotificacoes:t}}catch(e){throw console.error("Erro ao gerar relatrio:",e),e}}};function qO(){const{user:n}=Sa(),e=O.useRef(null);return O.useEffect(()=>{if(!n?.uid){e.current&&(e.current(),e.current=null);return}e.current=pb.iniciarVerificacaoPeriodica(n.uid,60);const t=setInterval(()=>{pb.limparNotificacoesAntigas(n.uid)},10080*60*1e3);return()=>{e.current&&(e.current(),e.current=null),clearInterval(t)}},[n?.uid]),null}const $r=({children:n})=>{const[e,t]=O.useState(!1),s=Gr(),o=()=>{t(!e)};return O.useEffect(()=>{window.scrollTo(0,0)},[s.pathname]),O.useEffect(()=>{const c=()=>{window.innerWidth<=768&&t(!0)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]),l.jsxs("div",{className:"layout",children:[l.jsx(qO,{}),l.jsx(UO,{collapsed:e,onToggle:o}),l.jsxs("div",{className:`layout-main ${e?"sidebar-collapsed":""}`,children:[l.jsx(zO,{onMenuClick:o,collapsed:e}),l.jsx("main",{className:"layout-content",children:l.jsx("div",{className:"content-wrapper",children:n})})]})]})},gb=()=>{const[n,e]=O.useState([{id:"1",type:"alert",title:"Integrao com sistema externo falhou",message:"A sincronizao com o sistema de folha de pagamento no foi concluda hoje s 08:30",time:"H 2 horas",category:"integracao",read:!1},{id:"2",type:"warning",title:"Documentos prximos do vencimento",message:"5 documentos vencem nos prximos 7 dias. Ao necessria.",time:"H 3 horas",category:"documentacao",read:!1},{id:"3",type:"success",title:"Novo prmio de produtividade disponvel",message:"Prmio do ms de outubro foi calculado e est disponvel para visualizao",time:"H 5 horas",category:"premio",read:!1},{id:"4",type:"info",title:"Boletim de medio adicionado",message:"Boletim de medio de outubro/2024 foi adicionado ao sistema",time:"Hoje s 09:15",category:"boletim",read:!1},{id:"5",type:"alert",title:"Falha na integrao de dados",message:"Erro ao sincronizar dados de colaboradores. Tentar novamente?",time:"Ontem s 16:45",category:"integracao",read:!0},{id:"6",type:"success",title:"Todos os documentos em dia",message:"Nenhum documento com pendncia no momento",time:"Hoje s 08:00",category:"documentacao",read:!0}]),t={colaboradores:248,documentosPendentes:12,boletinsMes:8,premiosAtivos:5,integracoesAtivas:6,integracoesComErro:2},s=g=>{e(_=>_.map(T=>T.id===g?{...T,read:!0}:T))},o=g=>{e(_=>_.filter(T=>T.id!==g))},c=g=>{switch(g){case"alert":return l.jsx(Vr,{className:"icon-alert"});case"warning":return l.jsx(Vr,{className:"icon-warning"});case"success":return l.jsx(dn,{className:"icon-success"});case"info":return l.jsx(ia,{className:"icon-info"});default:return l.jsx(ia,{className:"icon-info"})}},d=g=>{switch(g){case"integracao":return"Integrao";case"premio":return"Prmio";case"boletim":return"Boletim";case"documentacao":return"Documentao";default:return"Geral"}},p=n.filter(g=>!g.read).length,v=n.filter(g=>g.time.includes("Hoje"));return l.jsx($r,{children:l.jsxs("div",{className:"dashboard",children:[l.jsxs("div",{className:"dashboard-header",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"dashboard-title",children:"Dashboard"}),l.jsx("p",{className:"dashboard-subtitle",children:"Resumo dirio do sistema de gesto RH"})]}),l.jsx("div",{className:"dashboard-date",children:new Date().toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),l.jsxs("div",{className:"stats-grid",children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon stat-icon-blue",children:l.jsx(VO,{})}),l.jsxs("div",{className:"stat-content",children:[l.jsx("h3",{className:"stat-label",children:"Total de Colaboradores"}),l.jsx("p",{className:"stat-value",children:t.colaboradores})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon stat-icon-orange",children:l.jsx(Gt,{})}),l.jsxs("div",{className:"stat-content",children:[l.jsx("h3",{className:"stat-label",children:"Documentos Pendentes"}),l.jsx("p",{className:"stat-value stat-value-warning",children:t.documentosPendentes})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon stat-icon-green",children:l.jsx(db,{})}),l.jsxs("div",{className:"stat-content",children:[l.jsx("h3",{className:"stat-label",children:"Boletins do Ms"}),l.jsx("p",{className:"stat-value stat-value-success",children:t.boletinsMes})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon stat-icon-purple",children:l.jsx(Wh,{})}),l.jsxs("div",{className:"stat-content",children:[l.jsx("h3",{className:"stat-label",children:"Prmios Ativos"}),l.jsx("p",{className:"stat-value stat-value-purple",children:t.premiosAtivos})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon stat-icon-teal",children:l.jsx(fb,{})}),l.jsxs("div",{className:"stat-content",children:[l.jsx("h3",{className:"stat-label",children:"Integraes Ativas"}),l.jsx("p",{className:"stat-value stat-value-teal",children:t.integracoesAtivas})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon stat-icon-red",children:l.jsx(Vr,{})}),l.jsxs("div",{className:"stat-content",children:[l.jsx("h3",{className:"stat-label",children:"Integraes com Erro"}),l.jsx("p",{className:"stat-value stat-value-danger",children:t.integracoesComErro})]})]})]}),l.jsxs("div",{className:"dashboard-content",children:[l.jsxs("div",{className:"notifications-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{className:"section-title",children:"Notificaes e Alertas do Dia"}),l.jsxs("div",{className:"section-badge",children:[p," no lidas"]})]}),l.jsx("div",{className:"notifications-list",children:v.length>0?v.map(g=>l.jsxs("div",{className:`notification-card ${g.type} ${g.read?"":"unread"}`,children:[l.jsx("div",{className:"notification-icon",children:c(g.type)}),l.jsxs("div",{className:"notification-content",children:[l.jsxs("div",{className:"notification-header",children:[l.jsx("h3",{className:"notification-title",children:g.title}),l.jsxs("div",{className:"notification-actions",children:[!g.read&&l.jsx("button",{className:"notification-action",onClick:()=>s(g.id),title:"Marcar como lida",children:l.jsx(dn,{})}),l.jsx("button",{className:"notification-action",onClick:()=>o(g.id),title:"Remover",children:l.jsx(In,{})})]})]}),l.jsx("p",{className:"notification-message",children:g.message}),l.jsxs("div",{className:"notification-footer",children:[l.jsx("span",{className:"notification-category",children:d(g.category)}),l.jsx("span",{className:"notification-time",children:g.time})]})]})]},g.id)):l.jsxs("div",{className:"empty-state",children:[l.jsx(dn,{className:"empty-icon"}),l.jsx("p",{children:"Nenhuma notificao para hoje"})]})})]}),l.jsxs("div",{className:"alerts-section",children:[l.jsx("div",{className:"section-header",children:l.jsx("h2",{className:"section-title",children:"Alertas Recentes"})}),l.jsx("div",{className:"alerts-list",children:n.filter(g=>g.type==="alert"||g.type==="warning").slice(0,3).map(g=>l.jsxs("div",{className:`alert-card ${g.type} ${g.read?"":"unread"}`,children:[l.jsx("div",{className:"alert-icon",children:c(g.type)}),l.jsxs("div",{className:"alert-content",children:[l.jsx("h3",{className:"alert-title",children:g.title}),l.jsx("p",{className:"alert-message",children:g.message}),l.jsxs("div",{className:"alert-footer",children:[l.jsx("span",{className:"alert-category",children:d(g.category)}),l.jsx("span",{className:"alert-time",children:g.time})]})]})]},g.id))})]})]}),l.jsxs("div",{className:"quick-actions",children:[l.jsx("h2",{className:"section-title",children:"Aes Rpidas"}),l.jsxs("div",{className:"actions-grid",children:[l.jsxs("button",{className:"action-button",children:[l.jsx(Ew,{}),l.jsx("span",{children:"Ver Documentaes"})]}),l.jsxs("button",{className:"action-button",children:[l.jsx(Wh,{}),l.jsx("span",{children:"Ver Prmios"})]}),l.jsxs("button",{className:"action-button",children:[l.jsx(db,{}),l.jsx("span",{children:"Ver Boletins"})]}),l.jsxs("button",{className:"action-button",children:[l.jsx(fb,{}),l.jsx("span",{children:"Gerenciar Integraes"})]})]})]})]})})},sa=[{id:"colab-001",nome:"Maria Fernanda Alvarez",cpf:"123.456.789-00",cargo:"Analista de Produtividade",setor:"Operaes",email:"maria.alvarez@empresa.com",admissao:new Date("2020-03-15")}],tl=n=>n.replace(/\D/g,"").slice(0,11).replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2"),Tw=n=>n.replace(/\D/g,""),HO=n=>n.replace(/\D/g,"").slice(0,9).replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1})$/,"$1-$2"),GO=n=>n.replace(/\D/g,"").slice(0,11).replace(/(\d{7})(\d)/,"$1/$2").replace(/(\d{3})(\d{1})$/,"$1-$2"),$O=n=>n.replace(/\D/g,"").slice(0,11),QO=()=>{if(typeof window<"u"&&window.crypto?.randomUUID)return window.crypto.randomUUID();if(typeof globalThis<"u"&&"crypto"in globalThis){const n=globalThis.crypto;if(n?.randomUUID)return n.randomUUID()}return`premio-${Date.now()}-${Math.random().toString(36).slice(2,9)}`},vb=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],xw=["Pendente","Em reviso","Aprovado"],YO=()=>{const n=new Date,[e,t]=O.useState([]),[s,o]=O.useState([]),[c,d]=O.useState(sa[0]?.id??""),[p,v]=O.useState({mes:n.getMonth()+1,ano:n.getFullYear()}),[g,_]=O.useState({totalPremiado:0,pendente:0,emRevisao:0,aprovados:0}),[T,x]=O.useState(!1),[w,I]=O.useState(null),[U,L]=O.useState(!0),[q,X]=O.useState(!1),[F,oe]=O.useState(!1),[ce,ue]=O.useState(null),A=O.useCallback(async()=>{try{L(!0);const ne=await Ja.list(p);t(ne)}catch(ne){console.error("Erro ao carregar prmios:",ne),alert("No foi possvel carregar os prmios de produtividade.")}finally{L(!1)}},[p]);O.useEffect(()=>{A()},[A]),O.useEffect(()=>{p.ano&&p.mes&&S(p.ano,p.mes)},[p.ano,p.mes]),O.useEffect(()=>{c&&D(c)},[c]);const D=async ne=>{try{const J=await Ja.getHistoricoByColaborador(ne);o(J)}catch(J){console.error("Erro ao carregar histrico:",J)}},S=async(ne,J)=>{try{const P=await Ja.getStats(ne,J);_(P)}catch(P){console.error("Erro ao carregar estatsticas:",P)}},j=(ne,J)=>{v(P=>({...P,[ne]:J===""||J===null?void 0:J}))},M=async(ne,J)=>{try{await Ja.updateStatus(ne,J,"admin"),await A(),c&&await D(c),p.ano&&p.mes&&await S(p.ano,p.mes)}catch(P){console.error("Erro ao atualizar status:",P),alert("Falha ao atualizar status do prmio.")}},z=async ne=>{if(window.confirm("Deseja remover este prmio?"))try{await Ja.delete(ne),await A(),c&&await D(c),p.ano&&p.mes&&await S(p.ano,p.mes)}catch(J){console.error("Erro ao excluir prmio:",J),alert("No foi possvel remover o prmio.")}},C=async()=>{if(!(!p.ano||!p.mes))try{X(!0);const ne=await Ja.gerarRelatorioMensal(p.ano,p.mes);ue({...ne,totalPago:ne.totalPago}),alert("Relatrio mensal gerado com sucesso!")}catch(ne){console.error("Erro ao gerar relatrio:",ne),alert("No foi possvel gerar o relatrio.")}finally{X(!1)}},De=async()=>{if(!(!p.ano||!p.mes))try{oe(!0);const ne=await Ja.exportarRelatorioCSV(p.ano,p.mes),J=URL.createObjectURL(ne),P=document.createElement("a");P.href=J,P.download=`premios_produtividade_${p.ano}_${String(p.mes).padStart(2,"0")}.csv`,P.click(),URL.revokeObjectURL(J)}catch(ne){console.error("Erro ao exportar relatrio:",ne),alert("No foi possvel exportar a planilha.")}finally{oe(!1)}},it=O.useMemo(()=>{const ne=e.reduce((J,P)=>(J[P.colaboradorId]||(J[P.colaboradorId]={nome:P.colaboradorNome}),J),{});return[...sa.map(J=>({id:J.id,nome:J.nome})),...Object.entries(ne).map(([J,P])=>({id:J,nome:P.nome}))].filter((J,P,te)=>P===te.findIndex(G=>G.id===J.id))},[e]),Z=ne=>{switch(ne){case"Pendente":return"pendente";case"Em reviso":return"em-revisao";case"Aprovado":return"aprovado";default:return""}},le=ne=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(ne),ge=ne=>new Intl.DateTimeFormat("pt-BR").format(ne);return l.jsx($r,{children:l.jsxs("div",{className:"premios-container",children:[l.jsxs("div",{className:"premios-header",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"premios-title",children:"Prmio de Produtividade"}),l.jsx("p",{className:"premios-subtitle",children:"Cadastre, aprove e acompanhe o histrico de prmios por colaborador"})]}),l.jsxs("div",{className:"premios-header-actions",children:[l.jsxs("button",{className:"premios-secondary-btn",onClick:C,disabled:q,children:[l.jsx(CO,{}),q?"Gerando...":"Relatrio mensal"]}),l.jsxs("button",{className:"premios-secondary-btn",onClick:De,disabled:F,children:[l.jsx(ll,{}),F?"Exportando...":"Exportar planilha"]}),l.jsxs("button",{className:"premios-primary-btn",onClick:()=>{I(null),x(!0)},children:[l.jsx(ul,{}),"Novo prmio"]})]})]}),l.jsxs("div",{className:"premios-stats",children:[l.jsxs("div",{className:"premios-stat-card",children:[l.jsx("div",{className:"premios-stat-icon verde",children:l.jsx(dn,{})}),l.jsxs("div",{children:[l.jsx("p",{children:"Total aprovado"}),l.jsx("strong",{children:le(g.aprovados)})]})]}),l.jsxs("div",{className:"premios-stat-card",children:[l.jsx("div",{className:"premios-stat-icon amarelo",children:l.jsx(ia,{})}),l.jsxs("div",{children:[l.jsx("p",{children:"Pendentes"}),l.jsx("strong",{children:le(g.pendente)})]})]}),l.jsxs("div",{className:"premios-stat-card",children:[l.jsx("div",{className:"premios-stat-icon roxo",children:l.jsx(Vr,{})}),l.jsxs("div",{children:[l.jsx("p",{children:"Em reviso"}),l.jsx("strong",{children:le(g.emRevisao)})]})]}),l.jsxs("div",{className:"premios-stat-card",children:[l.jsx("div",{className:"premios-stat-icon azul",children:l.jsx(dn,{})}),l.jsxs("div",{children:[l.jsx("p",{children:"Total ms"}),l.jsx("strong",{children:le(g.totalPremiado)})]})]})]}),l.jsxs("div",{className:"premios-filtros",children:[l.jsxs("div",{className:"premios-filtros-header",children:[l.jsxs("button",{className:"premios-filter-btn",children:[l.jsx(Ji,{}),"Filtros"]}),l.jsxs("div",{className:"premios-search",children:[l.jsx(xu,{}),l.jsx("input",{type:"text",placeholder:"Buscar colaborador...",value:p.colaboradorNome||"",onChange:ne=>j("colaboradorNome",ne.target.value)})]})]}),l.jsxs("div",{className:"premios-filtros-grid",children:[l.jsxs("div",{className:"premios-filter-group",children:[l.jsx("label",{children:"Ms"}),l.jsx("select",{value:p.mes||"",onChange:ne=>j("mes",ne.target.value?Number(ne.target.value):void 0),children:vb.map((ne,J)=>l.jsx("option",{value:J+1,children:ne},ne))})]}),l.jsxs("div",{className:"premios-filter-group",children:[l.jsx("label",{children:"Ano"}),l.jsx("select",{value:p.ano||"",onChange:ne=>j("ano",ne.target.value?Number(ne.target.value):void 0),children:Array.from({length:5},(ne,J)=>n.getFullYear()-J).map(ne=>l.jsx("option",{value:ne,children:ne},ne))})]}),l.jsxs("div",{className:"premios-filter-group",children:[l.jsx("label",{children:"Status"}),l.jsxs("select",{value:p.status||"",onChange:ne=>j("status",ne.target.value?ne.target.value:void 0),children:[l.jsx("option",{value:"",children:"Todos"}),xw.map(ne=>l.jsx("option",{value:ne,children:ne},ne))]})]})]})]}),l.jsxs("div",{className:"premios-content",children:[l.jsx("div",{className:"premios-table-wrapper",children:U?l.jsx("div",{className:"premios-loading",children:"Carregando prmios..."}):e.length===0?l.jsx("div",{className:"premios-empty",children:l.jsx("p",{children:"Nenhum prmio encontrado."})}):l.jsxs("table",{className:"premios-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Colaborador"}),l.jsx("th",{children:"Setor"}),l.jsx("th",{children:"Valor"}),l.jsx("th",{children:"Data"}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Aes"})]})}),l.jsx("tbody",{children:e.map(ne=>l.jsxs("tr",{children:[l.jsx("td",{children:l.jsxs("div",{className:"premios-colaborador",children:[l.jsx("strong",{children:ne.colaboradorNome}),l.jsx("span",{children:ne.cargo})]})}),l.jsx("td",{children:ne.setor}),l.jsx("td",{children:le(ne.valor)}),l.jsx("td",{children:ge(ne.dataPremio)}),l.jsx("td",{children:l.jsx("span",{className:`premios-status-badge ${Z(ne.status)}`,children:ne.status})}),l.jsx("td",{children:l.jsxs("div",{className:"premios-actions",children:[l.jsx("button",{className:"premios-action-btn",title:"Editar",onClick:()=>{I(ne),x(!0)},children:l.jsx(cl,{})}),l.jsx("button",{className:"premios-action-btn danger",title:"Excluir",onClick:()=>z(ne.id),children:l.jsx(Gi,{})}),ne.status!=="Aprovado"&&l.jsx("button",{className:"premios-action-btn success",title:"Aprovar",onClick:()=>M(ne.id,"Aprovado"),children:l.jsx(dn,{})}),ne.status!=="Em reviso"&&l.jsx("button",{className:"premios-action-btn warning",title:"Enviar para reviso",onClick:()=>M(ne.id,"Em reviso"),children:l.jsx(Vr,{})})]})})]},ne.id))})]})}),l.jsxs("div",{className:"premios-historico",children:[l.jsx("h3",{children:"Histrico por colaborador"}),l.jsx("select",{value:c,onChange:ne=>d(ne.target.value),children:it.map(ne=>l.jsx("option",{value:ne.id,children:ne.nome},ne.id))}),l.jsx("div",{className:"premios-historico-list",children:s.length===0?l.jsx("p",{children:"Nenhum registro para este colaborador."}):s.map(ne=>l.jsxs("div",{className:"premios-historico-item",children:[l.jsxs("div",{children:[l.jsx("strong",{children:le(ne.valor)}),l.jsx("span",{children:ge(ne.dataPremio)})]}),l.jsx("span",{className:`premios-status-badge ${Z(ne.status)}`,children:ne.status})]},ne.id))}),ce&&l.jsxs("div",{className:"premios-report-summary",children:[l.jsx("h4",{children:"ltimo relatrio gerado"}),l.jsxs("p",{children:[vb[ce.mes-1]," / ",ce.ano," "," ",ce.totalRegistros," registros"]}),l.jsxs("strong",{children:["Total Pago: ",le(ce.totalPago)]})]})]})]}),T&&l.jsx(KO,{premio:w,onClose:()=>{x(!1),I(null)},onSuccess:async()=>{x(!1),I(null),await A(),c&&await D(c),p.ano&&p.mes&&await S(p.ano,p.mes)}})]})})},KO=({premio:n,onClose:e,onSuccess:t})=>{const s=n?null:sa.length>0?sa[0]:null,[o,c]=O.useState({colaboradorId:n?.colaboradorId||s?.id||"",colaboradorNome:n?.colaboradorNome||s?.nome||"",cpf:tl(n?.cpf||s?.cpf||""),cargo:n?.cargo||s?.cargo||"",setor:n?.setor||s?.setor||"",valor:n?.valor||0,valorDisplay:(n?.valor||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),dataPremio:n?.dataPremio?new Date(n.dataPremio).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],motivo:n?.motivo||"",status:n?.status||"Pendente",observacoes:n?.observacoes||""}),[d,p]=O.useState(n?.colaboradorId||s?.id||""),[v,g]=O.useState(!1),_=w=>{p(w);const I=sa.find(U=>U.id===w);I&&c(U=>({...U,colaboradorId:I.id,colaboradorNome:I.nome,cpf:tl(I.cpf),cargo:I.cargo,setor:I.setor}))},T=w=>{const{name:I,value:U}=w.target;if(I==="cpf")c(L=>({...L,cpf:tl(U)}));else if(I==="valor"){const L=U.replace(/\D/g,"");if(!L){c(X=>({...X,valor:0,valorDisplay:"0,00"}));return}const q=parseFloat(L)/100;c(X=>({...X,valor:q,valorDisplay:q.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}))}else c(L=>({...L,[I]:U}))},x=async w=>{w.preventDefault(),g(!0);try{const I={colaboradorId:o.colaboradorId||QO(),colaboradorNome:o.colaboradorNome,cpf:Tw(o.cpf),cargo:o.cargo,setor:o.setor,valor:o.valor,dataPremio:new Date(o.dataPremio),motivo:o.motivo,status:o.status,observacoes:o.observacoes};n?await Ja.update(n.id,I):await Ja.create(I),t()}catch(I){console.error("Erro ao salvar prmio:",I),alert("No foi possvel salvar o prmio.")}finally{g(!1)}};return l.jsx("div",{className:"premios-modal-overlay",onClick:e,children:l.jsxs("div",{className:"premios-modal",onClick:w=>w.stopPropagation(),children:[l.jsxs("div",{className:"premios-modal-header",children:[l.jsx("h2",{children:n?"Editar prmio":"Novo prmio de produtividade"}),l.jsx("button",{onClick:e,children:""})]}),l.jsxs("form",{className:"premios-modal-form",onSubmit:x,children:[l.jsxs("div",{className:"premios-modal-section",children:[l.jsxs("div",{className:"premios-modal-row",children:[l.jsxs("div",{className:"premios-modal-group",children:[l.jsx("label",{children:"Colaborador (mock)"}),l.jsxs("select",{value:d,onChange:w=>_(w.target.value),children:[l.jsx("option",{value:"",children:"Novo colaborador"}),sa.map(w=>l.jsxs("option",{value:w.id,children:[w.nome,"  ",w.cargo]},w.id))]})]}),l.jsxs("div",{className:"premios-modal-group",children:[l.jsx("label",{children:"Nome *"}),l.jsx("input",{type:"text",name:"colaboradorNome",value:o.colaboradorNome,onChange:T,required:!0})]})]}),l.jsxs("div",{className:"premios-modal-row",children:[l.jsxs("div",{className:"premios-modal-group",children:[l.jsx("label",{children:"CPF *"}),l.jsx("input",{type:"text",name:"cpf",value:o.cpf,onChange:T,required:!0,placeholder:"000.000.000-00"})]}),l.jsxs("div",{className:"premios-modal-group",children:[l.jsx("label",{children:"Cargo *"}),l.jsx("input",{type:"text",name:"cargo",value:o.cargo,onChange:T,required:!0})]}),l.jsxs("div",{className:"premios-modal-group",children:[l.jsx("label",{children:"Setor *"}),l.jsx("input",{type:"text",name:"setor",value:o.setor,onChange:T,required:!0})]})]})]}),l.jsxs("div",{className:"premios-modal-section",children:[l.jsxs("div",{className:"premios-modal-row",children:[l.jsxs("div",{className:"premios-modal-group",children:[l.jsx("label",{children:"Valor (R$) *"}),l.jsx("input",{type:"text",name:"valor",value:o.valorDisplay,onChange:T,required:!0,placeholder:"0,00"})]}),l.jsxs("div",{className:"premios-modal-group",children:[l.jsx("label",{children:"Data *"}),l.jsx("input",{type:"date",name:"dataPremio",value:o.dataPremio,onChange:T,required:!0})]}),l.jsxs("div",{className:"premios-modal-group",children:[l.jsx("label",{children:"Status *"}),l.jsx("select",{name:"status",value:o.status,onChange:T,children:xw.map(w=>l.jsx("option",{value:w,children:w},w))})]})]}),l.jsxs("div",{className:"premios-modal-group",children:[l.jsx("label",{children:"Motivo *"}),l.jsx("textarea",{name:"motivo",value:o.motivo,onChange:T,rows:3,required:!0,placeholder:"Descreva o motivo do prmio..."})]}),l.jsxs("div",{className:"premios-modal-group",children:[l.jsx("label",{children:"Observaes"}),l.jsx("textarea",{name:"observacoes",value:o.observacoes,onChange:T,rows:3,placeholder:"Observaes adicionais..."})]})]}),l.jsxs("div",{className:"premios-modal-actions",children:[l.jsx("button",{type:"button",className:"premios-secondary-btn",onClick:e,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"premios-primary-btn",disabled:v,children:v?"Salvando...":n?"Atualizar":"Cadastrar"})]})]})]})})},XO=()=>{const[n,e]=O.useState([]),[t,s]=O.useState(!0),[o,c]=O.useState(!1),[d,p]=O.useState(null),[v,g]=O.useState({}),[_,T]=O.useState(!1),[x,w]=O.useState({totalEmitidoMes:0,saldoPendente:0,totalBoletins:0,aguardandoAssinatura:0}),I=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],U=Array.from({length:5},(j,M)=>new Date().getFullYear()-M),L=["Instalao","Manuteno","Vistoria","Outro"],q=["Emitido","Pendente","Aguardando assinatura"];O.useEffect(()=>{X(),F()},[v]);const X=async()=>{try{s(!0);const j=await el.getAll(v);e(j)}catch(j){console.error("Erro ao carregar boletins:",j)}finally{s(!1)}},F=async()=>{try{const j=new Date,M=await el.getStats(j.getFullYear(),I[j.getMonth()]);w(M)}catch(j){console.error("Erro ao carregar estatsticas:",j)}},oe=(j,M)=>{g(z=>({...z,[j]:M||void 0}))},ce=()=>{g({})},ue=async j=>{if(window.confirm("Tem certeza que deseja excluir este boletim?"))try{await el.delete(j),X(),F()}catch(M){console.error("Erro ao excluir boletim:",M),alert("Erro ao excluir boletim")}},A=j=>{switch(j){case"Emitido":return l.jsx(dn,{className:"status-icon status-emitido"});case"Pendente":return l.jsx(ia,{className:"status-icon status-pendente"});case"Aguardando assinatura":return l.jsx(Vr,{className:"status-icon status-aguardando"})}},D=j=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(j),S=j=>new Intl.DateTimeFormat("pt-BR").format(j);return l.jsx($r,{children:l.jsxs("div",{className:"boletins-medicao",children:[l.jsxs("div",{className:"page-header",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"page-title",children:"Boletins de Medio"}),l.jsx("p",{className:"page-subtitle",children:"Controle e gesto de boletins de medio"})]}),l.jsxs("button",{className:"btn-primary",onClick:()=>{p(null),c(!0)},children:[l.jsx(ul,{}),"Novo Boletim"]})]}),l.jsxs("div",{className:"stats-cards",children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon stat-icon-green",children:l.jsx(Gt,{})}),l.jsxs("div",{className:"stat-content",children:[l.jsx("h3",{className:"stat-label",children:"Total Emitido no Ms"}),l.jsx("p",{className:"stat-value stat-value-success",children:D(x.totalEmitidoMes)})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon stat-icon-orange",children:l.jsx(ia,{})}),l.jsxs("div",{className:"stat-content",children:[l.jsx("h3",{className:"stat-label",children:"Saldo Pendente"}),l.jsx("p",{className:"stat-value stat-value-warning",children:D(x.saldoPendente)})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon stat-icon-blue",children:l.jsx(Gt,{})}),l.jsxs("div",{className:"stat-content",children:[l.jsx("h3",{className:"stat-label",children:"Total de Boletins"}),l.jsx("p",{className:"stat-value",children:x.totalBoletins})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon stat-icon-purple",children:l.jsx(Vr,{})}),l.jsxs("div",{className:"stat-content",children:[l.jsx("h3",{className:"stat-label",children:"Aguardando Assinatura"}),l.jsx("p",{className:"stat-value stat-value-purple",children:x.aguardandoAssinatura})]})]})]}),l.jsxs("div",{className:"filters-section",children:[l.jsxs("div",{className:"filters-header",children:[l.jsxs("button",{className:"btn-filter",onClick:()=>T(!_),children:[l.jsx(Ji,{}),"Filtros"]}),l.jsxs("div",{className:"search-box",children:[l.jsx(xu,{className:"search-icon"}),l.jsx("input",{type:"text",placeholder:"Pesquisar por cliente...",value:v.cliente||"",onChange:j=>oe("cliente",j.target.value)})]})]}),_&&l.jsxs("div",{className:"filters-panel",children:[l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{children:"Ms"}),l.jsxs("select",{value:v.mes||"",onChange:j=>oe("mes",j.target.value),children:[l.jsx("option",{value:"",children:"Todos os meses"}),I.map(j=>l.jsx("option",{value:j,children:j},j))]})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{children:"Ano"}),l.jsxs("select",{value:v.ano||"",onChange:j=>oe("ano",j.target.value?Number(j.target.value):void 0),children:[l.jsx("option",{value:"",children:"Todos os anos"}),U.map(j=>l.jsx("option",{value:j,children:j},j))]})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{children:"Tipo de Servio"}),l.jsxs("select",{value:v.tipoServico||"",onChange:j=>oe("tipoServico",j.target.value),children:[l.jsx("option",{value:"",children:"Todos os tipos"}),L.map(j=>l.jsx("option",{value:j,children:j},j))]})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{children:"Status"}),l.jsxs("select",{value:v.status||"",onChange:j=>oe("status",j.target.value),children:[l.jsx("option",{value:"",children:"Todos os status"}),q.map(j=>l.jsx("option",{value:j,children:j},j))]})]}),l.jsx("button",{className:"btn-clear-filters",onClick:ce,children:"Limpar Filtros"})]})]}),l.jsx("div",{className:"table-container",children:t?l.jsx("div",{className:"loading",children:"Carregando..."}):n.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx(Gt,{className:"empty-icon"}),l.jsx("p",{children:"Nenhum boletim encontrado"})]}):l.jsxs("table",{className:"boletins-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Nmero"}),l.jsx("th",{children:"Cliente"}),l.jsx("th",{children:"Ms/Ano"}),l.jsx("th",{children:"Tipo de Servio"}),l.jsx("th",{children:"Valor"}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Data Emisso"}),l.jsx("th",{children:"Aes"})]})}),l.jsx("tbody",{children:n.map(j=>l.jsxs("tr",{children:[l.jsx("td",{className:"font-mono",children:j.numero}),l.jsx("td",{children:j.cliente}),l.jsxs("td",{children:[j.mesReferencia,"/",j.anoReferencia]}),l.jsx("td",{children:j.tipoServico}),l.jsx("td",{className:"font-semibold",children:D(j.valor)}),l.jsx("td",{children:l.jsxs("div",{className:"status-badge",children:[A(j.status),l.jsx("span",{children:j.status})]})}),l.jsx("td",{children:j.dataEmissao?S(j.dataEmissao):"-"}),l.jsx("td",{children:l.jsxs("div",{className:"action-buttons",children:[l.jsx("button",{className:"btn-icon",onClick:()=>{p(j),c(!0)},title:"Editar",children:l.jsx(cl,{})}),l.jsx("button",{className:"btn-icon btn-icon-danger",onClick:()=>ue(j.id),title:"Excluir",children:l.jsx(Gi,{})})]})})]},j.id))})]})}),o&&l.jsx(JO,{boletim:d,onClose:()=>{c(!1),p(null)},onSave:()=>{c(!1),p(null),X(),F()}})]})})},JO=({boletim:n,onClose:e,onSave:t})=>{const[s,o]=O.useState({cliente:n?.cliente||"",mesReferencia:n?.mesReferencia||"",anoReferencia:n?.anoReferencia||new Date().getFullYear(),tipoServico:n?.tipoServico||"Instalao",status:n?.status||"Pendente",valor:n?.valor||0,valorDisplay:(n?.valor||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),dataEmissao:n?.dataEmissao?new Date(n.dataEmissao).toISOString().split("T")[0]:"",dataVencimento:n?.dataVencimento?new Date(n.dataVencimento).toISOString().split("T")[0]:"",observacoes:n?.observacoes||"",anexos:[]}),[c,d]=O.useState(!1),p=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],v=Array.from({length:5},(w,I)=>new Date().getFullYear()-I),g=["Instalao","Manuteno","Vistoria","Outro"],_=["Emitido","Pendente","Aguardando assinatura"],T=async w=>{w.preventDefault(),d(!0);try{const I={...s,dataEmissao:s.dataEmissao?new Date(s.dataEmissao):void 0,dataVencimento:s.dataVencimento?new Date(s.dataVencimento):void 0};n?await el.update(n.id,I):await el.create(I),t()}catch(I){console.error("Erro ao salvar boletim:",I),alert("Erro ao salvar boletim")}finally{d(!1)}},x=w=>{w.target.files&&o(I=>({...I,anexos:Array.from(w.target.files||[])}))};return l.jsx("div",{className:"modal-overlay",onClick:e,children:l.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:n?"Editar Boletim":"Novo Boletim de Medio"}),l.jsx("button",{className:"btn-close",onClick:e,children:l.jsx(In,{})})]}),l.jsxs("form",{onSubmit:T,className:"modal-form",children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Cliente *"}),l.jsx("input",{type:"text",required:!0,value:s.cliente,onChange:w=>o(I=>({...I,cliente:w.target.value})),placeholder:"Nome do cliente"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Ms de Referncia *"}),l.jsxs("select",{required:!0,value:s.mesReferencia,onChange:w=>o(I=>({...I,mesReferencia:w.target.value})),children:[l.jsx("option",{value:"",children:"Selecione..."}),p.map(w=>l.jsx("option",{value:w,children:w},w))]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Ano de Referncia *"}),l.jsx("select",{required:!0,value:s.anoReferencia,onChange:w=>o(I=>({...I,anoReferencia:Number(w.target.value)})),children:v.map(w=>l.jsx("option",{value:w,children:w},w))})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Tipo de Servio *"}),l.jsx("select",{required:!0,value:s.tipoServico,onChange:w=>o(I=>({...I,tipoServico:w.target.value})),children:g.map(w=>l.jsx("option",{value:w,children:w},w))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Status *"}),l.jsx("select",{required:!0,value:s.status,onChange:w=>o(I=>({...I,status:w.target.value})),children:_.map(w=>l.jsx("option",{value:w,children:w},w))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Valor (R$) *"}),l.jsx("input",{type:"text",required:!0,value:s.valorDisplay,onChange:w=>{const U=w.target.value.replace(/\D/g,"");if(!U){o(q=>({...q,valor:0,valorDisplay:"0,00"}));return}const L=parseFloat(U)/100;o(q=>({...q,valor:L,valorDisplay:L.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}))},placeholder:"0,00"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Data de Emisso"}),l.jsx("input",{type:"date",value:s.dataEmissao,onChange:w=>o(I=>({...I,dataEmissao:w.target.value}))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Data de Vencimento"}),l.jsx("input",{type:"date",value:s.dataVencimento,onChange:w=>o(I=>({...I,dataVencimento:w.target.value}))})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Observaes"}),l.jsx("textarea",{value:s.observacoes,onChange:w=>o(I=>({...I,observacoes:w.target.value})),rows:4,placeholder:"Observaes adicionais..."})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Anexar Arquivos"}),l.jsxs("div",{className:"file-upload",children:[l.jsx("input",{type:"file",multiple:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png",onChange:x,id:"file-upload"}),l.jsxs("label",{htmlFor:"file-upload",className:"file-upload-label",children:[l.jsx(Sf,{}),"Selecionar arquivos (PDF, NF, OS, etc.)"]}),s.anexos.length>0&&l.jsx("div",{className:"file-list",children:s.anexos.map((w,I)=>l.jsxs("div",{className:"file-item",children:[l.jsx(Gt,{}),l.jsx("span",{children:w.name}),l.jsx("button",{type:"button",onClick:()=>{o(U=>({...U,anexos:U.anexos.filter((L,q)=>q!==I)}))},children:l.jsx(In,{})})]},I))})]})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{type:"button",className:"btn-secondary",onClick:e,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn-primary",disabled:c,children:c?"Salvando...":n?"Atualizar":"Criar"})]})]})]})})},Bv=["ASO","NR-11","NR-18","NR-33","NR-35","CNH","CPF","RG","CTPS","Reservista","Certificado de Treinamento","Outro"],WO=["Vlido","Vencido","Vencendo","Pendente"],ZO=()=>{const{user:n}=Sa(),[e,t]=O.useState([]),[s,o]=O.useState([]),[c,d]=O.useState({total:0,validos:0,vencidos:0,vencendoEm7Dias:0,vencendoEm30Dias:0,pendentes:0}),[p,v]=O.useState({}),[g,_]=O.useState(!1),[T,x]=O.useState(!1),[w,I]=O.useState(null),[U,L]=O.useState(null),[q,X]=O.useState(!1),[F,oe]=O.useState(!1),[ce,ue]=O.useState("documentos"),A=O.useCallback(async()=>{X(!0);try{const G=await ba.list(p);t(G)}catch(G){console.error("Erro ao carregar documentos:",G),alert("No foi possvel carregar os documentos.")}finally{X(!1)}},[p]),D=O.useCallback(async()=>{try{const G=await ba.listTreinamentos();o(G)}catch(G){console.error("Erro ao carregar treinamentos:",G)}},[]),S=O.useCallback(async()=>{try{const G=await ba.getStats();d(G)}catch(G){console.error("Erro ao carregar estatsticas:",G)}},[]);O.useEffect(()=>{A(),S()},[A,S]),O.useEffect(()=>{ce==="treinamentos"&&D()},[ce,D]);const j=(G,he)=>{v(xe=>({...xe,[G]:he}))},M=G=>{I(G||null),_(!0)},z=()=>{_(!1),I(null)},C=G=>{L(G||null),x(!0)},De=()=>{x(!1),L(null)},it=async G=>{try{w?await ba.update(w.id,G):await ba.create(G,n?.uid||""),z(),A(),S()}catch(he){console.error("Erro ao salvar documento:",he),alert("No foi possvel salvar o documento.")}},Z=async G=>{if(confirm("Tem certeza que deseja excluir este documento?"))try{await ba.delete(G),A(),S()}catch(he){console.error("Erro ao excluir documento:",he),alert("No foi possvel excluir o documento.")}},le=async G=>{try{U?await ba.updateTreinamento(U.id,G):await ba.createTreinamento(G),De(),D()}catch(he){console.error("Erro ao salvar treinamento:",he),alert("No foi possvel salvar o treinamento.")}},ge=async G=>{if(confirm("Tem certeza que deseja excluir este treinamento?"))try{await ba.deleteTreinamento(G),D()}catch(he){console.error("Erro ao excluir treinamento:",he),alert("No foi possvel excluir o treinamento.")}},ne=G=>new Intl.DateTimeFormat("pt-BR").format(G),J=G=>{switch(G){case"Vlido":return"status-valid";case"Vencido":return"status-expired";case"Vencendo":return"status-expiring";case"Pendente":return"status-pending";default:return""}},P=G=>{switch(G){case"Vlido":return l.jsx(dn,{className:"status-icon valid"});case"Vencido":return l.jsx(Vr,{className:"status-icon expired"});case"Vencendo":return l.jsx(ia,{className:"status-icon expiring"});case"Pendente":return l.jsx(ia,{className:"status-icon pending"});default:return null}},te=O.useMemo(()=>e,[e]);return l.jsx($r,{children:l.jsxs("div",{className:"documentacoes-container",children:[l.jsxs("div",{className:"documentacoes-header",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"documentacoes-title",children:"Documentaes e Integraes"}),l.jsx("p",{className:"documentacoes-subtitle",children:"Gesto de documentos obrigatrios e controle de validades"})]}),l.jsxs("div",{className:"documentacoes-header-actions",children:[ce==="documentos"&&l.jsxs("button",{className:"documentacoes-btn-primary",onClick:()=>M(),children:[l.jsx(ul,{}),"Novo Documento"]}),ce==="treinamentos"&&l.jsxs("button",{className:"documentacoes-btn-primary",onClick:()=>C(),children:[l.jsx(ul,{}),"Novo Treinamento"]})]})]}),l.jsxs("div",{className:"documentacoes-tabs",children:[l.jsxs("button",{className:`documentacoes-tab ${ce==="documentos"?"active":""}`,onClick:()=>ue("documentos"),children:[l.jsx(Gt,{}),"Documentos"]}),l.jsxs("button",{className:`documentacoes-tab ${ce==="treinamentos"?"active":""}`,onClick:()=>ue("treinamentos"),children:[l.jsx(Ng,{}),"Treinamentos"]})]}),ce==="documentos"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"documentacoes-stats",children:[l.jsxs("div",{className:"documentacoes-stat-card",children:[l.jsx("div",{className:"documentacoes-stat-icon total",children:l.jsx(Gt,{})}),l.jsxs("div",{className:"documentacoes-stat-content",children:[l.jsx("h3",{children:"Total"}),l.jsx("p",{className:"documentacoes-stat-value",children:c.total})]})]}),l.jsxs("div",{className:"documentacoes-stat-card",children:[l.jsx("div",{className:"documentacoes-stat-icon valid",children:l.jsx(dn,{})}),l.jsxs("div",{className:"documentacoes-stat-content",children:[l.jsx("h3",{children:"Vlidos"}),l.jsx("p",{className:"documentacoes-stat-value",children:c.validos})]})]}),l.jsxs("div",{className:"documentacoes-stat-card",children:[l.jsx("div",{className:"documentacoes-stat-icon expired",children:l.jsx(Vr,{})}),l.jsxs("div",{className:"documentacoes-stat-content",children:[l.jsx("h3",{children:"Vencidos"}),l.jsx("p",{className:"documentacoes-stat-value",children:c.vencidos})]})]}),l.jsxs("div",{className:"documentacoes-stat-card",children:[l.jsx("div",{className:"documentacoes-stat-icon expiring",children:l.jsx(ia,{})}),l.jsxs("div",{className:"documentacoes-stat-content",children:[l.jsx("h3",{children:"Vencendo (7 dias)"}),l.jsx("p",{className:"documentacoes-stat-value",children:c.vencendoEm7Dias})]})]}),l.jsxs("div",{className:"documentacoes-stat-card",children:[l.jsx("div",{className:"documentacoes-stat-icon warning",children:l.jsx(Pi,{})}),l.jsxs("div",{className:"documentacoes-stat-content",children:[l.jsx("h3",{children:"Vencendo (30 dias)"}),l.jsx("p",{className:"documentacoes-stat-value",children:c.vencendoEm30Dias})]})]})]}),l.jsxs("div",{className:"documentacoes-filters",children:[l.jsxs("div",{className:"documentacoes-search",children:[l.jsx(xu,{className:"documentacoes-search-icon"}),l.jsx("input",{type:"text",placeholder:"Buscar por colaborador...",value:p.colaboradorNome||"",onChange:G=>j("colaboradorNome",G.target.value)})]}),l.jsxs("button",{className:"documentacoes-filter-toggle",onClick:()=>oe(!F),children:[l.jsx(Ji,{}),"Filtros"]})]}),F&&l.jsxs("div",{className:"documentacoes-filters-panel",children:[l.jsxs("div",{className:"documentacoes-filter-group",children:[l.jsx("label",{children:"Tipo de Documento"}),l.jsxs("select",{value:p.tipoDocumento||"",onChange:G=>j("tipoDocumento",G.target.value||void 0),children:[l.jsx("option",{value:"",children:"Todos"}),Bv.map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsxs("div",{className:"documentacoes-filter-group",children:[l.jsx("label",{children:"Status"}),l.jsxs("select",{value:p.status||"",onChange:G=>j("status",G.target.value||void 0),children:[l.jsx("option",{value:"",children:"Todos"}),WO.map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsx("div",{className:"documentacoes-filter-group",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",checked:p.vencidos||!1,onChange:G=>j("vencidos",G.target.checked)}),"Apenas Vencidos"]})}),l.jsx("div",{className:"documentacoes-filter-group",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",checked:p.vencendoEm7Dias||!1,onChange:G=>j("vencendoEm7Dias",G.target.checked)}),"Vencendo em 7 dias"]})}),l.jsx("div",{className:"documentacoes-filter-group",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",checked:p.vencendoEm30Dias||!1,onChange:G=>j("vencendoEm30Dias",G.target.checked)}),"Vencendo em 30 dias"]})})]}),l.jsx("div",{className:"documentacoes-table-container",children:l.jsxs("table",{className:"documentacoes-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Colaborador"}),l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Nmero"}),l.jsx("th",{children:"Validade"}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Anexos"}),l.jsx("th",{children:"Aes"})]})}),l.jsx("tbody",{children:q?l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"documentacoes-loading",children:"Carregando..."})}):te.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"documentacoes-empty",children:"Nenhum documento encontrado"})}):te.map(G=>l.jsxs("tr",{children:[l.jsx("td",{children:l.jsxs("div",{className:"documentacoes-colaborador",children:[l.jsx(zs,{className:"documentacoes-user-icon"}),l.jsxs("div",{children:[l.jsx("p",{className:"documentacoes-colaborador-name",children:G.colaboradorNome}),l.jsxs("p",{className:"documentacoes-colaborador-info",children:[G.cargo," - ",G.setor]})]})]})}),l.jsx("td",{children:G.tipoDocumento}),l.jsx("td",{children:G.numeroDocumento||"-"}),l.jsx("td",{children:ne(G.dataValidade)}),l.jsx("td",{children:l.jsxs("span",{className:`documentacoes-status-badge ${J(G.status)}`,children:[P(G.status),G.status]})}),l.jsx("td",{children:G.anexos.length>0?l.jsxs("span",{className:"documentacoes-anexos-count",children:[l.jsx(Sf,{}),G.anexos.length]}):"-"}),l.jsx("td",{children:l.jsxs("div",{className:"documentacoes-actions",children:[l.jsx("button",{className:"documentacoes-action-btn edit",onClick:()=>M(G),title:"Editar",children:l.jsx(cl,{})}),l.jsx("button",{className:"documentacoes-action-btn delete",onClick:()=>Z(G.id),title:"Excluir",children:l.jsx(Gi,{})})]})})]},G.id))})]})})]}),ce==="treinamentos"&&l.jsx("div",{className:"documentacoes-treinamentos-grid",children:s.length===0?l.jsxs("div",{className:"documentacoes-empty-state",children:[l.jsx(Ng,{className:"documentacoes-empty-icon"}),l.jsx("p",{children:"Nenhum treinamento cadastrado"})]}):s.map(G=>l.jsxs("div",{className:"documentacoes-treinamento-card",children:[l.jsxs("div",{className:"documentacoes-treinamento-header",children:[l.jsx("h3",{children:G.titulo}),l.jsx("span",{className:`documentacoes-treinamento-status ${G.status.toLowerCase()}`,children:G.status})]}),l.jsx("p",{className:"documentacoes-treinamento-desc",children:G.descricao}),l.jsxs("div",{className:"documentacoes-treinamento-info",children:[l.jsxs("div",{children:[l.jsx("strong",{children:"Tipo:"})," ",G.tipoDocumento]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Incio:"})," ",ne(G.dataInicio)]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Fim:"})," ",ne(G.dataFim)]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Participantes:"})," ",G.colaboradores.length]})]}),l.jsxs("div",{className:"documentacoes-treinamento-actions",children:[l.jsxs("button",{className:"documentacoes-action-btn edit",onClick:()=>C(G),children:[l.jsx(cl,{}),"Editar"]}),l.jsxs("button",{className:"documentacoes-action-btn delete",onClick:()=>ge(G.id),children:[l.jsx(Gi,{}),"Excluir"]})]})]},G.id))}),g&&l.jsx(eP,{documento:w,onClose:z,onSave:it}),T&&l.jsx(tP,{treinamento:U,onClose:De,onSave:le})]})})},eP=({documento:n,onClose:e,onSave:t})=>{const[s,o]=O.useState({colaboradorId:n?.colaboradorId||"",colaboradorNome:n?.colaboradorNome||"",cpf:tl(n?.cpf||""),cargo:n?.cargo||"",setor:n?.setor||"",tipoDocumento:n?.tipoDocumento||"ASO",numeroDocumento:n?.numeroDocumento||"",orgaoEmissor:n?.orgaoEmissor||"",dataEmissao:n?.dataEmissao,dataValidade:n?.dataValidade||new Date,observacoes:n?.observacoes||"",anexos:[]}),c=_=>{const{name:T,value:x}=_.target;if(T==="numeroDocumento"){let w=x;switch(s.tipoDocumento){case"CPF":w=tl(x);break;case"RG":w=HO(x);break;case"CTPS":w=GO(x);break;case"CNH":w=$O(x);break;default:w=x}o(I=>({...I,[T]:w}))}else o(w=>({...w,[T]:x}))},d=(_,T)=>{o(x=>({...x,[_]:T?new Date(T):void 0}))},p=_=>{const T=sa.find(x=>x.id===_);T&&o(x=>({...x,colaboradorId:T.id,colaboradorNome:T.nome,cpf:tl(T.cpf),cargo:T.cargo,setor:T.setor}))},v=_=>{_.target.files&&o(T=>({...T,anexos:Array.from(_.target.files||[])}))},g=_=>{_.preventDefault();const T={...s,cpf:Tw(s.cpf),numeroDocumento:s.numeroDocumento?s.numeroDocumento.replace(/\D/g,""):""};t(T)};return l.jsx("div",{className:"documentacoes-modal-overlay",onClick:e,children:l.jsxs("div",{className:"documentacoes-modal-content",onClick:_=>_.stopPropagation(),children:[l.jsxs("div",{className:"documentacoes-modal-header",children:[l.jsx("h2",{children:n?"Editar Documento":"Novo Documento"}),l.jsx("button",{className:"documentacoes-modal-close",onClick:e,children:l.jsx(In,{})})]}),l.jsxs("form",{onSubmit:g,className:"documentacoes-modal-form",children:[l.jsxs("div",{className:"documentacoes-form-group",children:[l.jsx("label",{children:"Colaborador *"}),l.jsxs("select",{value:s.colaboradorId,onChange:_=>p(_.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Selecione..."}),sa.map(_=>l.jsx("option",{value:_.id,children:_.nome},_.id))]})]}),l.jsxs("div",{className:"documentacoes-form-row",children:[l.jsxs("div",{className:"documentacoes-form-group",children:[l.jsx("label",{children:"Tipo de Documento *"}),l.jsx("select",{name:"tipoDocumento",value:s.tipoDocumento,onChange:c,required:!0,children:Bv.map(_=>l.jsx("option",{value:_,children:_},_))})]}),l.jsxs("div",{className:"documentacoes-form-group",children:[l.jsx("label",{children:"Nmero do Documento"}),l.jsx("input",{type:"text",name:"numeroDocumento",value:s.numeroDocumento,onChange:c})]})]}),l.jsxs("div",{className:"documentacoes-form-row",children:[l.jsxs("div",{className:"documentacoes-form-group",children:[l.jsx("label",{children:"rgo Emissor"}),l.jsx("input",{type:"text",name:"orgaoEmissor",value:s.orgaoEmissor,onChange:c})]}),l.jsxs("div",{className:"documentacoes-form-group",children:[l.jsx("label",{children:"Data de Emisso"}),l.jsx("input",{type:"date",value:s.dataEmissao?s.dataEmissao.toISOString().split("T")[0]:"",onChange:_=>d("dataEmissao",_.target.value)})]})]}),l.jsxs("div",{className:"documentacoes-form-group",children:[l.jsx("label",{children:"Data de Validade *"}),l.jsx("input",{type:"date",value:s.dataValidade.toISOString().split("T")[0],onChange:_=>d("dataValidade",_.target.value),required:!0})]}),l.jsxs("div",{className:"documentacoes-form-group",children:[l.jsx("label",{children:"Observaes"}),l.jsx("textarea",{name:"observacoes",value:s.observacoes,onChange:c,rows:3})]}),l.jsxs("div",{className:"documentacoes-form-group",children:[l.jsx("label",{children:"Anexar Arquivos"}),l.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png",onChange:v}),s.anexos&&s.anexos.length>0&&l.jsxs("p",{className:"documentacoes-files-count",children:[s.anexos.length," arquivo(s) selecionado(s)"]})]}),l.jsxs("div",{className:"documentacoes-modal-actions",children:[l.jsx("button",{type:"button",className:"documentacoes-btn-secondary",onClick:e,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"documentacoes-btn-primary",children:"Salvar"})]})]})]})})},tP=({treinamento:n,onClose:e,onSave:t})=>{const[s,o]=O.useState({titulo:n?.titulo||"",descricao:n?.descricao||"",dataInicio:n?.dataInicio||new Date,dataFim:n?.dataFim||new Date,colaboradores:n?.colaboradores||[],tipoDocumento:n?.tipoDocumento||"ASO"}),c=g=>{const{name:_,value:T}=g.target;o(x=>({...x,[_]:T}))},d=(g,_)=>{o(T=>({...T,[g]:new Date(_)}))},p=g=>{const _=Array.from(g.target.selectedOptions,T=>T.value);o(T=>({...T,colaboradores:_}))},v=g=>{g.preventDefault(),t(s)};return l.jsx("div",{className:"documentacoes-modal-overlay",onClick:e,children:l.jsxs("div",{className:"documentacoes-modal-content",onClick:g=>g.stopPropagation(),children:[l.jsxs("div",{className:"documentacoes-modal-header",children:[l.jsx("h2",{children:n?"Editar Treinamento":"Novo Treinamento"}),l.jsx("button",{className:"documentacoes-modal-close",onClick:e,children:l.jsx(In,{})})]}),l.jsxs("form",{onSubmit:v,className:"documentacoes-modal-form",children:[l.jsxs("div",{className:"documentacoes-form-group",children:[l.jsx("label",{children:"Ttulo *"}),l.jsx("input",{type:"text",name:"titulo",value:s.titulo,onChange:c,required:!0})]}),l.jsxs("div",{className:"documentacoes-form-group",children:[l.jsx("label",{children:"Descrio"}),l.jsx("textarea",{name:"descricao",value:s.descricao,onChange:c,rows:3})]}),l.jsxs("div",{className:"documentacoes-form-row",children:[l.jsxs("div",{className:"documentacoes-form-group",children:[l.jsx("label",{children:"Data de Incio *"}),l.jsx("input",{type:"date",value:s.dataInicio.toISOString().split("T")[0],onChange:g=>d("dataInicio",g.target.value),required:!0})]}),l.jsxs("div",{className:"documentacoes-form-group",children:[l.jsx("label",{children:"Data de Fim *"}),l.jsx("input",{type:"date",value:s.dataFim.toISOString().split("T")[0],onChange:g=>d("dataFim",g.target.value),required:!0})]})]}),l.jsxs("div",{className:"documentacoes-form-group",children:[l.jsx("label",{children:"Tipo de Documento *"}),l.jsx("select",{name:"tipoDocumento",value:s.tipoDocumento,onChange:c,required:!0,children:Bv.map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{className:"documentacoes-form-group",children:[l.jsx("label",{children:"Colaboradores *"}),l.jsx("select",{multiple:!0,value:s.colaboradores,onChange:p,required:!0,size:5,children:sa.map(g=>l.jsx("option",{value:g.id,children:g.nome},g.id))}),l.jsx("p",{className:"documentacoes-form-hint",children:"Mantenha Ctrl (Cmd no Mac) pressionado para selecionar mltiplos"})]}),l.jsxs("div",{className:"documentacoes-modal-actions",children:[l.jsx("button",{type:"button",className:"documentacoes-btn-secondary",onClick:e,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"documentacoes-btn-primary",children:"Salvar"})]})]})]})})},Uc=Rt(Pe,"lancamentosDiarios"),yb=n=>{const e=n.data();return{id:n.id,tipoMovimentacao:e.tipoMovimentacao,descricao:e.descricao,valor:e.valor,dataLancamento:e.dataLancamento?e.dataLancamento.toDate():new Date,status:e.status,colaboradorId:e.colaboradorId,colaboradorNome:e.colaboradorNome,observacoes:e.observacoes,anexos:e.anexos||[],criadoPor:e.criadoPor,criadoEm:e.criadoEm?e.criadoEm.toDate():new Date,atualizadoEm:e.atualizadoEm?e.atualizadoEm.toDate():new Date}},_b=n=>{const e=[];if(n?.dataInicio&&e.push(Te("dataLancamento",">=",me.fromDate(n.dataInicio))),n?.dataFim){const t=new Date(n.dataFim);t.setHours(23,59,59,999),e.push(Te("dataLancamento","<=",me.fromDate(t)))}return n?.colaboradorId&&e.push(Te("colaboradorId","==",n.colaboradorId)),n?.colaboradorNome&&e.push(Te("colaboradorNomeSearch","array-contains",n.colaboradorNome.toLowerCase())),n?.tipoMovimentacao&&e.push(Te("tipoMovimentacao","==",n.tipoMovimentacao)),n?.status&&e.push(Te("status","==",n.status)),e.push(jn("dataLancamento","desc")),tt(Uc,...e)},$c={async list(n){const e=_b(n);return(await Ct(e)).docs.map(yb)},async create(n,e,t){const s={...n,valor:Number(n.valor),dataLancamento:me.fromDate(n.dataLancamento),colaboradorNomeSearch:n.colaboradorNome.toLowerCase().split(" ").filter(Boolean),criadoPor:e,criadoPorNome:t,anexos:[],criadoEm:me.now(),atualizadoEm:me.now()};return(await Ur(Uc,s)).id},async update(n,e){const t=Xe(Uc,n),s={...e,atualizadoEm:me.now()};e.dataLancamento&&(s.dataLancamento=me.fromDate(e.dataLancamento)),e.colaboradorNome&&(s.colaboradorNomeSearch=e.colaboradorNome.toLowerCase().split(" ").filter(Boolean)),e.valor!==void 0&&(s.valor=Number(e.valor)),await Dn(t,s)},async updateStatus(n,e){const t=Xe(Uc,n);await Dn(t,{status:e,atualizadoEm:me.now()})},async delete(n){const e=Xe(Uc,n);await Ys(e)},async getStats(n,e){const t={};n&&(t.dataInicio=n),e&&(t.dataFim=e);const s=_b(t),c=(await Ct(s)).docs.map(yb),d=c.filter(g=>g.status==="Recebido").reduce((g,_)=>g+_.valor,0),p=c.filter(g=>g.status==="Pendente").reduce((g,_)=>g+_.valor,0),v={Servio:0,Pagamento:0,Recebimento:0,Outro:0};return c.forEach(g=>{v[g.tipoMovimentacao]+=g.valor}),{totalRecebido:d,totalPendente:p,totalLancamentos:c.length,totalPorTipo:v}}},ww=["Servio","Pagamento","Recebimento","Outro"],Sw=["Recebido","Pendente"],nP=()=>{const{user:n}=Sa(),e=new Date,[t,s]=O.useState([]),[o,c]=O.useState({dataInicio:new Date(e.getFullYear(),e.getMonth(),1),dataFim:e}),[d,p]=O.useState(!1),[v,g]=O.useState(null),[_,T]=O.useState(!0),[x,w]=O.useState(!1),I=O.useCallback(async()=>{try{T(!0);const A=await $c.list(o);s(A)}catch(A){console.error("Erro ao carregar lanamentos:",A),alert("No foi possvel carregar os lanamentos.")}finally{T(!1)}},[o]);O.useEffect(()=>{I()},[I]);const U=(A,D)=>{c(S=>({...S,[A]:D===""||D===null?void 0:D}))},L=async A=>{if(window.confirm("Deseja remover este lanamento?"))try{await $c.delete(A),await I()}catch(D){console.error("Erro ao excluir lanamento:",D),alert("No foi possvel remover o lanamento.")}},q=async(A,D)=>{try{await $c.updateStatus(A,D),await I()}catch(S){console.error("Erro ao atualizar status:",S),alert("Falha ao atualizar status.")}},X=A=>A==="Recebido"?"recebido":"pendente",F=A=>({Servio:"tipo-servico",Pagamento:"tipo-pagamento",Recebimento:"tipo-recebimento",Outro:"tipo-outro"})[A],oe=A=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(A),ce=A=>new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(A),ue=A=>new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(A);return l.jsx($r,{children:l.jsxs("div",{className:"lancamentos-container",children:[l.jsxs("div",{className:"lancamentos-header",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"lancamentos-title",children:"Caderno Virtual"}),l.jsx("p",{className:"lancamentos-subtitle",children:"Registro de lanamentos dirios e movimentaes"})]}),l.jsxs("button",{className:"lancamentos-primary-btn",onClick:()=>{g(null),p(!0)},children:[l.jsx(ul,{}),"Novo Lanamento"]})]}),l.jsxs("div",{className:"lancamentos-filtros",children:[l.jsxs("div",{className:"lancamentos-filtros-header",children:[l.jsxs("button",{className:"lancamentos-filter-btn",onClick:()=>w(!x),children:[l.jsx(Ji,{}),"Filtros"]}),l.jsxs("div",{className:"lancamentos-search",children:[l.jsx(xu,{}),l.jsx("input",{type:"text",placeholder:"Buscar por colaborador...",value:o.colaboradorNome||"",onChange:A=>U("colaboradorNome",A.target.value)})]})]}),x&&l.jsxs("div",{className:"lancamentos-filtros-panel",children:[l.jsxs("div",{className:"lancamentos-filter-group",children:[l.jsx("label",{children:"Data Incio"}),l.jsx("input",{type:"date",value:o.dataInicio?o.dataInicio.toISOString().split("T")[0]:"",onChange:A=>U("dataInicio",A.target.value?new Date(A.target.value):void 0)})]}),l.jsxs("div",{className:"lancamentos-filter-group",children:[l.jsx("label",{children:"Data Fim"}),l.jsx("input",{type:"date",value:o.dataFim?o.dataFim.toISOString().split("T")[0]:"",onChange:A=>U("dataFim",A.target.value?new Date(A.target.value):void 0)})]}),l.jsxs("div",{className:"lancamentos-filter-group",children:[l.jsx("label",{children:"Tipo de Movimentao"}),l.jsxs("select",{value:o.tipoMovimentacao||"",onChange:A=>U("tipoMovimentacao",A.target.value?A.target.value:void 0),children:[l.jsx("option",{value:"",children:"Todos"}),ww.map(A=>l.jsx("option",{value:A,children:A},A))]})]}),l.jsxs("div",{className:"lancamentos-filter-group",children:[l.jsx("label",{children:"Status"}),l.jsxs("select",{value:o.status||"",onChange:A=>U("status",A.target.value?A.target.value:void 0),children:[l.jsx("option",{value:"",children:"Todos"}),Sw.map(A=>l.jsx("option",{value:A,children:A},A))]})]})]})]}),l.jsx("div",{className:"lancamentos-table-container",children:_?l.jsx("div",{className:"lancamentos-loading",children:"Carregando lanamentos..."}):t.length===0?l.jsxs("div",{className:"lancamentos-empty",children:[l.jsx(Gt,{className:"lancamentos-empty-icon"}),l.jsx("p",{children:"Nenhum lanamento encontrado."})]}):l.jsxs("table",{className:"lancamentos-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Data/Hora"}),l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Descrio"}),l.jsx("th",{children:"Colaborador"}),l.jsx("th",{children:"Valor"}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Anexos"}),l.jsx("th",{children:"Aes"})]})}),l.jsx("tbody",{children:t.map(A=>l.jsxs("tr",{children:[l.jsx("td",{children:l.jsxs("div",{className:"lancamentos-datetime",children:[l.jsx("strong",{children:ce(A.dataLancamento)}),l.jsx("span",{children:ue(A.dataLancamento)})]})}),l.jsx("td",{children:l.jsx("span",{className:`lancamentos-tipo-badge ${F(A.tipoMovimentacao)}`,children:A.tipoMovimentacao})}),l.jsx("td",{children:l.jsx("div",{className:"lancamentos-descricao",children:A.descricao})}),l.jsx("td",{children:A.colaboradorNome}),l.jsx("td",{className:"lancamentos-valor",children:oe(A.valor)}),l.jsx("td",{children:l.jsx("span",{className:`lancamentos-status-badge ${X(A.status)}`,children:A.status})}),l.jsx("td",{children:A.anexos.length>0?l.jsxs("div",{className:"lancamentos-anexos-count",children:[l.jsx(Sf,{}),l.jsx("span",{children:A.anexos.length})]}):l.jsx("span",{className:"lancamentos-sem-anexo",children:"-"})}),l.jsx("td",{children:l.jsxs("div",{className:"lancamentos-actions",children:[l.jsx("button",{className:"lancamentos-action-btn",title:"Editar",onClick:()=>{g(A),p(!0)},children:l.jsx(cl,{})}),l.jsx("button",{className:"lancamentos-action-btn danger",title:"Excluir",onClick:()=>L(A.id),children:l.jsx(Gi,{})}),A.status==="Pendente"&&l.jsx("button",{className:"lancamentos-action-btn success",title:"Marcar como recebido",onClick:()=>q(A.id,"Recebido"),children:l.jsx(dn,{})}),A.status==="Recebido"&&l.jsx("button",{className:"lancamentos-action-btn warning",title:"Marcar como pendente",onClick:()=>q(A.id,"Pendente"),children:l.jsx(ia,{})})]})})]},A.id))})]})}),d&&l.jsx(aP,{lancamento:v,onClose:()=>{p(!1),g(null)},onSuccess:async()=>{p(!1),g(null),await I()},userId:n?.uid||"",userName:n?.name||""})]})})},aP=({lancamento:n,onClose:e,onSuccess:t,userId:s,userName:o})=>{const[c,d]=O.useState({tipoMovimentacao:n?.tipoMovimentacao||"Servio",descricao:n?.descricao||"",valor:n?.valor||0,valorDisplay:(n?.valor||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),dataLancamento:n?.dataLancamento?new Date(n.dataLancamento).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],status:n?.status||"Pendente",colaboradorId:n?.colaboradorId||s,colaboradorNome:n?.colaboradorNome||o,observacoes:n?.observacoes||"",anexos:[]}),[p,v]=O.useState(!1),g=w=>{const{name:I,value:U}=w.target;if(I==="valor"){const L=U.replace(/\D/g,"");if(!L){d(X=>({...X,valor:0,valorDisplay:"0,00"}));return}const q=parseFloat(L)/100;d(X=>({...X,valor:q,valorDisplay:q.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}))}else d(L=>({...L,[I]:U}))},_=w=>{w.target.files&&d(I=>({...I,anexos:Array.from(w.target.files||[])}))},T=w=>{d(I=>({...I,anexos:I.anexos.filter((U,L)=>L!==w)}))},x=async w=>{w.preventDefault(),v(!0);try{const I={tipoMovimentacao:c.tipoMovimentacao,descricao:c.descricao,valor:c.valor,dataLancamento:new Date(c.dataLancamento),status:c.status,colaboradorId:c.colaboradorId,colaboradorNome:c.colaboradorNome,observacoes:c.observacoes,anexos:c.anexos};n?await $c.update(n.id,I):await $c.create(I,s,o),t()}catch(I){console.error("Erro ao salvar lanamento:",I),alert("No foi possvel salvar o lanamento.")}finally{v(!1)}};return l.jsx("div",{className:"lancamentos-modal-overlay",onClick:e,children:l.jsxs("div",{className:"lancamentos-modal",onClick:w=>w.stopPropagation(),children:[l.jsxs("div",{className:"lancamentos-modal-header",children:[l.jsx("h2",{children:n?"Editar Lanamento":"Novo Lanamento Dirio"}),l.jsx("button",{className:"lancamentos-modal-close",onClick:e,children:l.jsx(In,{})})]}),l.jsxs("form",{className:"lancamentos-modal-form",onSubmit:x,children:[l.jsxs("div",{className:"lancamentos-modal-row",children:[l.jsxs("div",{className:"lancamentos-modal-group",children:[l.jsx("label",{children:"Tipo de Movimentao *"}),l.jsx("select",{name:"tipoMovimentacao",value:c.tipoMovimentacao,onChange:g,required:!0,children:ww.map(w=>l.jsx("option",{value:w,children:w},w))})]}),l.jsxs("div",{className:"lancamentos-modal-group",children:[l.jsx("label",{children:"Data *"}),l.jsx("input",{type:"date",name:"dataLancamento",value:c.dataLancamento,onChange:g,required:!0})]}),l.jsxs("div",{className:"lancamentos-modal-group",children:[l.jsx("label",{children:"Status *"}),l.jsx("select",{name:"status",value:c.status,onChange:g,required:!0,children:Sw.map(w=>l.jsx("option",{value:w,children:w},w))})]})]}),l.jsxs("div",{className:"lancamentos-modal-row",children:[l.jsxs("div",{className:"lancamentos-modal-group",children:[l.jsx("label",{children:"Colaborador *"}),l.jsx("input",{type:"text",name:"colaboradorNome",value:c.colaboradorNome,onChange:g,required:!0,placeholder:"Nome do colaborador"})]}),l.jsxs("div",{className:"lancamentos-modal-group",children:[l.jsx("label",{children:"Valor (R$) *"}),l.jsx("input",{type:"text",name:"valor",value:c.valorDisplay,onChange:g,required:!0,placeholder:"0,00"})]})]}),l.jsxs("div",{className:"lancamentos-modal-group",children:[l.jsx("label",{children:"Descrio *"}),l.jsx("textarea",{name:"descricao",value:c.descricao,onChange:g,rows:3,required:!0,placeholder:"Descreva a movimentao..."})]}),l.jsxs("div",{className:"lancamentos-modal-group",children:[l.jsx("label",{children:"Observaes"}),l.jsx("textarea",{name:"observacoes",value:c.observacoes,onChange:g,rows:3,placeholder:"Observaes adicionais..."})]}),l.jsxs("div",{className:"lancamentos-modal-group",children:[l.jsx("label",{children:"Anexar Comprovantes"}),l.jsxs("div",{className:"lancamentos-file-upload",children:[l.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:_,id:"lancamento-file-upload"}),l.jsxs("label",{htmlFor:"lancamento-file-upload",className:"lancamentos-file-upload-label",children:[l.jsx(Sf,{}),"Selecionar arquivos (PDF, OS, Boletos, Comprovantes)"]}),c.anexos.length>0&&l.jsx("div",{className:"lancamentos-file-list",children:c.anexos.map((w,I)=>l.jsxs("div",{className:"lancamentos-file-item",children:[l.jsx(Gt,{}),l.jsx("span",{children:w.name}),l.jsx("button",{type:"button",onClick:()=>T(I),className:"lancamentos-file-remove",children:l.jsx(In,{})})]},I))})]})]}),l.jsxs("div",{className:"lancamentos-modal-actions",children:[l.jsx("button",{type:"button",className:"lancamentos-secondary-btn",onClick:e,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"lancamentos-primary-btn",disabled:p,children:p?"Salvando...":n?"Atualizar":"Cadastrar"})]})]})]})})},rP=Rt(Pe,"premiosProdutividade"),sP=Rt(Pe,"boletinsMedicao"),iP=Rt(Pe,"lancamentosDiarios"),Kp={async gerarRelatorioConsolidado(n,e){const t=new Date(e,n-1,1),s=new Date(e,n,0,23,59,59,999),[o,c,d]=await Promise.all([this.getPremiosPorPeriodo(t,s),this.getBoletinsPorPeriodo(t,s),this.getRecebimentosPorPeriodo(t,s)]),p={quantidade:o.length,valorTotal:o.reduce((x,w)=>x+w.valor,0),aprovados:o.filter(x=>x.status==="Aprovado").length,pendentes:o.filter(x=>x.status==="Pendente").length,emRevisao:o.filter(x=>x.status==="Em reviso").length},v={quantidade:c.length,valorTotal:c.reduce((x,w)=>x+w.valor,0),emitidos:c.filter(x=>x.status==="Emitido").length,pendentes:c.filter(x=>x.status==="Pendente").length,aguardandoAssinatura:c.filter(x=>x.status==="Aguardando assinatura").length},g={quantidade:d.filter(x=>x.tipoMovimentacao==="Recebimento").length,valorTotal:d.filter(x=>x.tipoMovimentacao==="Recebimento").reduce((x,w)=>x+w.valor,0),recebidos:d.filter(x=>x.tipoMovimentacao==="Recebimento"&&x.status==="Recebido").length,pendentes:d.filter(x=>x.tipoMovimentacao==="Recebimento"&&x.status==="Pendente").length},_={total:0,vencidas:0,vencendoEm7Dias:0,vencendoEm30Dias:0,emDia:0},T={totalPremiosPagos:p.valorTotal,totalBoletinsEmitidos:v.valorTotal,totalDocumentacoesVencidas:0,totalRecebimentos:g.valorTotal,totalGeral:p.valorTotal+v.valorTotal+g.valorTotal};return{id:`relatorio-${e}-${n}`,mes:n,ano:e,dataGeracao:new Date,geradoPor:"current-user",geradoPorNome:"Usurio",resumo:T,premios:p,boletins:v,documentacoes:_,recebimentos:g}},async getPremiosPorPeriodo(n,e){const t=tt(rP,Te("dataPremio",">=",me.fromDate(n)),Te("dataPremio","<=",me.fromDate(e)),jn("dataPremio","desc"));return(await Ct(t)).docs.map(o=>{const c=o.data();return{valor:c.valor||0,status:c.status||"Pendente"}})},async getBoletinsPorPeriodo(n,e){const t=tt(sP,Te("dataEmissao",">=",me.fromDate(n)),Te("dataEmissao","<=",me.fromDate(e)),jn("dataEmissao","desc"));return(await Ct(t)).docs.map(o=>{const c=o.data();return{valor:c.valor||0,status:c.status||"Pendente"}})},async getRecebimentosPorPeriodo(n,e){const t=tt(iP,Te("dataLancamento",">=",me.fromDate(n)),Te("dataLancamento","<=",me.fromDate(e)),jn("dataLancamento","desc"));return(await Ct(t)).docs.map(o=>{const c=o.data();return{valor:c.valor||0,status:c.status||"Pendente",tipoMovimentacao:c.tipoMovimentacao||"Outro"}})},async exportarRelatorioPDF(n){const e=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],t=o=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(o),s=`
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="UTF-8">
          <title>Relatrio Consolidado - ${e[n.mes-1]}/${n.ano}</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 20px; }
            h1 { color: #667eea; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
            th { background-color: #667eea; color: white; }
            .summary { background-color: #f7fafc; padding: 15px; border-radius: 8px; margin: 20px 0; }
            .total { font-weight: bold; font-size: 18px; color: #667eea; }
          </style>
        </head>
        <body>
          <h1>Relatrio Consolidado Mensal</h1>
          <p><strong>Perodo:</strong> ${e[n.mes-1]}/${n.ano}</p>
          <p><strong>Data de Gerao:</strong> ${new Date(n.dataGeracao).toLocaleDateString("pt-BR")}</p>
          <p><strong>Gerado por:</strong> ${n.geradoPorNome}</p>
          
          <div class="summary">
            <h2>Resumo Geral</h2>
            <p>Total de Prmios Pagos: ${t(n.resumo.totalPremiosPagos)}</p>
            <p>Total de Boletins Emitidos: ${t(n.resumo.totalBoletinsEmitidos)}</p>
            <p>Total de Recebimentos: ${t(n.resumo.totalRecebimentos)}</p>
            <p class="total">Total Geral: ${t(n.resumo.totalGeral)}</p>
          </div>
  
          <h2>Prmios de Produtividade</h2>
          <table>
            <tr>
              <th>Quantidade</th>
              <th>Valor Total</th>
              <th>Aprovados</th>
              <th>Pendentes</th>
              <th>Em Reviso</th>
            </tr>
            <tr>
              <td>${n.premios.quantidade}</td>
              <td>${t(n.premios.valorTotal)}</td>
              <td>${n.premios.aprovados}</td>
              <td>${n.premios.pendentes}</td>
              <td>${n.premios.emRevisao}</td>
            </tr>
          </table>
  
          <h2>Boletins de Medio</h2>
          <table>
            <tr>
              <th>Quantidade</th>
              <th>Valor Total</th>
              <th>Emitidos</th>
              <th>Pendentes</th>
              <th>Aguardando Assinatura</th>
            </tr>
            <tr>
              <td>${n.boletins.quantidade}</td>
              <td>${t(n.boletins.valorTotal)}</td>
              <td>${n.boletins.emitidos}</td>
              <td>${n.boletins.pendentes}</td>
              <td>${n.boletins.aguardandoAssinatura}</td>
            </tr>
          </table>
  
          <h2>Recebimentos</h2>
          <table>
            <tr>
              <th>Quantidade</th>
              <th>Valor Total</th>
              <th>Recebidos</th>
              <th>Pendentes</th>
            </tr>
            <tr>
              <td>${n.recebimentos.quantidade}</td>
              <td>${t(n.recebimentos.valorTotal)}</td>
              <td>${n.recebimentos.recebidos}</td>
              <td>${n.recebimentos.pendentes}</td>
            </tr>
          </table>
        </body>
        </html>
      `;return new Blob([s],{type:"text/html"})},async exportarRelatorioExcel(n){const e=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],t=c=>c.toFixed(2).replace(".",","),o=[["Relatrio Consolidado Mensal"],[`Perodo: ${e[n.mes-1]}/${n.ano}`],[`Data de Gerao: ${new Date(n.dataGeracao).toLocaleDateString("pt-BR")}`],[`Gerado por: ${n.geradoPorNome}`],[],["RESUMO GERAL"],["Total de Prmios Pagos",t(n.resumo.totalPremiosPagos)],["Total de Boletins Emitidos",t(n.resumo.totalBoletinsEmitidos)],["Total de Recebimentos",t(n.resumo.totalRecebimentos)],["TOTAL GERAL",t(n.resumo.totalGeral)],[],["PRMIOS DE PRODUTIVIDADE"],["Quantidade","Valor Total","Aprovados","Pendentes","Em Reviso"],[n.premios.quantidade.toString(),t(n.premios.valorTotal),n.premios.aprovados.toString(),n.premios.pendentes.toString(),n.premios.emRevisao.toString()],[],["BOLETINS DE MEDIO"],["Quantidade","Valor Total","Emitidos","Pendentes","Aguardando Assinatura"],[n.boletins.quantidade.toString(),t(n.boletins.valorTotal),n.boletins.emitidos.toString(),n.boletins.pendentes.toString(),n.boletins.aguardandoAssinatura.toString()],[],["RECEBIMENTOS"],["Quantidade","Valor Total","Recebidos","Pendentes"],[n.recebimentos.quantidade.toString(),t(n.recebimentos.valorTotal),n.recebimentos.recebidos.toString(),n.recebimentos.pendentes.toString()]].map(c=>c.map(d=>`"${String(d).replace(/"/g,'""')}"`).join(";")).join(`
`);return new Blob([o],{type:"text/csv;charset=utf-8;"})}},Xp=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],oP=()=>{const n=new Date,[e,t]=O.useState(n.getMonth()+1),[s,o]=O.useState(n.getFullYear()),[c,d]=O.useState(null),[p,v]=O.useState(!1),[g,_]=O.useState(!1),[T,x]=O.useState(!1),w=async()=>{try{v(!0);const q=await Kp.gerarRelatorioConsolidado(e,s);d(q)}catch(q){console.error("Erro ao gerar relatrio:",q),alert("No foi possvel gerar o relatrio.")}finally{v(!1)}},I=async()=>{if(c)try{_(!0);const q=await Kp.exportarRelatorioPDF(c),X=URL.createObjectURL(q),F=document.createElement("a");F.href=X,F.download=`relatorio_consolidado_${Xp[e-1]}_${s}.html`,F.click(),URL.revokeObjectURL(X)}catch(q){console.error("Erro ao exportar PDF:",q),alert("No foi possvel exportar o PDF.")}finally{_(!1)}},U=async()=>{if(c)try{x(!0);const q=await Kp.exportarRelatorioExcel(c),X=URL.createObjectURL(q),F=document.createElement("a");F.href=X,F.download=`relatorio_consolidado_${Xp[e-1]}_${s}.csv`,F.click(),URL.revokeObjectURL(X)}catch(q){console.error("Erro ao exportar Excel:",q),alert("No foi possvel exportar o Excel.")}finally{x(!1)}},L=q=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(q);return l.jsx($r,{children:l.jsxs("div",{className:"relatorios-container",children:[l.jsx("div",{className:"relatorios-header",children:l.jsxs("div",{children:[l.jsx("h1",{className:"relatorios-title",children:"Relatrios e Controle Geral"}),l.jsx("p",{className:"relatorios-subtitle",children:"Gere relatrios consolidados mensais com todos os dados do sistema"})]})}),l.jsxs("div",{className:"relatorios-filters-card",children:[l.jsxs("div",{className:"relatorios-filters-header",children:[l.jsx(Ng,{className:"relatorios-filter-icon"}),l.jsx("h2",{children:"Filtros do Relatrio"})]}),l.jsxs("div",{className:"relatorios-filters-content",children:[l.jsxs("div",{className:"relatorios-filter-group",children:[l.jsx("label",{children:"Ms"}),l.jsx("select",{value:e,onChange:q=>t(Number(q.target.value)),children:Xp.map((q,X)=>l.jsx("option",{value:X+1,children:q},q))})]}),l.jsxs("div",{className:"relatorios-filter-group",children:[l.jsx("label",{children:"Ano"}),l.jsx("select",{value:s,onChange:q=>o(Number(q.target.value)),children:Array.from({length:5},(q,X)=>n.getFullYear()-X).map(q=>l.jsx("option",{value:q,children:q},q))})]}),l.jsxs("button",{className:"relatorios-generate-btn",onClick:w,disabled:p,children:[l.jsx(hb,{}),p?"Gerando...":"Gerar Relatrio"]})]})]}),c&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relatorios-summary-cards",children:[l.jsxs("div",{className:"relatorios-summary-card",children:[l.jsx("div",{className:"relatorios-summary-icon verde",children:l.jsx(Sh,{})}),l.jsxs("div",{className:"relatorios-summary-content",children:[l.jsx("h3",{children:"Prmios Pagos"}),l.jsx("p",{className:"relatorios-summary-value",children:L(c.resumo.totalPremiosPagos)})]})]}),l.jsxs("div",{className:"relatorios-summary-card",children:[l.jsx("div",{className:"relatorios-summary-icon azul",children:l.jsx(Gt,{})}),l.jsxs("div",{className:"relatorios-summary-content",children:[l.jsx("h3",{children:"Boletins Emitidos"}),l.jsx("p",{className:"relatorios-summary-value",children:L(c.resumo.totalBoletinsEmitidos)})]})]}),l.jsxs("div",{className:"relatorios-summary-card",children:[l.jsx("div",{className:"relatorios-summary-icon laranja",children:l.jsx(Gt,{})}),l.jsxs("div",{className:"relatorios-summary-content",children:[l.jsx("h3",{children:"Documentaes Vencidas"}),l.jsx("p",{className:"relatorios-summary-value",children:c.documentacoes.vencidas})]})]}),l.jsxs("div",{className:"relatorios-summary-card",children:[l.jsx("div",{className:"relatorios-summary-icon verde",children:l.jsx(Sh,{})}),l.jsxs("div",{className:"relatorios-summary-content",children:[l.jsx("h3",{children:"Recebimentos"}),l.jsx("p",{className:"relatorios-summary-value",children:L(c.resumo.totalRecebimentos)})]})]}),l.jsxs("div",{className:"relatorios-summary-card total",children:[l.jsx("div",{className:"relatorios-summary-icon roxo",children:l.jsx(Sh,{})}),l.jsxs("div",{className:"relatorios-summary-content",children:[l.jsx("h3",{children:"Total Geral"}),l.jsx("p",{className:"relatorios-summary-value total-value",children:L(c.resumo.totalGeral)})]})]})]}),l.jsxs("div",{className:"relatorios-details",children:[l.jsxs("div",{className:"relatorios-detail-section",children:[l.jsx("h3",{children:"Prmios de Produtividade"}),l.jsxs("div",{className:"relatorios-detail-grid",children:[l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Quantidade"}),l.jsx("span",{className:"relatorios-detail-value",children:c.premios.quantidade})]}),l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Valor Total"}),l.jsx("span",{className:"relatorios-detail-value",children:L(c.premios.valorTotal)})]}),l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Aprovados"}),l.jsx("span",{className:"relatorios-detail-value",children:c.premios.aprovados})]}),l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Pendentes"}),l.jsx("span",{className:"relatorios-detail-value",children:c.premios.pendentes})]}),l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Em Reviso"}),l.jsx("span",{className:"relatorios-detail-value",children:c.premios.emRevisao})]})]})]}),l.jsxs("div",{className:"relatorios-detail-section",children:[l.jsx("h3",{children:"Boletins de Medio"}),l.jsxs("div",{className:"relatorios-detail-grid",children:[l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Quantidade"}),l.jsx("span",{className:"relatorios-detail-value",children:c.boletins.quantidade})]}),l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Valor Total"}),l.jsx("span",{className:"relatorios-detail-value",children:L(c.boletins.valorTotal)})]}),l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Emitidos"}),l.jsx("span",{className:"relatorios-detail-value",children:c.boletins.emitidos})]}),l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Pendentes"}),l.jsx("span",{className:"relatorios-detail-value",children:c.boletins.pendentes})]}),l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Aguardando Assinatura"}),l.jsx("span",{className:"relatorios-detail-value",children:c.boletins.aguardandoAssinatura})]})]})]}),l.jsxs("div",{className:"relatorios-detail-section",children:[l.jsx("h3",{children:"Documentaes"}),l.jsxs("div",{className:"relatorios-detail-grid",children:[l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Total"}),l.jsx("span",{className:"relatorios-detail-value",children:c.documentacoes.total})]}),l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Vencidas"}),l.jsx("span",{className:"relatorios-detail-value error",children:c.documentacoes.vencidas})]}),l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Vencendo em 7 dias"}),l.jsx("span",{className:"relatorios-detail-value warning",children:c.documentacoes.vencendoEm7Dias})]}),l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Vencendo em 30 dias"}),l.jsx("span",{className:"relatorios-detail-value warning",children:c.documentacoes.vencendoEm30Dias})]}),l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Em Dia"}),l.jsx("span",{className:"relatorios-detail-value success",children:c.documentacoes.emDia})]})]})]}),l.jsxs("div",{className:"relatorios-detail-section",children:[l.jsx("h3",{children:"Recebimentos"}),l.jsxs("div",{className:"relatorios-detail-grid",children:[l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Quantidade"}),l.jsx("span",{className:"relatorios-detail-value",children:c.recebimentos.quantidade})]}),l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Valor Total"}),l.jsx("span",{className:"relatorios-detail-value",children:L(c.recebimentos.valorTotal)})]}),l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Recebidos"}),l.jsx("span",{className:"relatorios-detail-value success",children:c.recebimentos.recebidos})]}),l.jsxs("div",{className:"relatorios-detail-item",children:[l.jsx("span",{className:"relatorios-detail-label",children:"Pendentes"}),l.jsx("span",{className:"relatorios-detail-value warning",children:c.recebimentos.pendentes})]})]})]})]}),l.jsxs("div",{className:"relatorios-export-actions",children:[l.jsxs("button",{className:"relatorios-export-btn pdf",onClick:I,disabled:g,children:[l.jsx(ll,{}),g?"Exportando...":"Exportar PDF"]}),l.jsxs("button",{className:"relatorios-export-btn excel",onClick:U,disabled:T,children:[l.jsx(ll,{}),T?"Exportando...":"Exportar Excel"]})]})]}),!c&&!p&&l.jsxs("div",{className:"relatorios-empty",children:[l.jsx(hb,{className:"relatorios-empty-icon"}),l.jsx("p",{children:"Selecione o perodo e gere um relatrio consolidado"})]})]})})},jc="transacoes_financeiras",lh=n=>me.fromDate(n),qo=n=>n.toDate(),As=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`temp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,Eb=()=>{const n=new Date,e=n.getMonth(),t=n.getFullYear(),s=sa[0];return[{id:As(),colaboradorId:s.id,colaboradorNome:s.nome,cpf:s.cpf,cargo:s.cargo,setor:s.setor,tipoTransacao:"Adiantamento",categoria:"Adiantamento Salarial",valor:1500,descricao:"Adiantamento salarial do ms corrente",dataVencimento:new Date(t,e,5),status:"Pendente",observacoes:"Solicitao de adiantamento para despesas pessoais",anexos:[],criadoPor:"system",criadoEm:new Date(t,e,1),atualizadoEm:new Date(t,e,1)},{id:As(),colaboradorId:s.id,colaboradorNome:s.nome,cpf:s.cpf,cargo:s.cargo,setor:s.setor,tipoTransacao:"Pagamento",categoria:"Salrio",valor:4500,descricao:"Pagamento de salrio mensal",dataVencimento:new Date(t,e,5),dataPagamento:new Date(t,e,5),status:"Pago",formaPagamento:"Transferncia",numeroComprovante:"TRF-20250105-001",observacoes:"Pagamento efetuado via transferncia bancria",anexos:[],aprovadoPor:"admin-001",aprovadoEm:new Date(t,e,4),pagoPor:"admin-001",pagoEm:new Date(t,e,5),criadoPor:"system",criadoEm:new Date(t,e-1,28),atualizadoEm:new Date(t,e,5)},{id:As(),colaboradorId:s.id,colaboradorNome:s.nome,cpf:s.cpf,cargo:s.cargo,setor:s.setor,tipoTransacao:"Reembolso",categoria:"Reembolso",valor:350,descricao:"Reembolso de despesas com transporte",dataVencimento:new Date(t,e,10),status:"Aprovado",formaPagamento:"PIX",observacoes:"Reembolso aprovado, aguardando pagamento",anexos:[],aprovadoPor:"admin-001",aprovadoEm:new Date(t,e,8),criadoPor:s.id,criadoEm:new Date(t,e,7),atualizadoEm:new Date(t,e,8)},{id:As(),colaboradorId:s.id,colaboradorNome:s.nome,cpf:s.cpf,cargo:s.cargo,setor:s.setor,tipoTransacao:"Pagamento",categoria:"Vale Transporte",valor:220,descricao:"Vale transporte mensal",dataVencimento:new Date(t,e,1),dataPagamento:new Date(t,e,1),status:"Pago",formaPagamento:"PIX",numeroComprovante:"PIX-20250101-002",observacoes:"",anexos:[],aprovadoPor:"admin-001",aprovadoEm:new Date(t,e-1,30),pagoPor:"admin-001",pagoEm:new Date(t,e,1),criadoPor:"system",criadoEm:new Date(t,e-1,25),atualizadoEm:new Date(t,e,1)},{id:As(),colaboradorId:s.id,colaboradorNome:s.nome,cpf:s.cpf,cargo:s.cargo,setor:s.setor,tipoTransacao:"Pagamento",categoria:"Vale Alimentao",valor:600,descricao:"Vale alimentao mensal",dataVencimento:new Date(t,e,1),dataPagamento:new Date(t,e,1),status:"Pago",formaPagamento:"Transferncia",numeroComprovante:"TRF-20250101-003",observacoes:"",anexos:[],aprovadoPor:"admin-001",aprovadoEm:new Date(t,e-1,30),pagoPor:"admin-001",pagoEm:new Date(t,e,1),criadoPor:"system",criadoEm:new Date(t,e-1,25),atualizadoEm:new Date(t,e,1)},{id:As(),colaboradorId:s.id,colaboradorNome:s.nome,cpf:s.cpf,cargo:s.cargo,setor:s.setor,tipoTransacao:"Pagamento",categoria:"Prmio",valor:800,descricao:"Prmio de produtividade - Dezembro/2024",dataVencimento:new Date(t,e,15),status:"Aprovado",formaPagamento:"PIX",observacoes:"Prmio aprovado, aguardando pagamento",anexos:[],aprovadoPor:"admin-001",aprovadoEm:new Date(t,e,10),criadoPor:"admin-001",criadoEm:new Date(t,e,8),atualizadoEm:new Date(t,e,10)},{id:As(),colaboradorId:s.id,colaboradorNome:s.nome,cpf:s.cpf,cargo:s.cargo,setor:s.setor,tipoTransacao:"Reembolso",categoria:"Reembolso",valor:150,descricao:"Reembolso de despesas com material de escritrio",dataVencimento:new Date(t,e,20),status:"Pendente",observacoes:"Aguardando aprovao do gestor",anexos:[],criadoPor:s.id,criadoEm:new Date(t,e,12),atualizadoEm:new Date(t,e,12)},{id:As(),colaboradorId:s.id,colaboradorNome:s.nome,cpf:s.cpf,cargo:s.cargo,setor:s.setor,tipoTransacao:"Desconto",categoria:"Despesa Operacional",valor:50,descricao:"Desconto por atraso",dataVencimento:new Date(t,e-1,15),dataPagamento:new Date(t,e-1,15),status:"Pago",formaPagamento:void 0,observacoes:"Desconto aplicado na folha de pagamento",anexos:[],aprovadoPor:"admin-001",aprovadoEm:new Date(t,e-1,14),pagoPor:"admin-001",pagoEm:new Date(t,e-1,15),criadoPor:"admin-001",criadoEm:new Date(t,e-1,13),atualizadoEm:new Date(t,e-1,15)}]},ji={async list(n={}){try{const e=[];n.colaboradorNome&&e.push(Te("colaboradorNome",">=",n.colaboradorNome),Te("colaboradorNome","<=",n.colaboradorNome+"")),n.tipoTransacao&&e.push(Te("tipoTransacao","==",n.tipoTransacao)),n.status&&e.push(Te("status","==",n.status)),n.categoria&&e.push(Te("categoria","==",n.categoria)),n.dataInicio&&e.push(Te("dataVencimento",">=",lh(n.dataInicio))),n.dataFim&&e.push(Te("dataVencimento","<=",lh(n.dataFim))),e.push(jn("criadoEm","desc"));const t=tt(Rt(Pe,jc),...e);let o=(await Ct(t)).docs.map(c=>{const d=c.data();return{id:c.id,...d,dataVencimento:qo(d.dataVencimento),dataPagamento:d.dataPagamento?qo(d.dataPagamento):void 0,aprovadoEm:d.aprovadoEm?qo(d.aprovadoEm):void 0,pagoEm:d.pagoEm?qo(d.pagoEm):void 0,criadoEm:qo(d.criadoEm),atualizadoEm:qo(d.atualizadoEm)}});if(o.length===0&&(console.log(" Nenhuma transao encontrada no banco. Usando dados mockados como fallback."),o=Eb()),n.valorMin!==void 0&&(o=o.filter(c=>c.valor>=n.valorMin)),n.valorMax!==void 0&&(o=o.filter(c=>c.valor<=n.valorMax)),n.colaboradorNome&&o.length>0){const c=n.colaboradorNome.toLowerCase();o=o.filter(d=>d.colaboradorNome.toLowerCase().includes(c))}return o}catch(e){console.error("Erro ao listar transaes:",e),console.log(" Erro ao acessar banco. Usando dados mockados como fallback.");let t=Eb();if(n.colaboradorNome){const s=n.colaboradorNome.toLowerCase();t=t.filter(o=>o.colaboradorNome.toLowerCase().includes(s))}return n.tipoTransacao&&(t=t.filter(s=>s.tipoTransacao===n.tipoTransacao)),n.status&&(t=t.filter(s=>s.status===n.status)),n.categoria&&(t=t.filter(s=>s.categoria===n.categoria)),n.dataInicio&&(t=t.filter(s=>s.dataVencimento>=n.dataInicio)),n.dataFim&&(t=t.filter(s=>s.dataVencimento<=n.dataFim)),n.valorMin!==void 0&&(t=t.filter(s=>s.valor>=n.valorMin)),n.valorMax!==void 0&&(t=t.filter(s=>s.valor<=n.valorMax)),t}},async create(n,e){try{const t={colaboradorId:n.colaboradorId,colaboradorNome:n.colaboradorNome,cpf:n.cpf,cargo:n.cargo,setor:n.setor,tipoTransacao:n.tipoTransacao,categoria:n.categoria,valor:n.valor,descricao:n.descricao,dataVencimento:lh(n.dataVencimento),status:"Pendente",formaPagamento:n.formaPagamento,observacoes:n.observacoes||"",anexos:[],criadoPor:e,criadoEm:me.now(),atualizadoEm:me.now()};return(await Ur(Rt(Pe,jc),t)).id}catch(t){throw console.error("Erro ao criar transao:",t),t}},async update(n,e){try{const t=Xe(Pe,jc,n),s={...e,atualizadoEm:me.now()};e.dataVencimento&&(s.dataVencimento=lh(e.dataVencimento)),await Dn(t,s)}catch(t){throw console.error("Erro ao atualizar transao:",t),t}},async delete(n){try{await Ys(Xe(Pe,jc,n))}catch(e){throw console.error("Erro ao deletar transao:",e),e}},async updateStatus(n,e,t,s,o,c){try{const d=Xe(Pe,jc,n),p={status:e,atualizadoEm:me.now()};e==="Aprovado"&&(p.aprovadoPor=t,p.aprovadoEm=me.now()),e==="Pago"&&(p.pagoPor=t,p.pagoEm=me.now(),p.dataPagamento=me.now(),s&&(p.formaPagamento=s),o&&(p.numeroComprovante=o)),c&&(p.observacoes=c),await Dn(d,p)}catch(d){throw console.error("Erro ao atualizar status:",d),d}},async getStats(){try{const n=await this.list(),e={totalPendente:0,totalAprovado:0,totalPago:0,totalRejeitado:0,valorTotalPendente:0,valorTotalAprovado:0,valorTotalPago:0,valorTotalMes:0,adiantamentosPendentes:0,pagamentosPendentes:0},t=new Date().getMonth(),s=new Date().getFullYear();return n.forEach(o=>{o.status==="Pendente"&&(e.totalPendente++,e.valorTotalPendente+=o.valor,o.tipoTransacao==="Adiantamento"&&e.adiantamentosPendentes++,o.tipoTransacao==="Pagamento"&&e.pagamentosPendentes++),o.status==="Aprovado"&&(e.totalAprovado++,e.valorTotalAprovado+=o.valor),o.status==="Pago"&&(e.totalPago++,e.valorTotalPago+=o.valor),o.status==="Rejeitado"&&e.totalRejeitado++,o.criadoEm.getMonth()===t&&o.criadoEm.getFullYear()===s&&(e.valorTotalMes+=o.valor)}),e}catch(n){throw console.error("Erro ao buscar estatsticas:",n),n}},async getResumoMensal(n,e){try{const t=new Date(e,n-1,1),s=new Date(e,n,0),o=await this.list({dataInicio:t,dataFim:s}),c={mes:n,ano:e,totalAdiantamentos:0,totalPagamentos:0,totalReembolsos:0,totalDescontos:0,valorTotalAdiantamentos:0,valorTotalPagamentos:0,valorTotalReembolsos:0,valorTotalDescontos:0,transacoesPorStatus:{pendente:0,aprovado:0,pago:0,rejeitado:0},transacoesPorCategoria:[]},d=new Map;return o.forEach(p=>{switch(p.tipoTransacao){case"Adiantamento":c.totalAdiantamentos++,c.valorTotalAdiantamentos+=p.valor;break;case"Pagamento":c.totalPagamentos++,c.valorTotalPagamentos+=p.valor;break;case"Reembolso":c.totalReembolsos++,c.valorTotalReembolsos+=p.valor;break;case"Desconto":c.totalDescontos++,c.valorTotalDescontos+=p.valor;break}switch(p.status){case"Pendente":c.transacoesPorStatus.pendente++;break;case"Aprovado":c.transacoesPorStatus.aprovado++;break;case"Pago":c.transacoesPorStatus.pago++;break;case"Rejeitado":c.transacoesPorStatus.rejeitado++;break}const v=d.get(p.categoria)||{quantidade:0,valor:0};v.quantidade++,v.valor+=p.valor,d.set(p.categoria,v)}),c.transacoesPorCategoria=Array.from(d.entries()).map(([p,v])=>({categoria:p,quantidade:v.quantidade,valor:v.valor})),c}catch(t){throw console.error("Erro ao gerar resumo mensal:",t),t}},async exportarRelatorioCSV(n={}){try{const e=await this.list(n),t=["Data","Colaborador","CPF","Tipo","Categoria","Valor","Status","Vencimento","Pagamento","Forma Pagamento","Descrio"],s=e.map(p=>[new Intl.DateTimeFormat("pt-BR").format(p.criadoEm),p.colaboradorNome,p.cpf,p.tipoTransacao,p.categoria,p.valor.toFixed(2),p.status,new Intl.DateTimeFormat("pt-BR").format(p.dataVencimento),p.dataPagamento?new Intl.DateTimeFormat("pt-BR").format(p.dataPagamento):"-",p.formaPagamento||"-",p.descricao]),o=[t.join(","),...s.map(p=>p.map(v=>`"${v}"`).join(","))].join(`
`),c=new Blob(["\uFEFF"+o],{type:"text/csv;charset=utf-8;"});return URL.createObjectURL(c)}catch(e){throw console.error("Erro ao exportar relatrio:",e),e}}},Nw=["Adiantamento","Pagamento","Reembolso","Desconto"],Aw=["Pendente","Aprovado","Pago","Rejeitado","Cancelado"],Rw=["Salrio","Adiantamento Salarial","Vale Transporte","Vale Alimentao","Prmio","Reembolso","Despesa Operacional","Outro"],Cw=["Dinheiro","PIX","Transferncia","Cheque","Carto"],lP=()=>{const{user:n}=Sa(),[e,t]=O.useState([]),[s,o]=O.useState({totalPendente:0,totalAprovado:0,totalPago:0,totalRejeitado:0,valorTotalPendente:0,valorTotalAprovado:0,valorTotalPago:0,valorTotalMes:0,adiantamentosPendentes:0,pagamentosPendentes:0}),[c,d]=O.useState({}),[p,v]=O.useState(!1),[g,_]=O.useState(!1),[T,x]=O.useState(null),[w,I]=O.useState(null),[U,L]=O.useState(!1),[q,X]=O.useState(!1),F=O.useCallback(async()=>{L(!0);try{const J=await ji.list(c);t(J)}catch(J){console.error("Erro ao carregar transaes:",J),alert("No foi possvel carregar as transaes.")}finally{L(!1)}},[c]),oe=O.useCallback(async()=>{try{const J=await ji.getStats();o(J)}catch(J){console.error("Erro ao carregar estatsticas:",J)}},[]);O.useEffect(()=>{F(),oe()},[F,oe]);const ce=(J,P)=>{d(te=>({...te,[J]:P}))},ue=J=>{x(J||null),v(!0)},A=()=>{v(!1),x(null)},D=J=>{I(J),_(!0)},S=()=>{_(!1),I(null)},j=async J=>{try{T?await ji.update(T.id,J):await ji.create(J,n?.uid||""),A(),F(),oe()}catch(P){console.error("Erro ao salvar transao:",P),alert("No foi possvel salvar a transao.")}},M=async J=>{if(confirm("Tem certeza que deseja excluir esta transao?"))try{await ji.delete(J),F(),oe()}catch(P){console.error("Erro ao excluir transao:",P),alert("No foi possvel excluir a transao.")}},z=async(J,P,te,G,he)=>{try{await ji.updateStatus(J,P,n?.uid||"",te,G,he),S(),F(),oe()}catch(xe){console.error("Erro ao atualizar status:",xe),alert("No foi possvel atualizar o status.")}},C=async()=>{try{const J=await ji.exportarRelatorioCSV(c),P=document.createElement("a");P.href=J,P.download=`relatorio_financeiro_${new Date().getTime()}.csv`,P.click(),URL.revokeObjectURL(J)}catch(J){console.error("Erro ao exportar relatrio:",J),alert("No foi possvel exportar o relatrio.")}},De=J=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(J),it=J=>new Intl.DateTimeFormat("pt-BR").format(J),Z=J=>{switch(J){case"Aprovado":return"status-approved";case"Pago":return"status-paid";case"Pendente":return"status-pending";case"Rejeitado":return"status-rejected";case"Cancelado":return"status-cancelled";default:return""}},le=J=>{switch(J){case"Aprovado":return l.jsx(dn,{className:"status-icon approved"});case"Pago":return l.jsx(dn,{className:"status-icon paid"});case"Pendente":return l.jsx(ia,{className:"status-icon pending"});case"Rejeitado":return l.jsx(bw,{className:"status-icon rejected"});case"Cancelado":return l.jsx(SO,{className:"status-icon cancelled"});default:return null}},ge=J=>{switch(J){case"Adiantamento":return l.jsx(mb,{className:"tipo-icon adiantamento"});case"Pagamento":return l.jsx(Ag,{className:"tipo-icon pagamento"});case"Reembolso":return l.jsx(Wh,{className:"tipo-icon reembolso"});case"Desconto":return l.jsx(mb,{className:"tipo-icon desconto"});default:return null}},ne=O.useMemo(()=>e,[e]);return l.jsx($r,{children:l.jsxs("div",{className:"financeiro-container",children:[l.jsxs("div",{className:"financeiro-header",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"financeiro-title",children:"Gesto Financeira"}),l.jsx("p",{className:"financeiro-subtitle",children:"Controle de adiantamentos, pagamentos e reembolsos"})]}),l.jsxs("div",{className:"financeiro-header-actions",children:[l.jsxs("button",{className:"financeiro-btn-export",onClick:C,children:[l.jsx(ll,{}),"Exportar Relatrio"]}),l.jsxs("button",{className:"financeiro-btn-primary",onClick:()=>ue(),children:[l.jsx(ul,{}),"Nova Transao"]})]})]}),l.jsxs("div",{className:"financeiro-stats",children:[l.jsxs("div",{className:"financeiro-stat-card",children:[l.jsx("div",{className:"financeiro-stat-icon pending",children:l.jsx(ia,{})}),l.jsxs("div",{className:"financeiro-stat-content",children:[l.jsx("h3",{children:"Pendentes"}),l.jsx("p",{className:"financeiro-stat-value",children:s.totalPendente}),l.jsx("span",{className:"financeiro-stat-label",children:De(s.valorTotalPendente)})]})]}),l.jsxs("div",{className:"financeiro-stat-card",children:[l.jsx("div",{className:"financeiro-stat-icon approved",children:l.jsx(dn,{})}),l.jsxs("div",{className:"financeiro-stat-content",children:[l.jsx("h3",{children:"Aprovados"}),l.jsx("p",{className:"financeiro-stat-value",children:s.totalAprovado}),l.jsx("span",{className:"financeiro-stat-label",children:De(s.valorTotalAprovado)})]})]}),l.jsxs("div",{className:"financeiro-stat-card",children:[l.jsx("div",{className:"financeiro-stat-icon paid",children:l.jsx(Ag,{})}),l.jsxs("div",{className:"financeiro-stat-content",children:[l.jsx("h3",{children:"Pagos"}),l.jsx("p",{className:"financeiro-stat-value",children:s.totalPago}),l.jsx("span",{className:"financeiro-stat-label",children:De(s.valorTotalPago)})]})]}),l.jsxs("div",{className:"financeiro-stat-card",children:[l.jsx("div",{className:"financeiro-stat-icon total",children:l.jsx(Gt,{})}),l.jsxs("div",{className:"financeiro-stat-content",children:[l.jsx("h3",{children:"Total do Ms"}),l.jsx("p",{className:"financeiro-stat-value",children:De(s.valorTotalMes)}),l.jsxs("span",{className:"financeiro-stat-label",children:[s.adiantamentosPendentes," adiant. | ",s.pagamentosPendentes," pag."]})]})]})]}),l.jsxs("div",{className:"financeiro-filters",children:[l.jsxs("div",{className:"financeiro-search",children:[l.jsx(xu,{className:"financeiro-search-icon"}),l.jsx("input",{type:"text",placeholder:"Buscar por colaborador...",value:c.colaboradorNome||"",onChange:J=>ce("colaboradorNome",J.target.value)})]}),l.jsxs("button",{className:"financeiro-filter-toggle",onClick:()=>X(!q),children:[l.jsx(Ji,{}),"Filtros"]})]}),q&&l.jsxs("div",{className:"financeiro-filters-panel",children:[l.jsxs("div",{className:"financeiro-filter-group",children:[l.jsx("label",{children:"Tipo de Transao"}),l.jsxs("select",{value:c.tipoTransacao||"",onChange:J=>ce("tipoTransacao",J.target.value||void 0),children:[l.jsx("option",{value:"",children:"Todos"}),Nw.map(J=>l.jsx("option",{value:J,children:J},J))]})]}),l.jsxs("div",{className:"financeiro-filter-group",children:[l.jsx("label",{children:"Status"}),l.jsxs("select",{value:c.status||"",onChange:J=>ce("status",J.target.value||void 0),children:[l.jsx("option",{value:"",children:"Todos"}),Aw.map(J=>l.jsx("option",{value:J,children:J},J))]})]}),l.jsxs("div",{className:"financeiro-filter-group",children:[l.jsx("label",{children:"Categoria"}),l.jsxs("select",{value:c.categoria||"",onChange:J=>ce("categoria",J.target.value||void 0),children:[l.jsx("option",{value:"",children:"Todas"}),Rw.map(J=>l.jsx("option",{value:J,children:J},J))]})]}),l.jsxs("div",{className:"financeiro-filter-group",children:[l.jsx("label",{children:"Data Incio"}),l.jsx("input",{type:"date",value:c.dataInicio?c.dataInicio.toISOString().split("T")[0]:"",onChange:J=>ce("dataInicio",J.target.value?new Date(J.target.value):void 0)})]}),l.jsxs("div",{className:"financeiro-filter-group",children:[l.jsx("label",{children:"Data Fim"}),l.jsx("input",{type:"date",value:c.dataFim?c.dataFim.toISOString().split("T")[0]:"",onChange:J=>ce("dataFim",J.target.value?new Date(J.target.value):void 0)})]})]}),l.jsx("div",{className:"financeiro-table-container",children:l.jsxs("table",{className:"financeiro-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Colaborador"}),l.jsx("th",{children:"Tipo"}),l.jsx("th",{children:"Categoria"}),l.jsx("th",{children:"Valor"}),l.jsx("th",{children:"Vencimento"}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Aes"})]})}),l.jsx("tbody",{children:U?l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"financeiro-loading",children:"Carregando..."})}):ne.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"financeiro-empty",children:"Nenhuma transao encontrada"})}):ne.map(J=>l.jsxs("tr",{children:[l.jsx("td",{children:l.jsxs("div",{className:"financeiro-colaborador",children:[l.jsx(zs,{className:"financeiro-user-icon"}),l.jsxs("div",{children:[l.jsx("p",{className:"financeiro-colaborador-name",children:J.colaboradorNome}),l.jsxs("p",{className:"financeiro-colaborador-info",children:[J.cargo," - ",J.setor]})]})]})}),l.jsx("td",{children:l.jsxs("span",{className:"financeiro-tipo-badge",children:[ge(J.tipoTransacao),J.tipoTransacao]})}),l.jsx("td",{children:J.categoria}),l.jsx("td",{className:"financeiro-valor",children:De(J.valor)}),l.jsx("td",{children:it(J.dataVencimento)}),l.jsx("td",{children:l.jsxs("span",{className:`financeiro-status-badge ${Z(J.status)}`,onClick:()=>D(J),style:{cursor:"pointer"},children:[le(J.status),J.status]})}),l.jsx("td",{children:l.jsxs("div",{className:"financeiro-actions",children:[l.jsx("button",{className:"financeiro-action-btn edit",onClick:()=>ue(J),title:"Editar",children:l.jsx(cl,{})}),l.jsx("button",{className:"financeiro-action-btn delete",onClick:()=>M(J.id),title:"Excluir",children:l.jsx(Gi,{})})]})})]},J.id))})]})}),p&&l.jsx(cP,{transacao:T,onClose:A,onSave:j}),g&&w&&l.jsx(uP,{transacao:w,onClose:S,onUpdateStatus:z})]})})},cP=({transacao:n,onClose:e,onSave:t})=>{const[s,o]=O.useState({colaboradorId:n?.colaboradorId||"",colaboradorNome:n?.colaboradorNome||"",cpf:n?.cpf||"",cargo:n?.cargo||"",setor:n?.setor||"",tipoTransacao:n?.tipoTransacao||"Adiantamento",categoria:n?.categoria||"Adiantamento Salarial",valor:n?.valor||0,descricao:n?.descricao||"",dataVencimento:n?.dataVencimento||new Date,formaPagamento:n?.formaPagamento,observacoes:n?.observacoes||""}),c=g=>{const{name:_,value:T}=g.target;o(x=>({...x,[_]:T}))},d=g=>{o(_=>({..._,dataVencimento:new Date(g)}))},p=g=>{const _=sa.find(T=>T.id===g);_&&o(T=>({...T,colaboradorId:_.id,colaboradorNome:_.nome,cpf:_.cpf,cargo:_.cargo,setor:_.setor}))},v=g=>{g.preventDefault(),t(s)};return l.jsx("div",{className:"financeiro-modal-overlay",onClick:e,children:l.jsxs("div",{className:"financeiro-modal-content",onClick:g=>g.stopPropagation(),children:[l.jsxs("div",{className:"financeiro-modal-header",children:[l.jsx("h2",{children:n?"Editar Transao":"Nova Transao"}),l.jsx("button",{className:"financeiro-modal-close",onClick:e,children:l.jsx(In,{})})]}),l.jsxs("form",{onSubmit:v,className:"financeiro-modal-form",children:[l.jsxs("div",{className:"financeiro-form-group",children:[l.jsx("label",{children:"Colaborador *"}),l.jsxs("select",{value:s.colaboradorId,onChange:g=>p(g.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Selecione..."}),sa.map(g=>l.jsx("option",{value:g.id,children:g.nome},g.id))]})]}),l.jsxs("div",{className:"financeiro-form-row",children:[l.jsxs("div",{className:"financeiro-form-group",children:[l.jsx("label",{children:"Tipo de Transao *"}),l.jsx("select",{name:"tipoTransacao",value:s.tipoTransacao,onChange:c,required:!0,children:Nw.map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{className:"financeiro-form-group",children:[l.jsx("label",{children:"Categoria *"}),l.jsx("select",{name:"categoria",value:s.categoria,onChange:c,required:!0,children:Rw.map(g=>l.jsx("option",{value:g,children:g},g))})]})]}),l.jsxs("div",{className:"financeiro-form-row",children:[l.jsxs("div",{className:"financeiro-form-group",children:[l.jsx("label",{children:"Valor *"}),l.jsx("input",{type:"number",name:"valor",value:s.valor,onChange:c,step:"0.01",min:"0",required:!0})]}),l.jsxs("div",{className:"financeiro-form-group",children:[l.jsx("label",{children:"Data de Vencimento *"}),l.jsx("input",{type:"date",value:s.dataVencimento.toISOString().split("T")[0],onChange:g=>d(g.target.value),required:!0})]})]}),l.jsxs("div",{className:"financeiro-form-group",children:[l.jsx("label",{children:"Forma de Pagamento"}),l.jsxs("select",{name:"formaPagamento",value:s.formaPagamento||"",onChange:c,children:[l.jsx("option",{value:"",children:"Selecione..."}),Cw.map(g=>l.jsx("option",{value:g,children:g},g))]})]}),l.jsxs("div",{className:"financeiro-form-group",children:[l.jsx("label",{children:"Descrio *"}),l.jsx("textarea",{name:"descricao",value:s.descricao,onChange:c,rows:3,required:!0})]}),l.jsxs("div",{className:"financeiro-form-group",children:[l.jsx("label",{children:"Observaes"}),l.jsx("textarea",{name:"observacoes",value:s.observacoes,onChange:c,rows:2})]}),l.jsxs("div",{className:"financeiro-modal-actions",children:[l.jsx("button",{type:"button",className:"financeiro-btn-secondary",onClick:e,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"financeiro-btn-primary",children:"Salvar"})]})]})]})})},uP=({transacao:n,onClose:e,onUpdateStatus:t})=>{const[s,o]=O.useState(n.status),[c,d]=O.useState(n.formaPagamento||""),[p,v]=O.useState(""),[g,_]=O.useState(n.observacoes||""),T=x=>{x.preventDefault(),t(n.id,s,c||void 0,p||void 0,g||void 0)};return l.jsx("div",{className:"financeiro-modal-overlay",onClick:e,children:l.jsxs("div",{className:"financeiro-modal-content financeiro-status-modal",onClick:x=>x.stopPropagation(),children:[l.jsxs("div",{className:"financeiro-modal-header",children:[l.jsx("h2",{children:"Atualizar Status"}),l.jsx("button",{className:"financeiro-modal-close",onClick:e,children:l.jsx(In,{})})]}),l.jsxs("form",{onSubmit:T,className:"financeiro-modal-form",children:[l.jsxs("div",{className:"financeiro-transacao-info",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Colaborador:"})," ",n.colaboradorNome]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Tipo:"})," ",n.tipoTransacao]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Valor:"})," ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n.valor)]})]}),l.jsxs("div",{className:"financeiro-form-group",children:[l.jsx("label",{children:"Novo Status *"}),l.jsx("select",{value:s,onChange:x=>o(x.target.value),required:!0,children:Aw.map(x=>l.jsx("option",{value:x,children:x},x))})]}),s==="Pago"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"financeiro-form-group",children:[l.jsx("label",{children:"Forma de Pagamento *"}),l.jsxs("select",{value:c,onChange:x=>d(x.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Selecione..."}),Cw.map(x=>l.jsx("option",{value:x,children:x},x))]})]}),l.jsxs("div",{className:"financeiro-form-group",children:[l.jsx("label",{children:"Nmero do Comprovante"}),l.jsx("input",{type:"text",value:p,onChange:x=>v(x.target.value),placeholder:"Ex: 123456789"})]})]}),l.jsxs("div",{className:"financeiro-form-group",children:[l.jsx("label",{children:"Observaes"}),l.jsx("textarea",{value:g,onChange:x=>_(x.target.value),rows:3,placeholder:"Adicione observaes sobre esta atualizao..."})]}),l.jsxs("div",{className:"financeiro-modal-actions",children:[l.jsx("button",{type:"button",className:"financeiro-btn-secondary",onClick:e,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"financeiro-btn-primary",children:"Atualizar Status"})]})]})]})})},dP=()=>{const n=Xi(),{user:e}=Sa(),{notificacoes:t,naoLidas:s,stats:o,marcarComoLida:c,marcarTodasComoLidas:d,deletar:p,deletarTodasLidas:v}=ew(),[g,_]=O.useState("todos"),[T,x]=O.useState("todos"),[w,I]=O.useState("todos"),[U,L]=O.useState(!1),[q,X]=O.useState(!1),[F,oe]=O.useState(null);Vs.useEffect(()=>{e?.uid&&ht.obterConfiguracoes(e.uid).then(oe)},[e?.uid]);const ce=t.filter(C=>!(g!=="todos"&&C.tipo!==g||T!=="todos"&&C.prioridade!==T||w==="lidas"&&!C.lida||w==="nao-lidas"&&C.lida)),ue=async(C,De)=>{await c(C),De&&n(De)},A=C=>{const it=new Date().getTime()-C.getTime(),Z=Math.floor(it/6e4),le=Math.floor(Z/60),ge=Math.floor(le/24);return Z<1?"Agora":Z<60?`H ${Z} minuto${Z!==1?"s":""}`:le<24?`H ${le} hora${le!==1?"s":""}`:ge===1?"Ontem":ge<7?`H ${ge} dias`:ge<30?`H ${Math.floor(ge/7)} semana${Math.floor(ge/7)!==1?"s":""}`:C.toLocaleDateString()},D=C=>{switch(C){case"documento_vencido":case"documento_vencendo":return"";case"premio_lancado":return"";case"boletim_pendente":case"boletim_vencendo":return"";default:return""}},S=C=>{switch(C){case"documento_vencido":return"Documento Vencido";case"documento_vencendo":return"Documento Vencendo";case"premio_lancado":return"Prmio Lanado";case"boletim_pendente":return"Boletim Pendente";case"boletim_vencendo":return"Boletim Vencendo";case"sistema":return"Sistema";default:return"Outro"}},j=C=>{switch(C){case"urgente":return"priority-urgent";case"alta":return"priority-high";case"media":return"priority-medium";default:return"priority-low"}},M=C=>{switch(C){case"urgente":return"Urgente";case"alta":return"Alta";case"media":return"Mdia";default:return"Baixa"}},z=async()=>{if(!(!e?.uid||!F))try{await ht.atualizarConfiguracoes(e.uid,{emailNotificacoes:F.emailNotificacoes,emailDocumentoVencendo:F.emailDocumentoVencendo,emailDocumentoVencido:F.emailDocumentoVencido,emailPremioLancado:F.emailPremioLancado,emailBoletimPendente:F.emailBoletimPendente,diasAntesVencimento:F.diasAntesVencimento,horaVerificacao:F.horaVerificacao}),alert("Configuraes salvas com sucesso!"),X(!1)}catch(C){console.error("Erro ao salvar configuraes:",C),alert("Erro ao salvar configuraes")}};return l.jsx($r,{children:l.jsxs("div",{className:"notificacoes-page",children:[l.jsx("div",{className:"page-header",children:l.jsxs("div",{className:"header-content",children:[l.jsxs("div",{className:"header-title-section",children:[l.jsx(Pi,{className:"page-icon"}),l.jsxs("div",{children:[l.jsx("h1",{children:"Notificaes"}),l.jsx("p",{className:"page-subtitle",children:"Gerencie suas notificaes e alertas do sistema"})]})]}),l.jsxs("div",{className:"header-actions",children:[l.jsxs("button",{className:"btn-secondary",onClick:()=>L(!U),children:[l.jsx(Ji,{}),"Filtros"]}),l.jsxs("button",{className:"btn-secondary",onClick:()=>X(!q),children:[l.jsx(_w,{}),"Configuraes"]})]})]})}),o&&l.jsxs("div",{className:"stats-grid",children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon total",children:l.jsx(Pi,{})}),l.jsxs("div",{className:"stat-content",children:[l.jsx("span",{className:"stat-label",children:"Total"}),l.jsx("span",{className:"stat-value",children:o.total})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon unread",children:l.jsx(Pi,{})}),l.jsxs("div",{className:"stat-content",children:[l.jsx("span",{className:"stat-label",children:"No Lidas"}),l.jsx("span",{className:"stat-value",children:s})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon urgent",children:l.jsx(Cg,{})}),l.jsxs("div",{className:"stat-content",children:[l.jsx("span",{className:"stat-label",children:"Urgentes"}),l.jsx("span",{className:"stat-value",children:o.porPrioridade.urgente})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon documents",children:l.jsx(Pi,{})}),l.jsxs("div",{className:"stat-content",children:[l.jsx("span",{className:"stat-label",children:"Documentos"}),l.jsx("span",{className:"stat-value",children:o.porTipo.documento_vencendo+o.porTipo.documento_vencido})]})]})]}),U&&l.jsxs("div",{className:"filtros-container",children:[l.jsxs("div",{className:"filtro-group",children:[l.jsx("label",{children:"Tipo:"}),l.jsxs("select",{value:g,onChange:C=>_(C.target.value),children:[l.jsx("option",{value:"todos",children:"Todos"}),l.jsx("option",{value:"documento_vencendo",children:"Documento Vencendo"}),l.jsx("option",{value:"documento_vencido",children:"Documento Vencido"}),l.jsx("option",{value:"premio_lancado",children:"Prmio Lanado"}),l.jsx("option",{value:"boletim_pendente",children:"Boletim Pendente"}),l.jsx("option",{value:"boletim_vencendo",children:"Boletim Vencendo"}),l.jsx("option",{value:"sistema",children:"Sistema"}),l.jsx("option",{value:"outro",children:"Outro"})]})]}),l.jsxs("div",{className:"filtro-group",children:[l.jsx("label",{children:"Prioridade:"}),l.jsxs("select",{value:T,onChange:C=>x(C.target.value),children:[l.jsx("option",{value:"todos",children:"Todas"}),l.jsx("option",{value:"urgente",children:"Urgente"}),l.jsx("option",{value:"alta",children:"Alta"}),l.jsx("option",{value:"media",children:"Mdia"}),l.jsx("option",{value:"baixa",children:"Baixa"})]})]}),l.jsxs("div",{className:"filtro-group",children:[l.jsx("label",{children:"Status:"}),l.jsxs("select",{value:w,onChange:C=>I(C.target.value),children:[l.jsx("option",{value:"todos",children:"Todas"}),l.jsx("option",{value:"nao-lidas",children:"No Lidas"}),l.jsx("option",{value:"lidas",children:"Lidas"})]})]})]}),q&&F&&l.jsxs("div",{className:"configuracoes-container",children:[l.jsx("h3",{children:"Configuraes de Notificaes"}),l.jsxs("div",{className:"config-section",children:[l.jsx("div",{className:"config-item",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",checked:F.emailNotificacoes,onChange:C=>oe({...F,emailNotificacoes:C.target.checked})}),"Receber notificaes por e-mail"]})}),F.emailNotificacoes&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"config-item",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",checked:F.emailDocumentoVencendo,onChange:C=>oe({...F,emailDocumentoVencendo:C.target.checked})}),"Documentos vencendo"]})}),l.jsx("div",{className:"config-item",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",checked:F.emailDocumentoVencido,onChange:C=>oe({...F,emailDocumentoVencido:C.target.checked})}),"Documentos vencidos"]})}),l.jsx("div",{className:"config-item",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",checked:F.emailPremioLancado,onChange:C=>oe({...F,emailPremioLancado:C.target.checked})}),"Prmios lanados"]})}),l.jsx("div",{className:"config-item",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",checked:F.emailBoletimPendente,onChange:C=>oe({...F,emailBoletimPendente:C.target.checked})}),"Boletins pendentes"]})})]}),l.jsx("div",{className:"config-item",children:l.jsxs("label",{children:["Alertar com quantos dias de antecedncia:",l.jsx("input",{type:"number",min:"1",max:"30",value:F.diasAntesVencimento,onChange:C=>oe({...F,diasAntesVencimento:parseInt(C.target.value)||7})})]})}),l.jsx("div",{className:"config-item",children:l.jsxs("label",{children:["Hora da verificao diria:",l.jsx("input",{type:"time",value:F.horaVerificacao,onChange:C=>oe({...F,horaVerificacao:C.target.value})})]})})]}),l.jsxs("div",{className:"config-actions",children:[l.jsx("button",{className:"btn-secondary",onClick:()=>X(!1),children:"Cancelar"}),l.jsx("button",{className:"btn-primary",onClick:z,children:"Salvar Configuraes"})]})]}),ce.length>0&&l.jsxs("div",{className:"acoes-massa",children:[s>0&&l.jsxs("button",{className:"btn-action",onClick:()=>d(),children:[l.jsx(dn,{}),"Marcar todas como lidas"]}),l.jsxs("button",{className:"btn-action danger",onClick:()=>v(),children:[l.jsx(Gi,{}),"Deletar lidas"]})]}),l.jsx("div",{className:"notificacoes-lista",children:ce.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx(Cg,{}),l.jsx("h3",{children:"Nenhuma notificao encontrada"}),l.jsx("p",{children:g!=="todos"||T!=="todos"||w!=="todos"?"Tente ajustar os filtros":"Voc no tem notificaes no momento"})]}):ce.map(C=>l.jsxs("div",{className:`notificacao-card ${C.lida?"":"unread"} ${j(C.prioridade)}`,onClick:()=>ue(C.id,C.link),children:[l.jsx("div",{className:"notificacao-icon",children:D(C.tipo)}),l.jsxs("div",{className:"notificacao-body",children:[l.jsxs("div",{className:"notificacao-header",children:[l.jsx("h3",{className:"notificacao-titulo",children:C.titulo}),l.jsxs("div",{className:"notificacao-badges",children:[l.jsx("span",{className:`badge ${j(C.prioridade)}`,children:M(C.prioridade)}),l.jsx("span",{className:"badge tipo",children:S(C.tipo)})]})]}),l.jsx("p",{className:"notificacao-mensagem",children:C.mensagem}),l.jsxs("div",{className:"notificacao-footer",children:[l.jsx("span",{className:"notificacao-tempo",children:A(C.criadoEm)}),C.emailEnviado&&l.jsx("span",{className:"email-sent",children:" E-mail enviado"})]})]}),l.jsx("button",{className:"btn-delete",onClick:De=>{De.stopPropagation(),p(C.id)},children:l.jsx(In,{})})]},C.id))})]})})};const jw="firebasestorage.googleapis.com",Dw="storageBucket",hP=120*1e3,fP=600*1e3;class Tt extends lr{constructor(e,t,s=0){super(Jp(e),`Firebase Storage: ${t} (${Jp(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var bt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(bt||(bt={}));function Jp(n){return"storage/"+n}function Fv(){const n="An unknown error occurred, please check the error payload for server response.";return new Tt(bt.UNKNOWN,n)}function mP(n){return new Tt(bt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function pP(n){return new Tt(bt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function gP(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Tt(bt.UNAUTHENTICATED,n)}function vP(){return new Tt(bt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function yP(n){return new Tt(bt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function _P(){return new Tt(bt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function EP(){return new Tt(bt.CANCELED,"User canceled the upload/download.")}function bP(n){return new Tt(bt.INVALID_URL,"Invalid URL '"+n+"'.")}function TP(n){return new Tt(bt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function xP(){return new Tt(bt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Dw+"' property when initializing the app?")}function wP(){return new Tt(bt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function SP(){return new Tt(bt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function NP(n){return new Tt(bt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ig(n){return new Tt(bt.INVALID_ARGUMENT,n)}function Iw(){return new Tt(bt.APP_DELETED,"The Firebase app was deleted.")}function AP(n){return new Tt(bt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qc(n,e){return new Tt(bt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Dc(n){throw new Tt(bt.INTERNAL_ERROR,"Internal error: "+n)}class Hn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Hn.makeFromUrl(e,t)}catch{return new Hn(e,"")}if(s.path==="")return s;throw TP(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function c(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+o+d,"i"),v={bucket:1,path:3};function g(oe){oe.path_=decodeURIComponent(oe.path)}const _="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",w=new RegExp(`^https?://${T}/${_}/b/${o}/o${x}`,"i"),I={bucket:1,path:3},U=t===jw?"(?:storage.googleapis.com|storage.cloud.google.com)":t,L="([^?#]*)",q=new RegExp(`^https?://${U}/${o}/${L}`,"i"),F=[{regex:p,indices:v,postModify:c},{regex:w,indices:I,postModify:g},{regex:q,indices:{bucket:1,path:2},postModify:g}];for(let oe=0;oe<F.length;oe++){const ce=F[oe],ue=ce.regex.exec(e);if(ue){const A=ue[ce.indices.bucket];let D=ue[ce.indices.path];D||(D=""),s=new Hn(A,D),ce.postModify(s);break}}if(s==null)throw bP(e);return s}}class RP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function CP(n,e,t){let s=1,o=null,c=null,d=!1,p=0;function v(){return p===2}let g=!1;function _(...L){g||(g=!0,e.apply(null,L))}function T(L){o=setTimeout(()=>{o=null,n(w,v())},L)}function x(){c&&clearTimeout(c)}function w(L,...q){if(g){x();return}if(L){x(),_.call(null,L,...q);return}if(v()||d){x(),_.call(null,L,...q);return}s<64&&(s*=2);let F;p===1?(p=2,F=0):F=(s+Math.random())*1e3,T(F)}let I=!1;function U(L){I||(I=!0,x(),!g&&(o!==null?(L||(p=2),clearTimeout(o),T(0)):L||(p=1)))}return T(0),c=setTimeout(()=>{d=!0,U(!0)},t),U}function jP(n){n(!1)}function DP(n){return n!==void 0}function IP(n){return typeof n=="object"&&!Array.isArray(n)}function qv(n){return typeof n=="string"||n instanceof String}function bb(n){return Hv()&&n instanceof Blob}function Hv(){return typeof Blob<"u"}function Tb(n,e,t,s){if(s<e)throw Ig(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw Ig(`Invalid value for '${n}'. Expected ${t} or less.`)}function Nf(n,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function Ow(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const o=e(s)+"="+e(n[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var Li;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Li||(Li={}));function OP(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,c=e.indexOf(n)!==-1;return t||o||c}class PP{constructor(e,t,s,o,c,d,p,v,g,_,T,x=!0,w=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=v,this.timeout_=g,this.progressCallback_=_,this.connectionFactory_=T,this.retry=x,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,U)=>{this.resolve_=I,this.reject_=U,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new ch(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=p=>{const v=p.loaded,g=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(v,g)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const p=c.getErrorCode()===Li.NO_ERROR,v=c.getStatus();if(!p||OP(v,this.additionalRetryCodes_)&&this.retry){const _=c.getErrorCode()===Li.ABORT;s(!1,new ch(!1,null,_));return}const g=this.successCodes_.indexOf(v)!==-1;s(!0,new ch(g,c))})},t=(s,o)=>{const c=this.resolve_,d=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const v=this.callback_(p,p.getResponse());DP(v)?c(v):c()}catch(v){d(v)}else if(p!==null){const v=Fv();v.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,v)):d(v)}else if(o.canceled){const v=this.appDelete_?Iw():EP();d(v)}else{const v=_P();d(v)}};this.canceled_?t(!1,new ch(!1,null,!0)):this.backoffId_=CP(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&jP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ch{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function VP(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function MP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function LP(n,e){e&&(n["X-Firebase-GMPID"]=e)}function kP(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function UP(n,e,t,s,o,c,d=!0,p=!1){const v=Ow(n.urlParams),g=n.url+v,_=Object.assign({},n.headers);return LP(_,e),VP(_,t),MP(_,c),kP(_,s),new PP(g,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,d,p)}function zP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function BP(...n){const e=zP();if(e!==void 0){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}else{if(Hv())return new Blob(n);throw new Tt(bt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function FP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function qP(n){if(typeof atob>"u")throw NP("base-64");return atob(n)}const Wa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Wp{constructor(e,t){this.data=e,this.contentType=t||null}}function HP(n,e){switch(n){case Wa.RAW:return new Wp(Pw(e));case Wa.BASE64:case Wa.BASE64URL:return new Wp(Vw(n,e));case Wa.DATA_URL:return new Wp($P(e),QP(e))}throw Fv()}function Pw(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const c=s,d=n.charCodeAt(++t);s=65536|(c&1023)<<10|d&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function GP(n){let e;try{e=decodeURIComponent(n)}catch{throw Qc(Wa.DATA_URL,"Malformed data URL.")}return Pw(e)}function Vw(n,e){switch(n){case Wa.BASE64:{const o=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(o||c)throw Qc(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Wa.BASE64URL:{const o=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(o||c)throw Qc(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=qP(e)}catch(o){throw o.message.includes("polyfill")?o:Qc(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}class Mw{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Qc(Wa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=YP(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function $P(n){const e=new Mw(n);return e.base64?Vw(Wa.BASE64,e.rest):GP(e.rest)}function QP(n){return new Mw(n).contentType}function YP(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}class Os{constructor(e,t){let s=0,o="";bb(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(bb(this.data_)){const s=this.data_,o=FP(s,e,t);return o===null?null:new Os(o)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new Os(s,!0)}}static getBlob(...e){if(Hv()){const t=e.map(s=>s instanceof Os?s.data_:s);return new Os(BP.apply(null,t))}else{const t=e.map(d=>qv(d)?HP(Wa.RAW,d).data:d.data_);let s=0;t.forEach(d=>{s+=d.byteLength});const o=new Uint8Array(s);let c=0;return t.forEach(d=>{for(let p=0;p<d.length;p++)o[c++]=d[p]}),new Os(o,!0)}}uploadData(){return this.data_}}function Lw(n){let e;try{e=JSON.parse(n)}catch{return null}return IP(e)?e:null}function KP(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function XP(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return n.length===0?t:n+"/"+t}function kw(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function JP(n,e){return e}class gn{constructor(e,t,s,o){this.server=e,this.local=t||e,this.writable=!!s,this.xform=o||JP}}let uh=null;function WP(n){return!qv(n)||n.length<2?n:kw(n)}function Uw(){if(uh)return uh;const n=[];n.push(new gn("bucket")),n.push(new gn("generation")),n.push(new gn("metageneration")),n.push(new gn("name","fullPath",!0));function e(c,d){return WP(d)}const t=new gn("name");t.xform=e,n.push(t);function s(c,d){return d!==void 0?Number(d):d}const o=new gn("size");return o.xform=s,n.push(o),n.push(new gn("timeCreated")),n.push(new gn("updated")),n.push(new gn("md5Hash",null,!0)),n.push(new gn("cacheControl",null,!0)),n.push(new gn("contentDisposition",null,!0)),n.push(new gn("contentEncoding",null,!0)),n.push(new gn("contentLanguage",null,!0)),n.push(new gn("contentType",null,!0)),n.push(new gn("metadata","customMetadata",!0)),uh=n,uh}function ZP(n,e){function t(){const s=n.bucket,o=n.fullPath,c=new Hn(s,o);return e._makeStorageReference(c)}Object.defineProperty(n,"ref",{get:t})}function eV(n,e,t){const s={};s.type="file";const o=t.length;for(let c=0;c<o;c++){const d=t[c];s[d.local]=d.xform(s,e[d.server])}return ZP(s,n),s}function zw(n,e,t){const s=Lw(e);return s===null?null:eV(n,s,t)}function tV(n,e,t,s){const o=Lw(e);if(o===null||!qv(o.downloadTokens))return null;const c=o.downloadTokens;if(c.length===0)return null;const d=encodeURIComponent;return c.split(",").map(g=>{const _=n.bucket,T=n.fullPath,x="/b/"+d(_)+"/o/"+d(T),w=Nf(x,t,s),I=Ow({alt:"media",token:g});return w+I})[0]}function nV(n,e){const t={},s=e.length;for(let o=0;o<s;o++){const c=e[o];c.writable&&(t[c.server]=n[c.local])}return JSON.stringify(t)}class Gv{constructor(e,t,s,o){this.url=e,this.method=t,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Bw(n){if(!n)throw Fv()}function aV(n,e){function t(s,o){const c=zw(n,o,e);return Bw(c!==null),c}return t}function rV(n,e){function t(s,o){const c=zw(n,o,e);return Bw(c!==null),tV(c,o,n.host,n._protocol)}return t}function Fw(n){function e(t,s){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=vP():o=gP():t.getStatus()===402?o=pP(n.bucket):t.getStatus()===403?o=yP(n.path):o=s,o.status=t.getStatus(),o.serverResponse=s.serverResponse,o}return e}function qw(n){const e=Fw(n);function t(s,o){let c=e(s,o);return s.getStatus()===404&&(c=mP(n.path)),c.serverResponse=o.serverResponse,c}return t}function sV(n,e,t){const s=e.fullServerUrl(),o=Nf(s,n.host,n._protocol),c="GET",d=n.maxOperationRetryTime,p=new Gv(o,c,rV(n,t),d);return p.errorHandler=qw(e),p}function iV(n,e){const t=e.fullServerUrl(),s=Nf(t,n.host,n._protocol),o="DELETE",c=n.maxOperationRetryTime;function d(v,g){}const p=new Gv(s,o,d,c);return p.successCodes=[200,204],p.errorHandler=qw(e),p}function oV(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function lV(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=oV(null,e)),s}function cV(n,e,t,s,o){const c=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function p(){let F="";for(let oe=0;oe<2;oe++)F=F+Math.random().toString().slice(2);return F}const v=p();d["Content-Type"]="multipart/related; boundary="+v;const g=lV(e,s,o),_=nV(g,t),T="--"+v+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+v+`\r
Content-Type: `+g.contentType+`\r
\r
`,x=`\r
--`+v+"--",w=Os.getBlob(T,s,x);if(w===null)throw wP();const I={name:g.fullPath},U=Nf(c,n.host,n._protocol),L="POST",q=n.maxUploadRetryTime,X=new Gv(U,L,aV(n,t),q);return X.urlParams=I,X.headers=d,X.body=w.uploadData(),X.errorHandler=Fw(e),X}class uV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Li.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Li.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Li.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,o,c){if(this.sent_)throw Dc("cannot .send() more than once");if(Ks(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),c!==void 0)for(const d in c)c.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,c[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Dc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Dc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Dc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Dc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class dV extends uV{initXhr(){this.xhr_.responseType="text"}}function $v(){return new dV}class $i{constructor(e,t){this._service=e,t instanceof Hn?this._location=t:this._location=Hn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new $i(e,t)}get root(){const e=new Hn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kw(this._location.path)}get storage(){return this._service}get parent(){const e=KP(this._location.path);if(e===null)return null;const t=new Hn(this._location.bucket,e);return new $i(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw AP(e)}}function hV(n,e,t){n._throwIfRoot("uploadBytes");const s=cV(n.storage,n._location,Uw(),new Os(e,!0),t);return n.storage.makeRequestWithTokens(s,$v).then(o=>({metadata:o,ref:n}))}function fV(n){n._throwIfRoot("getDownloadURL");const e=sV(n.storage,n._location,Uw());return n.storage.makeRequestWithTokens(e,$v).then(t=>{if(t===null)throw SP();return t})}function mV(n){n._throwIfRoot("deleteObject");const e=iV(n.storage,n._location);return n.storage.makeRequestWithTokens(e,$v)}function pV(n,e){const t=XP(n._location.path,e),s=new Hn(n._location.bucket,t);return new $i(n.storage,s)}function gV(n){return/^[A-Za-z]+:\/\//.test(n)}function vV(n,e){return new $i(n,e)}function Hw(n,e){if(n instanceof Qv){const t=n;if(t._bucket==null)throw xP();const s=new $i(t,t._bucket);return e!=null?Hw(s,e):s}else return e!==void 0?pV(n,e):n}function yV(n,e){if(e&&gV(e)){if(n instanceof Qv)return vV(n,e);throw Ig("To use ref(service, url), the first argument must be a Storage instance.")}else return Hw(n,e)}function xb(n,e){const t=e?.[Dw];return t==null?null:Hn.makeFromBucketSpec(t,n)}function _V(n,e,t,s={}){n.host=`${e}:${t}`;const o=Ks(e);o&&(Vg(`https://${n.host}/b`),Mg("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:c}=s;c&&(n._overrideAuthToken=typeof c=="string"?c:Mb(c,n.app.options.projectId))}class Qv{constructor(e,t,s,o,c,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=jw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hP,this._maxUploadRetryTime=fP,this._requests=new Set,o!=null?this._bucket=Hn.makeFromBucketSpec(o,this._host):this._bucket=xb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Hn.makeFromBucketSpec(this._url,e):this._bucket=xb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Tb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Tb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $i(this,e)}_makeRequest(e,t,s,o,c=!0){if(this._deleted)return new RP(Iw());{const d=UP(e,this._appId,s,o,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const wb="@firebase/storage",Sb="0.14.0";const Gw="storage";function EV(n,e,t){return n=ct(n),hV(n,e,t)}function bV(n){return n=ct(n),fV(n)}function TV(n){return n=ct(n),mV(n)}function $w(n,e){return n=ct(n),yV(n,e)}function Qw(n=Ug(),e){n=ct(n);const s=ef(n,Gw).getImmediate({identifier:e}),o=Ob("storage");return o&&xV(s,...o),s}function xV(n,e,t,s={}){_V(n,e,t,s)}function wV(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Qv(t,s,o,e,Qi)}function SV(){Ui(new Bs(Gw,wV,"PUBLIC").setMultipleInstances(!0)),Za(wb,Sb,""),Za(wb,Sb,"esm2020")}SV();const dh="notas_fiscais",hh="comprovantes_bancarios",Og="documentos_financeiros";function Nb(n){if(!n)return n;const e={...n};return Object.keys(e).forEach(t=>{e[t]instanceof me&&(e[t]=e[t].toDate()),e[t]?.dataUpload instanceof me&&(e[t].dataUpload=e[t].dataUpload.toDate())}),e}async function Ab(n,e,t){const s=Qw(),o=Date.now(),c=`${t}_${e}_${o}_${n.name}`,d=$w(s,`${Og}/${c}`);await EV(d,n);const p=await bV(d);return{id:d.name,nome:n.name,url:p,tamanho:n.size,tipo:n.type,dataUpload:new Date}}async function Rb(n){const e=Qw(),t=$w(e,n);await TV(t)}const Ho={async criarNotaFiscal(n,e){try{const t=await Ab(n.arquivo,e,"nota_fiscal"),s={...n,arquivo:t,status:"pendente",criadoPor:e,criadoEm:new Date,atualizadoEm:new Date};return{id:(await Ur(Rt(Pe,dh),s)).id,...s}}catch(t){throw console.error("Erro ao criar nota fiscal:",t),new Error("Erro ao criar nota fiscal")}},async listarNotasFiscais(n){try{let e=tt(Rt(Pe,dh),jn("criadoEm","desc"));n?.status&&(e=tt(e,Te("status","==",n.status))),n?.dataInicio&&(e=tt(e,Te("dataEmissao",">=",n.dataInicio))),n?.dataFim&&(e=tt(e,Te("dataEmissao","<=",n.dataFim)));let s=(await Ct(e)).docs.map(o=>{const c=Nb(o.data());return{id:o.id,...c}});if(n?.valorMin&&(s=s.filter(o=>o.valor>=n.valorMin)),n?.valorMax&&(s=s.filter(o=>o.valor<=n.valorMax)),n?.busca){const o=n.busca.toLowerCase();s=s.filter(c=>c.numero.toLowerCase().includes(o)||c.fornecedor.toLowerCase().includes(o)||c.descricao?.toLowerCase().includes(o))}return s}catch(e){throw console.error("Erro ao listar notas fiscais:",e),new Error("Erro ao listar notas fiscais")}},async atualizarNotaFiscal(n,e){try{const t=Xe(Pe,dh,n);await Dn(t,{...e,atualizadoEm:new Date})}catch(t){throw console.error("Erro ao atualizar nota fiscal:",t),new Error("Erro ao atualizar nota fiscal")}},async deletarNotaFiscal(n){try{const e=Xe(Pe,dh,n),t=await Fi(e);if(t.exists()){const s=t.data();s.arquivo?.id&&await Rb(`${Og}/${s.arquivo.id}`),await Ys(e)}}catch(e){throw console.error("Erro ao deletar nota fiscal:",e),new Error("Erro ao deletar nota fiscal")}},async criarComprovanteBancario(n,e){try{const t=await Ab(n.arquivo,e,"comprovante"),s={...n,arquivo:t,status:"pendente",criadoPor:e,criadoEm:new Date,atualizadoEm:new Date};return{id:(await Ur(Rt(Pe,hh),s)).id,...s}}catch(t){throw console.error("Erro ao criar comprovante bancrio:",t),new Error("Erro ao criar comprovante bancrio")}},async listarComprovantesBancarios(n){try{let e=tt(Rt(Pe,hh),jn("criadoEm","desc"));n?.status&&(e=tt(e,Te("status","==",n.status))),n?.dataInicio&&(e=tt(e,Te("dataTransacao",">=",n.dataInicio))),n?.dataFim&&(e=tt(e,Te("dataTransacao","<=",n.dataFim)));let s=(await Ct(e)).docs.map(o=>{const c=Nb(o.data());return{id:o.id,...c}});if(n?.valorMin&&(s=s.filter(o=>o.valor>=n.valorMin)),n?.valorMax&&(s=s.filter(o=>o.valor<=n.valorMax)),n?.busca){const o=n.busca.toLowerCase();s=s.filter(c=>c.beneficiario.toLowerCase().includes(o)||c.descricao.toLowerCase().includes(o)||c.numeroDocumento?.toLowerCase().includes(o))}return s}catch(e){throw console.error("Erro ao listar comprovantes bancrios:",e),new Error("Erro ao listar comprovantes bancrios")}},async atualizarComprovanteBancario(n,e){try{const t=Xe(Pe,hh,n);await Dn(t,{...e,atualizadoEm:new Date})}catch(t){throw console.error("Erro ao atualizar comprovante bancrio:",t),new Error("Erro ao atualizar comprovante bancrio")}},async deletarComprovanteBancario(n){try{const e=Xe(Pe,hh,n),t=await Fi(e);if(t.exists()){const s=t.data();s.arquivo?.id&&await Rb(`${Og}/${s.arquivo.id}`),await Ys(e)}}catch(e){throw console.error("Erro ao deletar comprovante bancrio:",e),new Error("Erro ao deletar comprovante bancrio")}}},NV=()=>{const{user:n}=Sa(),[e,t]=O.useState("notas"),[s,o]=O.useState([]),[c,d]=O.useState([]),[p,v]=O.useState(!1),[g,_]=O.useState(!1),[T,x]=O.useState(!1),[w,I]=O.useState({numero:"",fornecedor:"",valor:0,dataEmissao:new Date,tipo:"entrada",categoria:"",arquivo:null}),[U,L]=O.useState({tipo:"pagamento",banco:"",valor:0,dataTransacao:new Date,beneficiario:"",descricao:"",arquivo:null});O.useEffect(()=>{q()},[e]);const q=async()=>{v(!0);try{if(e==="notas"){const S=await Ho.listarNotasFiscais();o(S)}else{const S=await Ho.listarComprovantesBancarios();d(S)}}catch(S){console.error("Erro ao carregar dados:",S)}finally{v(!1)}},X=async S=>{if(S.preventDefault(),!(!n?.uid||!w.arquivo)){v(!0);try{await Ho.criarNotaFiscal({...w,arquivo:w.arquivo},n.uid),I({numero:"",fornecedor:"",valor:0,dataEmissao:new Date,tipo:"entrada",categoria:"",arquivo:null}),_(!1),await q(),alert("Nota fiscal cadastrada com sucesso!")}catch(j){console.error("Erro ao cadastrar nota fiscal:",j),alert("Erro ao cadastrar nota fiscal")}finally{v(!1)}}},F=async S=>{if(S.preventDefault(),!(!n?.uid||!U.arquivo)){v(!0);try{await Ho.criarComprovanteBancario({...U,arquivo:U.arquivo},n.uid),L({tipo:"pagamento",banco:"",valor:0,dataTransacao:new Date,beneficiario:"",descricao:"",arquivo:null}),_(!1),await q(),alert("Comprovante bancrio cadastrado com sucesso!")}catch(j){console.error("Erro ao cadastrar comprovante:",j),alert("Erro ao cadastrar comprovante bancrio")}finally{v(!1)}}},oe=async S=>{if(confirm("Tem certeza que deseja deletar esta nota fiscal?"))try{await Ho.deletarNotaFiscal(S),await q()}catch(j){console.error("Erro ao deletar nota fiscal:",j),alert("Erro ao deletar nota fiscal")}},ce=async S=>{if(confirm("Tem certeza que deseja deletar este comprovante?"))try{await Ho.deletarComprovanteBancario(S),await q()}catch(j){console.error("Erro ao deletar comprovante:",j),alert("Erro ao deletar comprovante")}},ue=S=>{switch(S){case"aprovado":return l.jsx(dn,{className:"status-icon approved"});case"rejeitado":return l.jsx(bw,{className:"status-icon rejected"});default:return l.jsx(ia,{className:"status-icon pending"})}},A=S=>{switch(S){case"aprovado":return"Aprovado";case"rejeitado":return"Rejeitado";default:return"Pendente"}},D=S=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(S);return l.jsx($r,{children:l.jsxs("div",{className:"documentos-financeiros-page",children:[l.jsx("div",{className:"page-header",children:l.jsxs("div",{className:"header-content",children:[l.jsxs("div",{className:"header-title-section",children:[l.jsx(Gt,{className:"page-icon"}),l.jsxs("div",{children:[l.jsx("h1",{children:"Documentos Financeiros"}),l.jsx("p",{className:"page-subtitle",children:"Gerencie notas fiscais e comprovantes bancrios"})]})]}),l.jsxs("div",{className:"header-actions",children:[l.jsxs("button",{className:"btn-secondary",onClick:()=>x(!T),children:[l.jsx(Ji,{}),"Filtros"]}),l.jsxs("button",{className:"btn-primary",onClick:()=>_(!g),children:[l.jsx(PO,{}),"Novo Upload"]})]})]})}),l.jsxs("div",{className:"tabs-container",children:[l.jsxs("button",{className:`tab ${e==="notas"?"active":""}`,onClick:()=>t("notas"),children:[l.jsx(Gt,{}),"Notas Fiscais (",s.length,")"]}),l.jsxs("button",{className:`tab ${e==="comprovantes"?"active":""}`,onClick:()=>t("comprovantes"),children:[l.jsx(Gt,{}),"Comprovantes Bancrios (",c.length,")"]})]}),g&&l.jsxs("div",{className:"upload-form-container",children:[l.jsxs("div",{className:"form-header",children:[l.jsx("h3",{children:e==="notas"?"Nova Nota Fiscal":"Novo Comprovante Bancrio"}),l.jsx("button",{className:"close-btn",onClick:()=>_(!1),children:l.jsx(In,{})})]}),e==="notas"?l.jsxs("form",{onSubmit:X,className:"upload-form",children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Nmero da Nota Fiscal *"}),l.jsx("input",{type:"text",value:w.numero,onChange:S=>I({...w,numero:S.target.value}),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Srie"}),l.jsx("input",{type:"text",value:w.serie||"",onChange:S=>I({...w,serie:S.target.value})})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Fornecedor *"}),l.jsx("input",{type:"text",value:w.fornecedor,onChange:S=>I({...w,fornecedor:S.target.value}),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"CNPJ do Fornecedor"}),l.jsx("input",{type:"text",value:w.cnpjFornecedor||"",onChange:S=>I({...w,cnpjFornecedor:S.target.value})})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Valor *"}),l.jsx("input",{type:"number",step:"0.01",min:"0",value:w.valor,onChange:S=>I({...w,valor:parseFloat(S.target.value)||0}),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Tipo *"}),l.jsxs("select",{value:w.tipo,onChange:S=>I({...w,tipo:S.target.value}),required:!0,children:[l.jsx("option",{value:"entrada",children:"Entrada"}),l.jsx("option",{value:"saida",children:"Sada"})]})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Data de Emisso *"}),l.jsx("input",{type:"date",value:w.dataEmissao.toISOString().split("T")[0],onChange:S=>I({...w,dataEmissao:new Date(S.target.value)}),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Data de Vencimento"}),l.jsx("input",{type:"date",value:w.dataVencimento?w.dataVencimento.toISOString().split("T")[0]:"",onChange:S=>I({...w,dataVencimento:S.target.value?new Date(S.target.value):void 0})})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Categoria *"}),l.jsx("input",{type:"text",value:w.categoria,onChange:S=>I({...w,categoria:S.target.value}),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Descrio"}),l.jsx("textarea",{value:w.descricao||"",onChange:S=>I({...w,descricao:S.target.value}),rows:3})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Arquivo (PDF/Imagem) *"}),l.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:S=>{const j=S.target.files?.[0];j&&I({...w,arquivo:j})},required:!0})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>_(!1),children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn-primary",disabled:p,children:p?"Enviando...":"Enviar"})]})]}):l.jsxs("form",{onSubmit:F,className:"upload-form",children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Tipo de Transao *"}),l.jsxs("select",{value:U.tipo,onChange:S=>L({...U,tipo:S.target.value}),required:!0,children:[l.jsx("option",{value:"deposito",children:"Depsito"}),l.jsx("option",{value:"saque",children:"Saque"}),l.jsx("option",{value:"transferencia",children:"Transferncia"}),l.jsx("option",{value:"pagamento",children:"Pagamento"}),l.jsx("option",{value:"recebimento",children:"Recebimento"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Banco *"}),l.jsx("input",{type:"text",value:U.banco,onChange:S=>L({...U,banco:S.target.value}),required:!0})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Agncia"}),l.jsx("input",{type:"text",value:U.agencia||"",onChange:S=>L({...U,agencia:S.target.value})})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Conta"}),l.jsx("input",{type:"text",value:U.conta||"",onChange:S=>L({...U,conta:S.target.value})})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Valor *"}),l.jsx("input",{type:"number",step:"0.01",min:"0",value:U.valor,onChange:S=>L({...U,valor:parseFloat(S.target.value)||0}),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Data da Transao *"}),l.jsx("input",{type:"date",value:U.dataTransacao.toISOString().split("T")[0],onChange:S=>L({...U,dataTransacao:new Date(S.target.value)}),required:!0})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Beneficirio *"}),l.jsx("input",{type:"text",value:U.beneficiario,onChange:S=>L({...U,beneficiario:S.target.value}),required:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"CPF/CNPJ do Beneficirio"}),l.jsx("input",{type:"text",value:U.cpfCnpjBeneficiario||"",onChange:S=>L({...U,cpfCnpjBeneficiario:S.target.value})})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Nmero do Documento"}),l.jsx("input",{type:"text",value:U.numeroDocumento||"",onChange:S=>L({...U,numeroDocumento:S.target.value})})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Descrio *"}),l.jsx("textarea",{value:U.descricao,onChange:S=>L({...U,descricao:S.target.value}),rows:3,required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Arquivo (PDF/Imagem) *"}),l.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:S=>{const j=S.target.files?.[0];j&&L({...U,arquivo:j})},required:!0})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>_(!1),children:"Cancelar"}),l.jsx("button",{type:"submit",className:"btn-primary",disabled:p,children:p?"Enviando...":"Enviar"})]})]})]}),l.jsxs("div",{className:"documentos-lista",children:[p&&l.jsx("div",{className:"loading",children:"Carregando..."}),e==="notas"?s.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx(Gt,{}),l.jsx("p",{children:"Nenhuma nota fiscal cadastrada"})]}):s.map(S=>l.jsxs("div",{className:"documento-card",children:[l.jsxs("div",{className:"documento-header",children:[l.jsxs("div",{className:"documento-info",children:[l.jsxs("h3",{children:["NF ",S.numero]}),l.jsx("span",{className:"documento-fornecedor",children:S.fornecedor})]}),l.jsxs("div",{className:"documento-status",children:[ue(S.status),l.jsx("span",{children:A(S.status)})]})]}),l.jsxs("div",{className:"documento-body",children:[l.jsxs("div",{className:"documento-detalhes",children:[l.jsxs("div",{children:[l.jsx("span",{className:"label",children:"Valor:"}),l.jsx("span",{className:"value",children:D(S.valor)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"label",children:"Tipo:"}),l.jsx("span",{className:"value",children:S.tipo==="entrada"?"Entrada":"Sada"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"label",children:"Categoria:"}),l.jsx("span",{className:"value",children:S.categoria})]}),l.jsxs("div",{children:[l.jsx("span",{className:"label",children:"Data Emisso:"}),l.jsx("span",{className:"value",children:S.dataEmissao.toLocaleDateString()})]})]}),l.jsxs("div",{className:"documento-actions",children:[l.jsxs("a",{href:S.arquivo.url,target:"_blank",rel:"noopener noreferrer",className:"btn-action",children:[l.jsx(Rg,{}),"Visualizar"]}),l.jsxs("a",{href:S.arquivo.url,download:!0,className:"btn-action",children:[l.jsx(ll,{}),"Download"]}),l.jsxs("button",{className:"btn-action danger",onClick:()=>oe(S.id),children:[l.jsx(In,{}),"Deletar"]})]})]})]},S.id)):c.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx(Gt,{}),l.jsx("p",{children:"Nenhum comprovante bancrio cadastrado"})]}):c.map(S=>l.jsxs("div",{className:"documento-card",children:[l.jsxs("div",{className:"documento-header",children:[l.jsxs("div",{className:"documento-info",children:[l.jsx("h3",{children:S.tipo==="deposito"?"Depsito":S.tipo==="saque"?"Saque":S.tipo==="transferencia"?"Transferncia":S.tipo==="pagamento"?"Pagamento":"Recebimento"}),l.jsx("span",{className:"documento-fornecedor",children:S.beneficiario})]}),l.jsxs("div",{className:"documento-status",children:[ue(S.status),l.jsx("span",{children:A(S.status)})]})]}),l.jsxs("div",{className:"documento-body",children:[l.jsxs("div",{className:"documento-detalhes",children:[l.jsxs("div",{children:[l.jsx("span",{className:"label",children:"Valor:"}),l.jsx("span",{className:"value",children:D(S.valor)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"label",children:"Banco:"}),l.jsx("span",{className:"value",children:S.banco})]}),l.jsxs("div",{children:[l.jsx("span",{className:"label",children:"Data:"}),l.jsx("span",{className:"value",children:S.dataTransacao.toLocaleDateString()})]}),l.jsxs("div",{children:[l.jsx("span",{className:"label",children:"Descrio:"}),l.jsx("span",{className:"value",children:S.descricao})]})]}),l.jsxs("div",{className:"documento-actions",children:[l.jsxs("a",{href:S.arquivo.url,target:"_blank",rel:"noopener noreferrer",className:"btn-action",children:[l.jsx(Rg,{}),"Visualizar"]}),l.jsxs("a",{href:S.arquivo.url,download:!0,className:"btn-action",children:[l.jsx(ll,{}),"Download"]}),l.jsxs("button",{className:"btn-action danger",onClick:()=>ce(S.id),children:[l.jsx(In,{}),"Deletar"]})]})]})]},S.id))]})]})})};function AV(){return l.jsx(lO,{children:l.jsxs(U4,{children:[l.jsx(Nn,{path:An.home,element:l.jsx(gb,{})}),l.jsx(Nn,{path:An.login,element:l.jsx(MO,{})}),l.jsx(Nn,{path:An.register,element:l.jsx(LO,{})}),l.jsx(Nn,{path:An.forgotPassword,element:l.jsx(kO,{})}),l.jsx(Nn,{path:An.dashboard,element:l.jsx(vO,{children:l.jsx(gb,{})})}),l.jsx(Nn,{path:An.premiosProdutividade,element:l.jsx(YO,{})}),l.jsx(Nn,{path:An.boletinsMedicao,element:l.jsx(XO,{})}),l.jsx(Nn,{path:An.documentacoes,element:l.jsx(ZO,{})}),l.jsx(Nn,{path:An.cadernoVirtual,element:l.jsx(nP,{})}),l.jsx(Nn,{path:An.relatorios,element:l.jsx(oP,{})}),l.jsx(Nn,{path:An.financeiro,element:l.jsx(lP,{})}),l.jsx(Nn,{path:An.notificacoes,element:l.jsx(dP,{})}),l.jsx(Nn,{path:An.documentosFinanceiros,element:l.jsx(NV,{})})]})})}function RV(){return l.jsx(GI,{children:l.jsx(QI,{children:l.jsx(AV,{})})})}PN.createRoot(document.getElementById("root")).render(l.jsx(O.StrictMode,{children:l.jsx(RV,{})}));
